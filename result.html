<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>미운 그놈 스탯 분석 결과 - 직장편</title>

    <!-- 파비콘 추가 -->
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

    <!-- 카카오 공유기능 추가-->
    <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>

    <!-- 기본 Open Graph 메타 태그 -->
    <meta property="og:title" content="미운 그놈 스탯 분석 결과 - 직장편" />
    <meta property="og:description" content="당신의 상사는 어떤 유형인지 확인해보세요!" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://sungho-park522.github.io/troll-man-test/images/boss_complex.png" />
    <meta property="og:image:width" content="800" />
    <meta property="og:image:height" content="400" />

    <!-- 추가 메타 태그 (카카오톡용) -->
    <meta property="og:site_name" content="미운 그놈 분석하기" />

    <!-- 트위터 카드 태그 (트위터 공유 시 사용) -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="미운 그놈 스탯 분석 결과 - 직장편" />
    <meta name="twitter:description" content="당신의 상사는 어떤 유형인지 확인해보세요!" />
    <meta name="twitter:image" content="https://yourdomain.com/images/boss_default.png" />

    <!-- Chart.js 사용을 위한 CDN 링크 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"
        integrity="sha512-QSkVNOCYLtj73J4hbmVoOV6KVZuMluZlioC+trLpewV8qMjsWqlIQvkn1KGX2StWvPMdWGBqim1xlC8krl1EKQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <style>
        /* 로딩 화면 스타일 */
        .loading-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .loading-content {
            width: 80%;
            max-width: 500px;
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            text-align: center;
        }

        .loading-content h2 {
            color: #d9534f;
            margin-bottom: 15px;
            font-size: 28px;
        }

        .loading-text {
            margin-bottom: 20px;
            color: #555;
            font-size: 16px;
        }

        .progress-bar-container {
            width: 100%;
            height: 20px;
            background-color: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-bar {
            height: 100%;
            width: 0;
            background: linear-gradient(90deg, #ff6b6b, #d9534f);
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        .loading-percentage {
            font-weight: bold;
            color: #d9534f;
            font-size: 18px;
            margin-bottom: 20px;
        }

        .loading-messages {
            min-height: 50px;
            margin-bottom: 20px;
        }

        .loading-messages p {
            font-style: italic;
            color: #666;
        }

        /* 광고 컨테이너 스타일 */
        .ad-container {
            border: 1px solid #ddd;
            border-radius: 8px;
            margin: 20px auto;
            /* 상하 여백과 좌우 중앙 정렬 */
            overflow: hidden;
            background-color: #f9f9f9;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            max-width: 100%;
            /* 반응형을 위한 최대 너비 제한 */
            width: fit-content;
            /* 내용에 맞게 너비 조정 */
        }

        .ad-header {
            background-color: #f0f0f0;
            padding: 5px 10px;
            text-align: right;
        }

        .ad-header span {
            font-size: 12px;
            color: #777;
        }

        .ad-content {
            padding: 15px;
            text-align: center;
            /* 광고 내용 중앙 정렬 */
            display: flex;
            justify-content: center;
            /* 수평 중앙 정렬 */
            align-items: center;
            /* 수직 중앙 정렬 */
        }

        /* 반응형 광고 스타일 */
        @media (max-width: 768px) {
            .ad-container {
                width: 100%;
                /* 모바일에서 전체 너비 사용 */
            }

            /* 모바일에서 더 적은 패딩 사용 */
            .ad-content {
                padding: 10px;
            }
        }

        /* 페이드인 애니메이션을 위한 스타일 (result.html에 사용) */
        .ad-container.fade-in {
            animation: fadeIn 0.5s ease-out forwards;
            opacity: 0;
        }

        /* 결과 보기 버튼 */
        .show-results-btn {
            background-color: #d9534f;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            margin-top: 10px;
        }

        .show-results-btn:hover {
            background-color: #c9302c;
            transform: scale(1.05);
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        .pulse {
            animation: pulse 1.5s infinite;
        }

        .difficulty-description {
            text-align: center;
            margin-top: 15px;
            font-size: 16px;
            font-style: italic;
            line-height: 1.5;
        }

        .gauge-label {
            position: absolute;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            font-weight: bold;
            font-size: 16px;
            padding: 2px 10px;
            border-radius: 12px;
            z-index: 20 !important;
            min-width: 120px;
            text-align: center;
            line-height: 26px !important;
            height: 26px !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            margin: 0 !important;
            box-sizing: border-box !important;

            /* 밝은 글자색 설정 */
            color: white !important;
            /* 어두운 배경에서도 글자가 잘 보이도록 텍스트 그림자 추가 */
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8),
                -1px -1px 2px rgba(0, 0, 0, 0.8),
                1px -1px 2px rgba(0, 0, 0, 0.8),
                -1px 1px 2px rgba(0, 0, 0, 0.8) !important;
            /* 폰트 크기 약간 키우기 */
            font-size: 18px !important;
            /* 글자 간격 약간 늘리기 */
            letter-spacing: 0.5px !important;
        }

        /* 생존 난이도 섹션 CSS 추가 */
        .difficulty-description {
            text-align: center;
            margin-top: 15px;
            font-size: 16px;
            font-style: italic;
            line-height: 1.5;
        }

        /* gauge-label 스타일 수정 */
        .gauge-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            text-shadow: 1px 1px 1px rgba(255, 255, 255, 0.7);
            /* color 속성 제거 (JavaScript에서 동적으로 설정) */
        }

        /* 난이도 텍스트에 애니메이션 추가 (선택사항) */
        @keyframes pulseText {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        .gauge-label {
            animation: pulseText 2s infinite ease-in-out;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }

        .result-container {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            position: relative;
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
        }

        /* 보스 타이틀 스타일 */
        .boss-title-container {
            margin-bottom: 25px;
        }

        .boss-title {
            text-align: center;
            font-size: 28px;
            font-weight: bold;
            color: white;
            margin-bottom: 0;
            padding: 15px;
            background-color: #d9534f;
            border-radius: 8px 8px 0 0;
        }

        /* 상사 분석 보고서 스타일 */
        .report-container {
            border: 2px solid #d9534f;
            border-radius: 0 0 8px 8px;
            margin-top: 0;
            padding: 0;
            background-color: #fff;
            margin-bottom: 30px;
        }

        .report-header {
            background-color: #f8d7da;
            padding: 10px 20px;
            border-bottom: 1px solid #d9534f;
        }

        .report-header h3 {
            margin: 0;
            color: #d9534f;
            font-size: 18px;
        }

        .report-body {
            padding: 20px;
        }

        .report-section {
            margin-bottom: 15px;
        }

        .report-section:last-child {
            margin-bottom: 0;
        }

        .report-section p {
            margin: 0 0 12px;
            line-height: 1.7;
        }

        .report-section p:last-child {
            margin-bottom: 0;
        }

        .highlight {
            font-weight: bold;
            color: #d9534f;
            background-color: #f8d7da;
            padding: 0 3px;
        }

        .quote {
            font-style: italic;
            color: #6c757d;
            padding-left: 5px;
            border-left: 3px solid #d9534f;
            margin: 8px 0 8px 15px;
            display: inline-block;
        }

        /* 스탯과 이미지를 포함할 컨테이너 - 가로 배치 */
        .results-main-content {
            display: flex;
            flex-direction: row;
            align-items: flex-start;
            gap: 20px;
            margin-bottom: 30px;
            width: 100%;
            overflow: hidden;
        }

        /* 레이더 차트 컨테이너 */
        .stats-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 0;
            min-width: 0;
            max-width: 50%;
        }

        .radar-chart-container {
            width: 100%;
            height: 400px;
            margin: 0 auto;
            padding: 10px;
            position: relative;
            box-sizing: border-box;
        }

        .stats-title {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        /* 상사 이미지 컨테이너 */
        .boss-image-container {
            flex: 1;
            position: relative;
            height: 400px;
            margin-bottom: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-width: 0;
            max-width: 50%;
        }

        .boss-image {
            max-height: 100%;
            max-width: 100%;
            width: 200px;
            height: 250px;
            background-color: rgba(220, 220, 220, 0.3);
            border: 2px dashed #ccc;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 14px;
        }

        .bubble-container {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
        }

        .speech-bubble {
            position: absolute;
            padding: 10px 15px;
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            font-size: 14px;
            max-width: 130px;
            z-index: 10;
        }

        .speech-bubble:after {
            content: '';
            position: absolute;
            width: 12px;
            height: 12px;
            background-color: white;
            transform: rotate(45deg);
            z-index: -1;
            box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.05);
        }

        /* 말풍선 위치 조정 */
        .bubble-top-left {
            top: 10px;
            left: 20px;
        }

        .bubble-top-left:after {
            bottom: -6px;
            left: 20px;
        }

        .bubble-top-right {
            top: 25px;
            right: 20px;
        }

        .bubble-top-right:after {
            bottom: -6px;
            right: 20px;
        }

        .bubble-bottom-left {
            bottom: 15px;
            left: 25px;
        }

        .bubble-bottom-left:after {
            top: -6px;
            left: 20px;
        }

        .bubble-bottom-right {
            bottom: 30px;
            right: 25px;
        }

        .bubble-bottom-right:after {
            top: -6px;
            right: 20px;
        }

        /* 생존 난이도 섹션 */
        .difficulty-container {
            margin: 20px 0 30px 0;
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-top: 3px solid #ffc107;
        }

        .section-title {
            text-align: center;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e9ecef;
        }

        .difficulty-title {
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
            font-size: 18px;
        }

        .difficulty-stars {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .star {
            font-size: 30px;
            color: #ddd;
            margin: 0 5px;
        }

        .star.filled {
            color: #ff9800;
        }

        /* 게이지 여백 추가 */
        .difficulty-gauge {
            height: 30px;
            background-color: #e9ecef;
            border-radius: 15px;
            overflow: hidden;
            margin: 30px 0 20px 0;
            /* 위 여백 추가 */
            position: relative;
        }

        .gauge-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #ffc107, #ff5722);
            width: 0%;
            transition: width 1.5s ease-in-out;
            border-radius: 15px;
        }

        .gauge-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #333;
            font-weight: bold;
            text-shadow: 1px 1px 1px rgba(255, 255, 255, 0.7);
        }

        /* 심리 분석 섹션 스타일 */
        .psychology-section {
            margin-top: 0;
            padding: 20px;
            background-color: #f0f7ff;
            border-radius: 8px;
            border-top: 3px solid #3f51b5;
            box-shadow: 0 3px 15px rgba(63, 81, 181, 0.15);
            position: relative;
        }

        .mode-toggle {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            gap: 10px;
        }

        .mode-button {
            background-color: #f0f0f0;
            border: none;
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mode-button.active {
            background-color: #3f51b5;
            color: white;
            box-shadow: 0 2px 5px rgba(63, 81, 181, 0.3);
        }

        .psychology-title {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 18px;
            color: #3f51b5;
            text-align: center;
        }

        .psychology-list {
            padding-left: 25px;
            margin: 0;
        }

        .psychology-list li {
            margin-bottom: 20px;
            line-height: 1.6;
            position: relative;
            padding: 15px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .psychology-list li:last-child {
            margin-bottom: 0;
        }

        .psychology-list li:before {
            content: '🧠';
            position: absolute;
            left: -25px;
            font-size: 20px;
        }

        .psychology-list li.fun-mode:before {
            content: '😎';
        }

        .psychology-list li strong {
            color: #3f51b5;
            display: block;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .psychology-list li span {
            display: block;
            margin-bottom: 10px;
        }

        .psychology-list li em {
            color: #3f51b5;
            display: block;
            margin-top: 12px;
            font-style: italic;
            padding-top: 10px;
            border-top: 1px dashed #e0e0e0;
        }

        /* 당신의 빡침 포인트 섹션 스타일 */
        .anger-points {
            background-color: #f0f7ff !important;
            /* 파란색 계열 배경으로 변경 */
            border-top: 3px solid #3f51b5 !important;
            /* 파란색 테두리 */
        }

        .anger-list li strong {
            color: #3f51b5;
            /* 질문(행동) 텍스트 색상 */
            display: inline-block;
            margin-bottom: 5px;
        }

        .anger-list li em {
            color: #3f51b5;
            /* 대처법 텍스트 색상 */
            display: block;
            margin-top: 8px;
            font-style: italic;
        }

        .anger-title {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 18px;
            color: #e60000;
            /* 진한 빨간색 */
            text-align: center;
        }

        .anger-list {
            padding-left: 25px;
            margin: 0;
        }

        .anger-list li {
            margin-bottom: 15px;
            line-height: 1.5;
            position: relative;
            padding-left: 10px;
        }

        .anger-list li:before {
            content: '🧠' !important;
            /* 불 이모지를 뇌 이모지로 변경 */
        }

        .anger-list li:last-child {
            margin-bottom: 0;
        }

        /* 심리처방전 섹션 */
        /* 심리 처방전 섹션 스타일 */
        .psychological-prescription {
            margin-top: 0;
            padding: 20px;
            background-color: #f0e6ff;
            /* 보라색 계열의 연한 배경 */
            border-radius: 8px;
            border-top: 3px solid #9370DB;
            /* 중간 톤의 보라색 테두리 */
            box-shadow: 0 3px 10px rgba(147, 112, 219, 0.2);
        }

        .prescription-title {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 18px;
            color: #8A2BE2;
            /* 보라색 계열 */
            text-align: center;
        }

        .prescription-list {
            padding-left: 25px;
            margin: 0;
        }

        .prescription-list li {
            margin-bottom: 15px;
            line-height: 1.5;
            position: relative;
            padding-left: 10px;
        }

        .prescription-list li:before {
            content: '💜';
            position: absolute;
            left: -25px;
            color: #9370DB;
        }

        .prescription-list li:last-child {
            margin-bottom: 0;
        }

        /* 생존 팁 섹션 */
        .survival-tips {
            margin-top: 0;
            padding: 20px;
            background-color: #e8f4f8;
            border-radius: 8px;
            border-top: 3px solid #17a2b8;
        }

        .tips-title {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 18px;
            color: #17a2b8;
        }

        .tips-list {
            padding-left: 25px;
            margin: 0;
        }

        .tips-list li {
            margin-bottom: 12px;
        }

        .tips-list li:last-child {
            margin-bottom: 0;
        }

        .positive-traits {
            margin-top: 25px;
            padding: 15px;
            background-color: #e8f5e9;
            border-radius: 8px;
            border-left: 3px solid #28a745;
        }

        .positive-title {
            font-weight: bold;
            color: #28a745;
            margin-bottom: 10px;
        }

        /* 공유 섹션 */
        .share-section {
            margin-top: 30px;
            text-align: center;
        }

        .share-title {
            margin-bottom: 15px;
            font-weight: bold;
        }

        .share-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .share-button {
            padding: 10px 20px;
            background-color: #4a6bdf;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
        }

        .share-button:hover {
            background-color: #3a54b4;
        }

        .back-to-test {
            text-align: center;
            margin-top: 30px;
        }

        .back-button {
            padding: 10px 20px;
            background-color: #6c757d;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .back-button:hover {
            background-color: #5a6268;
        }

        /* 결과 애니메이션 */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
            opacity: 0;
        }

        .delay-1 {
            animation-delay: 0.2s;
        }

        .delay-2 {
            animation-delay: 0.4s;
        }

        .delay-3 {
            animation-delay: 0.4s;
        }

        .delay-4 {
            animation-delay: 0.8s;
        }

        .delay-5 {
            animation-delay: 1.0s;
        }

        .delay-6 {
            animation-delay: 1.2s;
        }

        @media (max-width: 768px) {

            /* 모바일에서는 다시 세로 배치로 전환 */
            .results-main-content {
                flex-direction: column;
                gap: 15px;
                /* 간격 줄임 */
            }

            .stats-container,
            .boss-image-container {
                max-width: 100%;
                width: 100%;
                /* 가로 너비 100%로 설정 */
                min-height: auto;
                /* 높이는 컨텐츠에 맞게 자동 조정 */
            }

            .radar-chart-container {
                height: 60vh;
                /* 뷰포트 높이의 60%로 설정 */
                width: 100%;
                /* 가로 너비 100%로 설정 */
                margin: 0 auto;
            }

            .boss-image-container {
                height: auto;
                /* 높이 자동 조정 */
                padding: 20px 0;
                /* 상하 여백 추가 */
                position: relative;
                /* 포지션 설정 추가 */
            }

            .boss-image {
                width: 70%;
                /* 부모 컨테이너의 70% 크기로 설정 */
                height: auto;
                /* 비율 유지 */
                max-height: 50vh;
                /* 최대 높이 제한 */
                margin: 0 auto;
                /* 중앙 정렬 */
                display: block;
                /* 블록 요소로 변경 */
            }

            /* 말풍선 위치 조정 */
            .bubble-container {
                position: absolute;
                width: 100%;
                height: 100%;
                padding: 10px;
                /* 패딩 추가 */
            }

            /* 각 말풍선 위치 조정 */
            .speech-bubble {
                max-width: 28%;
                /* 너비 축소 */
                font-size: 3vw;
                /* 글자 크기 조정 */
                padding: 1.5vw;
            }

            /* 말풍선 위치 개별 조정 */
            .bubble-top-left {
                top: 5%;
                left: 5%;
            }

            .bubble-top-right {
                top: 5%;
                right: 5%;
            }

            .bubble-bottom-left {
                bottom: 5%;
                left: 5%;
            }

            .bubble-bottom-right {
                bottom: 5%;
                right: 5%;
            }
        }
    </style>
</head>

<body>

    <!-- 로딩 화면 컨테이너 -->
    <div id="loading-container" class="loading-container">
        <div class="loading-content">
            <h2>상사 분석 중...</h2>
            <p class="loading-text">당신의 상사를 심층 분석하고 있습니다. 잠시만 기다려주세요.</p>

            <div class="progress-bar-container">
                <div class="progress-bar" id="loading-progress-bar"></div>
            </div>

            <p class="loading-percentage" id="loading-percentage">0%</p>

            <div class="loading-messages">
                <p id="loading-message">상사의 꼰대력을 측정중...</p>
            </div>

            <!-- 광고 컨테이너 -->
            <div class="ad-container">
                <div class="ad-header">
                    <span>추천</span>
                </div>
                <div class="ad-content">
                    <ins class="kakao_ad_area" style="display:none;" data-ad-unit="DAN-N67FrNrkAZWVwD7Y"
                        data-ad-width="250" data-ad-height="250"></ins>
                    <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
                </div>
            </div>

            <!-- 결과 보기 버튼 (처음에는 숨김) -->
            <button id="show-results-btn" class="show-results-btn" style="display: none;">결과 보기</button>
        </div>
    </div>

    <h1>미운 그놈 스탯 분석</h1>
    <div class="subtitle">직장편 - 결과</div>

    <!-- HTML 구조 순서 변경 - result.html의 result-container 내용 -->
    <div class="result-container">
        <!-- 보스 타이틀 -->
        <div class="boss-title-container fade-in">
            <div class="boss-title" id="boss-title">당신의 상사는...</div>
        </div>

        <!-- 광고 추가 -->
        <div class="ad-container fade-in delay-1" style="margin: 15px 0 20px 0;">
            <div class="ad-header">
                <span>추천</span>
            </div>
            <div class="ad-content">
                <ins class="kakao_ad_area" style="display:none;" data-ad-unit="DAN-5X6Wj7BhBXXCbkKJ" data-ad-width="320"
                    data-ad-height="100"></ins>
                <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
            </div>
        </div>

        <!-- 스탯 차트와 상사 이미지 (가로 배치) -->
        <div class="results-main-content">
            <div class="stats-container fade-in delay-1">
                <div class="stats-title">미운 능력치 분석</div>
                <div class="radar-chart-container">
                    <canvas id="statChart"></canvas>
                </div>
            </div>

            <div class="boss-image-container fade-in delay-1">
                <div class="boss-image" id="boss-image-placeholder">
                    상사 이미지 로딩중
                </div>

                <div class="bubble-container">
                    <div class="speech-bubble bubble-top-left fade-in delay-4" id="bubble-1"></div>
                    <div class="speech-bubble bubble-top-right fade-in delay-5" id="bubble-2"></div>
                    <div class="speech-bubble bubble-bottom-left fade-in delay-6" id="bubble-3"></div>
                    <div class="speech-bubble bubble-bottom-right fade-in delay-4" id="bubble-4"></div>
                </div>
            </div>
        </div>

        <!-- 보고서 컨테이너 위에 광고 추가 -->
        <div class="ad-container fade-in delay-2" style="margin-bottom: 20px;">
            <div class="ad-header">
                <span>추천</span>
            </div>
            <div class="ad-content">
                <ins class="kakao_ad_area" style="display:none;" data-ad-unit="DAN-nhDCAb32onY3vjki" data-ad-width="300"
                    data-ad-height="250"></ins>
                <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
            </div>
        </div>

        <!-- 상사 분석 보고서 -->
        <div class="report-container fade-in delay-2">
            <div class="report-header">
                <h3>상사 분석 보고서</h3>
            </div>
            <div class="report-body" id="boss-description">
                <!-- JavaScript에서 내용이 추가됩니다 -->
                상사를 분석 중입니다...
            </div>
        </div>

        <!-- 생존 난이도 섹션 -->
        <div class="difficulty-container fade-in delay-3">
            <div class="section-title">생존 난이도</div>
            <div class="difficulty-stars">
                <span class="star" id="star-1">★</span>
                <span class="star" id="star-2">★</span>
                <span class="star" id="star-3">★</span>
                <span class="star" id="star-4">★</span>
                <span class="star" id="star-5">★</span>
            </div>
            <div class="difficulty-gauge">
                <div class="gauge-fill" id="difficulty-gauge"></div>
                <div class="gauge-label" id="difficulty-label">순조로움 (0%)</div>
            </div>
            <p class="difficulty-description" id="difficulty-description">난이도 분석 중...</p>
        </div>

        <!-- 광고 추가 -->
        <div class="ad-container fade-in delay-3" style="margin: 20px 0;">
            <div class="ad-header">
                <span>추천</span>
            </div>
            <div class="ad-content">
                <ins class="kakao_ad_area" style="display:none;" data-ad-unit="DAN-Aaxy7z3wHXgQ6uCw" data-ad-width="320"
                    data-ad-height="100"></ins>
                <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
            </div>
        </div>

        <!-- 수정된 HTML 코드 -->
        <div class="psychology-section fade-in delay-4">
            <div class="section-title">그 놈은 왜 그럴까?</div>

            <div class="psychology-content">
                <div class="psychology-title" id="psychology-title">그 행동의 심리적 이유</div>
                <ul class="psychology-list" id="psychology-list">
                    <li>로딩 중...</li>
                </ul>
            </div>

            <!-- 모드 전환 토글을 섹션 하단으로 이동 -->
            <div class="mode-toggle">
                <button class="mode-button active" id="fun-mode">기본모드</button>
                <button class="mode-button" id="spicy-mode">심층분석</button>
            </div>
        </div>

        <!-- 광고 추가 -->
        <div class="ad-container fade-in delay-5" style="margin: 20px 0;">
            <div class="ad-header">
                <span>추천</span>
            </div>
            <div class="ad-content">
                <ins class="kakao_ad_area" style="display:none;" data-ad-unit="DAN-EWlz4jrVc7PZG46u" data-ad-width="300"
                    data-ad-height="250"></ins>
                <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
            </div>
        </div>
        <!-- <div class="psychological-prescription fade-in delay-4">
            <div class="section-title">당신의 빡침 포인트</div>
            <div class="prescription-title">당신을 위한 처방전</div>
            <ul class="prescription-list" id="tips-list">
                <li>로딩 중...</li>
            </ul>
        </div> -->
        <!-- <div class="survival-tips fade-in delay-4">
            <div class="section-title">생존 가이드</div>
            <div class="tips-title">이렇게 대처하세요</div>
            <ul class="tips-list" id="tips-list">
                <li>로딩 중...</li>
            </ul> -->

        <!-- <div class="positive-traits" id="positive-traits">
                <div class="positive-title">그래도 이런 점은 괜찮아요</div>
                <p id="positive-text">로딩 중...</p>
            </div> -->
        <!-- </div> -->

        <!-- 공유 섹션 -->
        <div class="share-section fade-in delay-5">
            <div class="share-title">친구에게 공유하기</div>
            <div class="share-buttons">
                <button class="share-button" id="kakao-share-btn" style="background-color: #FEE500; color: #000000;">🗨️
                    카카오톡</button>
                <button class="share-button" id="copy-link-btn">🔗 링크 복사</button>
                <button class="share-button" id="share-btn">📱 공유하기</button>
            </div>
        </div>

        <div class="back-to-test fade-in delay-6">
            <button class="back-button" id="back-btn">테스트 다시 하기</button>
        </div>

        <!-- 추가 광고 -->
        <div class="ad-container fade-in delay-6" style="margin-top: 20px;">
            <div class="ad-header">
                <span>추천</span>
            </div>
            <div class="ad-content">
                <ins class="kakao_ad_area" style="display:none;" data-ad-unit="DAN-2X72RkRl3ka675OA" data-ad-width="728"
                    data-ad-height="90"></ins>
                <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
            </div>
        </div>
    </div>

    <script>
        // 시드 기반 랜덤 함수
        function seededRandom(seed) {
            const x = Math.sin(seed) * 10000;
            return x - Math.floor(x);
        }

        // 시드 기반 배열 항목 선택
        function selectBasedOnSeed(array, seed) {
            const index = Math.floor(seededRandom(seed) * array.length);
            return array[index];
        }

        function getStatsFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            const stats = {};

            // 원본 스탯 저장 (보정 전 값, 일치도 계산용)
            window.originalStats = {};

            // 시드 값 가져오기
            const seedParam = urlParams.get('seed');
            if (seedParam) {
                window.resultSeed = parseInt(seedParam);
            } else {
                // 시드가 없으면 새로 생성
                window.resultSeed = Date.now();
            }

            // 새로운 스탯 순서 정의
            const statOrder = [
                '꼰대력', '내로남불', '갑질지수', '책임회피',
                '워라밸파괴', '무능력', '합리성'
            ];

            // stats 파라미터 값 가져오기
            const statsParam = urlParams.get('stats');

            if (statsParam) {
                // 쉼표로 구분된 값을 배열로 변환
                const statsValues = statsParam.split(',').map(val => parseInt(val));

                // 각 순서에 맞게 스탯 객체에 할당
                statOrder.forEach((stat, index) => {
                    if (index < statsValues.length) {
                        stats[stat] = isNaN(statsValues[index]) ? 0 : statsValues[index];
                        // 원본 스탯 저장 (일치도 계산용)
                        window.originalStats[stat] = stats[stat];
                    } else {
                        stats[stat] = 0;
                        window.originalStats[stat] = 0;
                    }
                });
            } else {
                // 개별 파라미터로 스탯 가져오기 (이전 버전과의 호환성 유지)
                statOrder.forEach(stat => {
                    const value = parseInt(urlParams.get(stat));
                    if (!isNaN(value)) {
                        stats[stat] = value;
                        window.originalStats[stat] = value;
                    } else {
                        stats[stat] = 0;
                        window.originalStats[stat] = 0;
                    }
                });
            }

            console.log("초기 스탯 값 (원본):", { ...window.originalStats });

            // 0점인 스탯들에 랜덤값 부여하고 보정값 평균 계산
            const zeroStats = [];
            const correctionValues = [];

            statOrder.forEach(stat => {
                // 합리성은 랜덤 값을 부여하지 않음 (그대로 0 유지)
                if (stat === '합리성') {
                    console.log(`스탯 ${stat}는 랜덤 값을 부여하지 않고 원래 값 ${stats[stat]} 유지`);
                    return; // 이 스탯은 처리 건너뜀
                }

                if (stats[stat] === 0 || stats[stat] === undefined) {
                    zeroStats.push(stat);
                    const specificSeed = window.resultSeed + stat.charCodeAt(0);
                    const randomValue = Math.floor(seededRandom(specificSeed) * 40) + 30; // 30~69 사이 랜덤값
                    stats[stat] = randomValue;
                    correctionValues.push(randomValue);
                    console.log(`스탯 ${stat}에 랜덤 값 ${randomValue} 부여됨`);
                }
            });

            // 보정값 평균 계산
            let avgCorrection = 0;
            if (correctionValues.length > 0) {
                avgCorrection = Math.round(correctionValues.reduce((sum, val) => sum + val, 0) / correctionValues.length);
                console.log(`0점 스탯에 부여된 보정값 평균: ${avgCorrection}`);
            } else {
                // 0점인 스탯이 없는 경우 기본 보정값 설정
                avgCorrection = 45; // 기본 보정값
                console.log(`0점 스탯이 없어 기본 보정값 ${avgCorrection} 사용`);
            }

            // 0점이 아닌 스탯들에도 평균 보정값 적용 (합리성 제외)
            statOrder.forEach(stat => {
                // 합리성은 보정값도 적용하지 않음
                if (stat === '합리성') {
                    console.log(`스탯 ${stat}는 보정값을 적용하지 않고 원래 값 ${stats[stat]} 유지`);
                    return; // 이 스탯은 처리 건너뜀
                }

                if (!zeroStats.includes(stat) && stats[stat] > 0) {
                    const originalValue = stats[stat];
                    stats[stat] += avgCorrection;
                    console.log(`스탯 ${stat}에 원래값 ${originalValue}에 평균 보정값 ${avgCorrection}을 더해 ${stats[stat]}로 조정됨`);
                }
            });

            console.log("최종 스탯 값 (보정 후):", stats);
            console.log("원본 스탯 값 (보정 전):", window.originalStats);
            return stats;
        }

        // 시드 기반 랜덤 함수
        function seededRandom(seed) {
            const x = Math.sin(seed) * 10000;
            return x - Math.floor(x);
        }

        // 전역 변수로 차트 인스턴스 저장
        let statChartInstance = null;
        let pageInitialized = false; // 중복 초기화 방지 플래그

        // 능력치 정의
        const statTypes = {
            '꼰대력': {
                color: '#8e44ad', description: '과거 방식을 고집하고 변화를 거부하는 정도',
                positive: '경험을 중요시하는 관점도 있어요',
                tips: ['스스로가 꼰대라는걸 인정한다며 꼰대짓을 마음껏 하고 있죠? 진짜 웃는 얼굴로 은근히 돌려깔때는 정강이를 까주고 싶죠.',
                    '"우리 때는 말이야~" 시작할 때마다 한숨이 나오죠. 그 입에서 나오는 모든 조언이 쓰레기통 직행감인건 아는데, 고개 끄덕이기 지치네요. 인생 선배는 개뿔.',
                    '동기들과 꼰대 상사 명언 빙고판 만들어보세요. 상사가 또 그 소리 시작할 때마다 빙고 체크하면 하루가 조금은 재밌어질 거예요. 고통적인 순간을 웃긴 순간으로 바꾸는 기술이죠!']
            },

            '내로남불': {
                color: '#e74c3c', description: '본인에게는 관대하고 타인에게는 엄격한 정도',
                positive: '때로는 자기 관리에 있어서는 유연한 면도 있어요',
                tips: ['본인 지각할 땐 교통체증, 내가 지각하면 시간 관념 부족이라고? 그 이중성에 치가 떨릴 때 있죠. 가끔은 그 모습 녹화해서 들이밀고 싶어요.',
                    '당신의 3분 지각은 세상 죄악인데, 그 양반의 30분 지각은 어쩔 수 없는 상황이랍니다. 진짜 저런 사람들 뇌구조가 궁금해요. 그 뻔뻔함을 배울 수 있다면 인생이 편해질 텐데.',
                    '내로남불 상사의 말도 안 되는 기준들을 몰래 기록해두세요. 퇴사할 때 "깨달음의 책"으로 동료들에게 남겨주는 것도 좋은 선물이 될 거예요. 웃픈 추억팔이지만 통쾌함이 있죠.']
            },

            '갑질지수': {
                color: '#c0392b', description: '권위적 태도로 압박하고 공격하는 정도',
                positive: '때로는 명확한 지시와 책임 소재가 분명한 편이에요',
                tips: ['또 시작된 갑질의 향연! "너랑 나랑 직읍이 같아?" 따위의 말 좀 그만했으면 좋겠어요. 그 작은 권력으로 사람 괴롭히는 모습이 참 한심하죠.',
                    '손가락으로 책상 두드리며 윽박지를 때마다 "저 손가락을 부러뜨리고 싶다"는 생각, 한 번쯤 해봤죠? 당연한 거예요. 갑질러는 언젠가 자기보다 더 쎈 갑을 만나게 되어 있어요. 그때 분명 크게 다칠거에요^^ (여러모로)',
                    '갑질 상사를 향한 분노 에너지를 운동으로 승화시켜보는건 어때요? 골프, 배드민턴, 테니스 등은 의사가 권장하는 스트레스 해소법입니다! 스트레스도 풀리고 살도 빼보자구요. 그놈의 처벌은 언젠가 나타날 더 쎈 갑이 해줄거에요.']
            },

            '책임회피': {
                color: '#f39c12', description: '실패와 문제를 타인에게 전가하는 정도',
                positive: '위기 상황에서 냉정함을 유지하는 편이에요',
                tips: ['또 누군가를 희생양 삼아 자신은 발 빼고 있죠? "내가 언제 그랬어?" 하는 표정으로 모른 척할 때는 정말 이마를 치고 싶어져요.',
                    '성공할 땐 자기 공이고 실패하면 팀원 탓이라는 이 마법 같은 논리. 저런 사람들이 잘 사는 걸 보면 진짜 세상이 공평한지 의심스러워요. 본인도 자신이 한심한 사람이란걸 알까?',
                    '책임 회피 상사의 말은 반드시 녹음하거나 이메일로 남겨두세요. 거짓말을 밥먹듯이 하는 사람들은 확실한 증거와 논리 앞에 무너지게 되어있거든요!']
            },

            '워라밸파괴': {
                color: '#d35400', description: '개인 시간을 존중하지 않고 침해하는 정도',
                positive: '업무에 대한 열정과 헌신이 있어요',
                tips: ['한번 회의했다 하면 1~2시간은 기본이고, 퇴근시간이 얼마 안남았을때 "잠시만 볼까?" 라는 말부터 시작된 대화는 남들 다 퇴근하는데도 계속 듣고있어야 돼요.',
                    '그러다 가끔은 "밥먹고와서 마저 이야기하자~"" 라는 콤보로 이어질때면, 속에서 아주 큰 스트레스가 생기고 머리도 지끈거리고 해요. 그사람과 야근하며 둘이 밥먹을 바에야 집에서 물에 밥을 말아먹는게 낫죠.',
                    '이놈을 위해서 항상 변명으로 말할 퇴근후 일정을 생각해두세요! 물어보면 바로바로 단호하게 거절할 수 있도록 말이죠. 그리고 가끔씩 이놈과 야근을 해야할때면 아주 새벽까지 일을 하자고 압박주세요! 질리도록 만들어야 합니다.']
            },

            '무능력': {
                color: '#7f8c8d', description: '실무능력과 판단력이 부족한 정도',
                positive: '때로는 팀원들에게 주도권을 주는 편이에요',
                tips: ['중요한 결정을 내려야 할 때마다 "음... 좀 더 검토해볼게"라고 하는 모습에 속으로 "그냥 결정 좀 해줘!"라고 외치게 되죠. 답답함이 극에 달해요.',
                    '실무는 1도 모르면서 높은 자리 차지하고 있는 그 모습, 정말 신기하죠? 어떻게 저기까지 올라갔는지 미스터리예요. 도대체 어떤 처세술이 있길래 저럴수 있나 경이롭기까지 해요.',
                    '하지만 잠시 생각해보면 팀원들과는 더욱 끈끈하지 않나요? 무능한 상사가 있으면 오히려 팀원들끼리 더 끈끈해집니다. "저 분 빼고 우리끼리 해결하자"는 공감대가 형성되거든요. 상사 뒷담을 통한 스트레스 해소는 덤이죠.']
            },

            '합리성': {
                color: '#2ecc71', description: '공정하고 합리적인 사고를 하는 정도',
                positive: '논리적이고 공정한 판단을 내리려고 노력해요',
                tips: ['합리적으로 말하고 행동하는것 같지만 정작 본인의 마음에 들지 않을 때에는 손바닥 뒤집듯이 상황을 뒤집어 버리지 않나요? 그때부터는 나와의 의사소통 시도 자체가 가식적으로 보여지죠.',
                    '하지만 평소에는 얼핏 논리에 맞는 말들을 하며 압박해오기 때문에 상대하기가 가장 까다롭죠. 논리로 이기고나서는 그 사람의 비논리적인 부분까지 지적하고 설득해야하기 때문이에요.',
                    '이런 상사를 다루는 비법은 그들의 무기를 역이용하는 것입니다. 모든 대화를 녹음하거나 기록해두고, 나중에 그들이 비합리적으로 행동할 때 과거의 말을 그대로 인용해보세요. "지난번에 말씀하신 원칙에 따르면..."이라고 시작하면 적어도 잠시는 당황할 겁니다. 작은 승리지만 당신의 정신 건강을 지키는 데 도움이 될 거예요.']
            }
        };

        // // URL에서 능력치 결과 가져오기
        // function getStatsFromURL() {
        //     const urlParams = new URLSearchParams(window.location.search);
        //     const stats = {};

        //     // 한글 파라미터 이름을 직접 사용
        //     Object.keys(statTypes).forEach(stat => {
        //         const value = parseInt(urlParams.get(stat));
        //         stats[stat] = isNaN(value) ? 0 : value;
        //     });

        //     return stats;
        // }

        // 2. 개선된 createRadarChart 함수 (고정 순서 + 스케일링 조정)
        function createRadarChart(stats) {
            const canvas = document.getElementById('statChart');
            const ctx = canvas.getContext('2d');

            // 기존 차트가 있으면 파괴
            if (statChartInstance) {
                statChartInstance.destroy();
                statChartInstance = null;
            }

            // 고정된 스탯 순서 정의
            const statOrder = [
                '꼰대력', '내로남불', '갑질지수', '책임회피',
                '워라밸파괴', '무능력'
            ];

            // 합리성을 제외한 고정 순서의 스탯 데이터 준비
            const statEntries = statOrder.map(stat => [stat, stats[stat] || 0]);
            console.log("차트용 스탯 (고정 순서):", statEntries);

            // 최대값 확인
            const originalValues = statEntries.map(([, value]) => value);
            const maxValue = Math.max(...originalValues, 1);

            // 스케일링 로직 조정 - 최대값이 70 미만일 때만 약한 스케일링 적용
            // 70 이상이면 거의 그대로 표시, 70 미만이면 약하게 스케일링
            const scaleFactor = maxValue < 70 ? (70 / maxValue) * 0.8 : 1;
            console.log("최대값:", maxValue, "스케일 팩터:", scaleFactor);

            // 스케일 조정된 값 (최대 100)
            const scaledValues = originalValues.map(value =>
                Math.min(Math.round(value * scaleFactor), 100)
            );

            console.log("원본 값:", originalValues);
            console.log("스케일 조정된 값:", scaledValues);

            // 데이터 준비
            const statNames = statEntries.map(([stat]) => stat);

            // 각 능력치별 색상 준비
            const defaultColor = '#999999';
            const backgroundColors = statNames.map(stat =>
                (statTypes[stat] ? statTypes[stat].color + '40' : defaultColor + '40')
            );
            const borderColors = statNames.map(stat =>
                (statTypes[stat] ? statTypes[stat].color : defaultColor)
            );

            try {
                // 차트 생성
                statChartInstance = new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: statNames,
                        datasets: [{
                            label: '미운 능력치',
                            data: scaledValues,
                            backgroundColor: 'rgba(255, 99, 132, 0.3)',
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderWidth: 2,
                            pointBackgroundColor: borderColors,
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: borderColors
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            r: {
                                angleLines: {
                                    display: true
                                },
                                suggestedMin: 0,
                                // 최대 스케일을 100으로 고정
                                suggestedMax: 100,
                                ticks: {
                                    display: false,
                                    stepSize: 20,
                                    font: {
                                        size: 12
                                    }
                                },
                                pointLabels: {
                                    font: {
                                        size: 14,
                                        weight: 'bold'
                                    }
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: true,
                                position: 'top',
                                labels: {
                                    font: {
                                        size: 14
                                    }
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function (context) {
                                        const index = context.dataIndex;
                                        const stat = statNames[index];
                                        const originalValue = originalValues[index];
                                        return `${stat}: ${originalValue}`;
                                    }
                                }
                            }
                        }
                    }
                });

                console.log("차트 생성 성공");

                // 상위 스탯 계산 (말풍선용) - 점수 기준 정렬 
                const topStatsForBubbles = [...statEntries].sort((a, b) => b[1] - a[1]).slice(0, 4);
                console.log("말풍선용 상위 스탯:", topStatsForBubbles);

                return {
                    topStats: topStatsForBubbles
                };
            } catch (error) {
                console.error("차트 생성 오류:", error);
                const container = document.querySelector('.radar-chart-container');
                container.innerHTML = '<div style="text-align: center; padding: 20px; color: #d9534f;">차트를 표시할 수 없습니다. 브라우저를 새로고침하거나 다른 브라우저로 시도해보세요.</div>';
                return { topStats: [] };
            }
        }

        // 말풍선 내용 설정 함수 개선
        function setRandomBubbles(topStats) {
            const bubbles = [
                document.getElementById('bubble-1'),
                document.getElementById('bubble-2'),
                document.getElementById('bubble-3'),
                document.getElementById('bubble-4')
            ];

            // 개선된 말풍선 내용 (보다 현실적이고 공감되는 내용)
            const bubbleContents = {
                '꼰대력': [
                    '요즘 애들은 기본이 안 돼 있어',
                    '내가 너희 나이 때는...',
                    '경험에서 우러나오는 조언이야',
                    '이건 예의가 아니지'
                ],
                '내로남불': [
                    '내 상황은 좀 특별해서...',
                    '난 바빠서 어쩔 수 없었어',
                    '직급이 다르니 상황도 달라',
                    '너는 내 입장을 몰라'
                ],
                '갑질지수': [
                    '내가 누군지 알아?',
                    '이건 네 업무 범위야',
                    '왜 이렇게 시간이 걸려?',
                    '그냥 시키는 대로 해'
                ],
                '책임회피': [
                    '이건 네가 담당한 부분이잖아',
                    '난 그렇게 지시한 적 없어',
                    '다른 팀에 물어봐',
                    '윗선에서 그렇게 하래'
                ],
                '워라밸파괴': [
                    '주말에 잠깐만 와줄래?',
                    '퇴근 전에 이것만 끝내자',
                    '휴가 중에 메일 확인해?',
                    '긴급한 건데 지금 봐줘'
                ],
                '무능력': [
                    '이건 네가 더 잘 알잖아',
                    '어떻게 하는 게 좋을까?',
                    '그냥 이전처럼 해',
                    '한 번 더 검토해볼게'
                ],
                '합리성': [
                    '객관적으로 생각해보자',
                    '데이터를 확인해봤니?',
                    '다양한 관점에서 보자',
                    '합리적인 절차를 따르자'
                ]
            };

            // 말풍선 CSS 개선
            for (let i = 0; i < bubbles.length; i++) {
                if (bubbles[i]) {
                    // 말풍선 스타일 개선
                    bubbles[i].style.boxShadow = '0 3px 10px rgba(0, 0, 0, 0.15)';
                    bubbles[i].style.fontWeight = '500';
                    bubbles[i].style.fontSize = '13px';
                    bubbles[i].style.border = '1px solid rgba(0, 0, 0, 0.1)';

                    // 말풍선 위치 랜덤화 (약간의 변동 추가)
                    const variationX = Math.floor(seededRandom(window.resultSeed + i * 100) * 20) - 10;
                    const variationY = Math.floor(seededRandom(window.resultSeed + i * 200) * 20) - 10;

                    // 현재 위치에서 약간의 변동 추가
                    const currentStyle = window.getComputedStyle(bubbles[i]);
                    const currentTop = parseInt(currentStyle.top) || 0;
                    const currentLeft = parseInt(currentStyle.left) || 0;
                    const currentRight = parseInt(currentStyle.right) || 0;
                    const currentBottom = parseInt(currentStyle.bottom) || 0;

                    // 위치에 따라 다른 속성 조정
                    if (bubbles[i].classList.contains('bubble-top-left')) {
                        bubbles[i].style.top = (currentTop + variationY) + 'px';
                        bubbles[i].style.left = (currentLeft + variationX) + 'px';
                    } else if (bubbles[i].classList.contains('bubble-top-right')) {
                        bubbles[i].style.top = (currentTop + variationY) + 'px';
                        bubbles[i].style.right = (currentRight - variationX) + 'px';
                    } else if (bubbles[i].classList.contains('bubble-bottom-left')) {
                        bubbles[i].style.bottom = (currentBottom - variationY) + 'px';
                        bubbles[i].style.left = (currentLeft + variationX) + 'px';
                    } else if (bubbles[i].classList.contains('bubble-bottom-right')) {
                        bubbles[i].style.bottom = (currentBottom - variationY) + 'px';
                        bubbles[i].style.right = (currentRight - variationX) + 'px';
                    }
                }
            }

            // 상위 4개 능력치에 대한 말풍선 내용 설정
            for (let i = 0; i < Math.min(topStats.length, bubbles.length); i++) {
                if (!topStats[i] || !topStats[i][0] || !bubbles[i]) continue; // 배열 범위 체크

                const stat = topStats[i][0];
                const contents = bubbleContents[stat];

                if (!contents || contents.length === 0) {
                    bubbles[i].textContent = "..."; // 기본 텍스트 설정
                    continue;
                }

                // 시드 기반 선택 (오류 방지를 위해 예외 처리 추가)
                try {
                    const specificSeed = (window.resultSeed || 12345) + (i * 500) + stat.charCodeAt(0);
                    const index = Math.floor(Math.abs(Math.sin(specificSeed) * 10000) % contents.length);
                    const randomContent = contents[index];

                    bubbles[i].textContent = randomContent;

                    // 스타일 적용 (statTypes가 정의되어 있는지 확인)
                    if (statTypes && statTypes[stat] && statTypes[stat].color) {
                        const baseColor = statTypes[stat].color;

                        // 더 진한 배경색 사용 (40% → 20% 투명도)
                        bubbles[i].style.backgroundColor = baseColor + '20';
                        bubbles[i].style.borderColor = baseColor + '40';

                        // 말풍선 꼬리 부분도 색상 적용
                        const afterElement = document.createElement('style');
                        afterElement.textContent = `
                    #${bubbles[i].id}::after {
                        background-color: ${baseColor}20 !important;
                        border: 1px solid ${baseColor}40 !important;
                    }
                `;
                        document.head.appendChild(afterElement);
                    }
                } catch (error) {
                    console.error(`말풍선 ${i} 설정 오류:`, error);
                    bubbles[i].textContent = "..."; // 오류 시 기본 텍스트
                }
            }
        }

        function setupResponsiveBubbles() {
            // 화면 너비에 따라 말풍선 표시 방식 변경
            const checkScreenSize = function () {
                const bubbleContainer = document.querySelector('.bubble-container');
                const bossImageContainer = document.querySelector('.boss-image-container');
                const isMobile = window.innerWidth <= 768; // 모바일 기준점 (CSS의 미디어 쿼리와 동일하게 유지)

                if (isMobile) {
                    // 모바일 화면에서는 말풍선을 이미지 아래 텍스트 목록으로 변환
                    if (bubbleContainer && !document.querySelector('.mobile-bubbles')) {
                        const bubbles = bubbleContainer.querySelectorAll('.speech-bubble');

                        // 기존 말풍선 숨기기
                        bubbles.forEach(bubble => {
                            bubble.style.display = 'none';
                        });

                        // 모바일용 텍스트 목록 생성
                        const mobileBubblesList = document.createElement('div');
                        mobileBubblesList.className = 'mobile-bubbles';
                        mobileBubblesList.style.cssText = `
                    margin-top: 20px; 
                    padding: 15px;
                    background-color: #f8f9fa;
                    border-radius: 8px;
                    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
                `;

                        const mobileBubblesTitle = document.createElement('div');
                        mobileBubblesTitle.textContent = '상사의 대표 발언';
                        mobileBubblesTitle.style.cssText = `
                    text-align: center;
                    font-weight: bold;
                    margin-bottom: 10px;
                    color: #333;
                    font-size: 16px;
                `;
                        mobileBubblesList.appendChild(mobileBubblesTitle);

                        // 말풍선 내용을 목록으로 변환
                        bubbles.forEach((bubble, index) => {
                            if (bubble.textContent.trim()) {
                                const listItem = document.createElement('div');
                                listItem.className = 'mobile-bubble-item';
                                listItem.style.cssText = `
                            padding: 10px;
                            margin-bottom: 8px;
                            background-color: white;
                            border-radius: 8px;
                            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
                            position: relative;
                            padding-left: 25px;
                        `;

                                // 인용 아이콘 추가
                                const quoteIcon = document.createElement('span');
                                quoteIcon.innerHTML = '❝';
                                quoteIcon.style.cssText = `
                            position: absolute;
                            left: 8px;
                            top: 8px;
                            font-size: 18px;
                            color: #d9534f;
                        `;
                                listItem.appendChild(quoteIcon);

                                // 말풍선 텍스트 추가
                                const textSpan = document.createElement('span');
                                textSpan.textContent = bubble.textContent;
                                listItem.appendChild(textSpan);

                                mobileBubblesList.appendChild(listItem);
                            }
                        });

                        // 이미지 컨테이너 아래에 목록 추가
                        bossImageContainer.after(mobileBubblesList);
                    }
                } else {
                    // 데스크톱 화면에서는 원래 말풍선 표시하고 목록 제거
                    const mobileBubbles = document.querySelector('.mobile-bubbles');
                    if (mobileBubbles) {
                        mobileBubbles.remove();
                    }

                    const bubbles = bubbleContainer.querySelectorAll('.speech-bubble');
                    bubbles.forEach(bubble => {
                        bubble.style.display = 'block';
                    });
                }
            };

            // 초기 실행
            checkScreenSize();

            // 화면 크기 변경 시 다시 실행
            window.addEventListener('resize', checkScreenSize);
        }

        // 상사 유형에 따른 이미지 표시 함수
        function setBossImage(bossType, baseType) {
            const imagePlaceholder = document.getElementById('boss-image-placeholder');

            // 상사 유형별 이미지 경로 설정
            let imagePath = "";

            switch (baseType) {
                // 단일 핵심 유형
                case '구시대의 꼰대 보스':
                    imagePath = "images/boss_old_school.png";
                    break;
                case '황제형 내로남불 보스':
                    imagePath = "images/boss_emperor.png";
                    break;
                case '권위형 갑질 보스':
                    imagePath = "images/boss_threatening.png";
                    break;
                case '책임회피형 보스':
                    imagePath = "images/boss_manipulator.png"; // 다시 생성
                    break;
                case '노예사냥꾼 보스':
                    imagePath = "images/boss_slave_hunter.png";
                    break;
                case '무능력형 혼돈 보스':
                    imagePath = "images/boss_incompetent.png";
                    break;

                // 복합형/악몽형
                case '복합형 악몽 보스':
                    imagePath = "images/Composite_Nightmare_Boss.png";
                    break;
                case '권위주의형 복합 보스':
                    imagePath = "images/Authoritarian_Composite_Boss.png";
                    break;
                case '노동착취형 복합 보스':
                    imagePath = "images/Labor_Exploitation_Composite_Boss.png";
                    break;
                case '무책임형 복합 보스':
                    imagePath = "images/Irresponsible_Composite_Boss.png";
                    break;
                case '꼰대황제형 복합 보스':
                    imagePath = "images/Old_Fashioned_Emperor_Composite_Boss.png";
                    break;
                case '이중 스트레스형 복합 보스':
                    imagePath = "images/Dual_Stress_Composite_Boss.png";
                    break;

                // 기타 유형
                case '약한 스트레스형 보스':
                    imagePath = "images/boss_mild_stress.png";
                    break;
                case '합리적 평범 보스':
                    imagePath = "images/boss_normal.png";
                    break;
                case '무난한 일상형 보스':
                    imagePath = "images/boss_ordinary.png";
                    break;
                default:
                    imagePath = "images/boss_default.png";
                    break;
            }

            // 이미지가 존재하는지 확인 (선택적)
            const img = new Image();
            img.onload = function () {
                // 이미지가 로드되면 플레이스홀더를 교체
                imagePlaceholder.innerHTML = '';
                imagePlaceholder.style.background = 'none';
                imagePlaceholder.style.border = 'none';
                imagePlaceholder.appendChild(img);
            };

            img.onerror = function () {
                // 이미지 로드 실패 시 기본 이미지나 메시지 표시
                console.error("이미지를 찾을 수 없습니다: " + imagePath);
                imagePlaceholder.innerHTML = '이미지를 찾을 수 없습니다';
            };

            // 이미지 스타일 설정
            img.src = imagePath;
            img.alt = bossType;
            img.style.maxWidth = '100%';
            img.style.maxHeight = '100%';
            img.style.objectFit = 'contain';
        }

        // 스탯별 형용사 정의
        const statAdjectives = {
            '꼰대력': '꼰대스러운',
            '내로남불': '이중적인',
            '갑질지수': '권위적인',
            '책임회피': '책임감 없는',
            '워라밸파괴': '착취하는',
            '무능력': '무능력한',
            '합리성': '합리적인'
        };

        // 스탯별 명사 정의
        const statNouns = {
            '꼰대력': '꼰대',
            '내로남불': '특권자',
            '갑질지수': '압박자',
            '책임회피': '회피자',
            '워라밸파괴': '노예사냥꾼',
            '무능력': '무책임자',
            '합리성': '현실주의자'
        };

        // 이상적 보스 프로필 정의
        const idealBossProfiles = {
            // 단일 핵심 유형
            '구시대의 꼰대 보스': { '꼰대력': 45, '내로남불': 25, '갑질지수': 15, '책임회피': 10, '워라밸파괴': 20, '무능력': 15, '합리성': 10 },
            '황제형 내로남불 보스': { '꼰대력': 20, '내로남불': 45, '갑질지수': 25, '책임회피': 30, '워라밸파괴': 15, '무능력': 15, '합리성': 10 },
            '권위형 갑질 보스': { '꼰대력': 25, '내로남불': 30, '갑질지수': 45, '책임회피': 15, '워라밸파괴': 25, '무능력': 10, '합리성': 10 },
            '책임회피형 보스': { '꼰대력': 15, '내로남불': 25, '갑질지수': 15, '책임회피': 45, '워라밸파괴': 15, '무능력': 30, '합리성': 10 },
            '노예사냥꾼 보스': { '꼰대력': 20, '내로남불': 15, '갑질지수': 25, '책임회피': 15, '워라밸파괴': 45, '무능력': 10, '합리성': 10 },
            '무능력형 혼돈 보스': { '꼰대력': 15, '내로남불': 20, '갑질지수': 15, '책임회피': 30, '워라밸파괴': 15, '무능력': 45, '합리성': 5 },

            // 복합형
            '복합형 악몽 보스': { '꼰대력': 40, '내로남불': 40, '갑질지수': 40, '책임회피': 35, '워라밸파괴': 40, '무능력': 35, '합리성': 0 },
            '권위주의형 복합 보스': { '꼰대력': 40, '내로남불': 25, '갑질지수': 40, '책임회피': 15, '워라밸파괴': 30, '무능력': 15, '합리성': 5 },
            '노동착취형 복합 보스': { '꼰대력': 20, '내로남불': 25, '갑질지수': 35, '책임회피': 15, '워라밸파괴': 45, '무능력': 10, '합리성': 5 },
            '무책임형 복합 보스': { '꼰대력': 15, '내로남불': 25, '갑질지수': 15, '책임회피': 45, '워라밸파괴': 20, '무능력': 40, '합리성': 5 },
            '꼰대황제형 복합 보스': { '꼰대력': 40, '내로남불': 40, '갑질지수': 25, '책임회피': 20, '워라밸파괴': 25, '무능력': 10, '합리성': 5 },
            '이중 스트레스형 복합 보스': { '꼰대력': 35, '내로남불': 35, '갑질지수': 35, '책임회피': 30, '워라밸파괴': 35, '무능력': 25, '합리성': 5 },

            // 기타 유형
            '약한 스트레스형 보스': { '꼰대력': 25, '내로남불': 25, '갑질지수': 25, '책임회피': 25, '워라밸파괴': 25, '무능력': 25, '합리성': 15 },
            '합리적 평범 보스': { '꼰대력': 15, '내로남불': 15, '갑질지수': 10, '책임회피': 10, '워라밸파괴': 15, '무능력': 15, '합리성': 40 },
            '무난한 일상형 보스': { '꼰대력': 20, '내로남불': 15, '갑질지수': 15, '책임회피': 15, '워라밸파괴': 20, '무능력': 20, '합리성': 25 }
        };

        // 특수 조합 유형 정의 (선택사항 - 좀 더 다양한 유형 커버를 위함)
        const specialCombinations = {
            '꼰대력-갑질지수': { type: '권위주의형 복합 보스', noun: '독재자' },
            '워라밸파괴-갑질지수': { type: '노동착취형 복합 보스', noun: '착취자' },
            '책임회피-무능력': { type: '무책임형 복합 보스', noun: '무책임자' },
            '꼰대력-내로남불': { type: '꼰대황제형 복합 보스', noun: '독선자' }
        };

        // 코사인 유사도 계산 함수
        function calculateCosineSimilarity(userStats, idealProfile) {
            let dotProduct = 0;
            let normA = 0;
            let normB = 0;

            // 모든 스탯에 대해 계산
            for (const stat in userStats) {
                if (idealProfile.hasOwnProperty(stat)) {
                    dotProduct += userStats[stat] * idealProfile[stat];
                    normA += userStats[stat] * userStats[stat];
                    normB += idealProfile[stat] * idealProfile[stat];
                }
            }

            normA = Math.sqrt(normA);
            normB = Math.sqrt(normB);

            // 0으로 나누기 방지
            if (normA === 0 || normB === 0) {
                return 0;
            }

            return dotProduct / (normA * normB);
        }

        function analyzeBossType(stats) {
            // 원본 스탯 가져오기 (보정 전 값으로 일치도 계산)
            const originalStats = window.originalStats || stats;
            console.log("일치도 계산에 사용할 원본 스탯:", originalStats);

            // 상위 2개 스탯 추출 (합리성 제외)
            const topStats = Object.entries(stats)
                .filter(([stat]) => stat !== '합리성')
                .sort((a, b) => b[1] - a[1])
                .slice(0, 2);

            const primaryStat = topStats[0][0];
            const primaryValue = topStats[0][1];
            const secondaryStat = topStats[1][0];
            const secondaryValue = topStats[1][1];

            // 합리성 점수
            const rationalityScore = stats['합리성'] || 0;

            // 각 보스 유형에 대한 유사도 계산 (원본 스탯 사용)
            const similarities = [];

            for (const [profileName, profile] of Object.entries(idealBossProfiles)) {
                const similarity = calculateCosineSimilarity(originalStats, profile);
                similarities.push({
                    type: profileName,
                    similarity: similarity
                });
            }

            // 유사도가 가장 높은 보스 유형 찾기
            similarities.sort((a, b) => b.similarity - a.similarity);
            const closestBossType = similarities[0].type;
            const similarityScore = similarities[0].similarity;

            console.log("유사도 계산 결과:", similarities.slice(0, 3));
            console.log("가장 높은 유사도:", similarityScore, "보스 유형:", closestBossType);

            // 강도 결정 (원본 스탯 기반 유사도 활용)
            let intensityLevel = '';
            let difficultyLevel = 0;

            if (similarityScore >= 0.70) {        // 0.85에서 0.70으로 조정
                intensityLevel = '극한의';
                difficultyLevel = Math.min(5.0, getBaseDifficultyForType(closestBossType) + 0.5);
            } else if (similarityScore >= 0.55) {  // 0.70에서 0.55로 조정
                intensityLevel = '상당한';
                difficultyLevel = getBaseDifficultyForType(closestBossType);
            } else {
                intensityLevel = '미약한';
                difficultyLevel = Math.max(1.5, getBaseDifficultyForType(closestBossType) - 0.5);
            }

            // 합리성 점수에 따른 난이도 조정 (새 규칙)
            if (rationalityScore <= 20) {
                // 합리성이 20점 이하면 난이도 +1점 (최대 5.0)
                difficultyLevel = Math.min(5.0, difficultyLevel + 1.0);
                console.log(`합리성 점수(${rationalityScore})가 20 이하로 난이도 +1 적용: ${difficultyLevel}`);
            } else {
                // 합리성이 20점 초과면 난이도 -1점 (최소 1.0)
                difficultyLevel = Math.max(1.0, difficultyLevel - 1.0);
                console.log(`합리성 점수(${rationalityScore})가 20 초과로 난이도 -1 적용: ${difficultyLevel}`);
            }

            // 여기서부터 수정 - 합리성 점수에 따른 보스 타이틀 결정
            let bossTitle = '';

            // 부정적 스탯의 평균 계산 (합리성 제외)
            const negativeStatsAvg = Object.entries(stats)
                .filter(([stat]) => stat !== '합리성')
                .reduce((sum, [, value]) => sum + value, 0) /
                (Object.keys(stats).length - 1);

            console.log("부정적 스탯 평균:", negativeStatsAvg, "합리성 점수:", rationalityScore);

            // 합리성 점수가 높고 다른 부정적 스탯이 낮을 경우 긍정적 타이틀 사용
            if (rationalityScore > 60) {
                // 합리성이 매우 높고 부정적 스탯이 낮은 경우 (완전 긍정적)
                if (rationalityScore > 70 && negativeStatsAvg < 50) {
                    const positiveTitles = [
                        '균형 잡힌 리더',
                        '공정한 관리자',
                        '소통하는 멘토',
                        '신뢰받는 조언자',
                        '합리적인 동반자'
                    ];

                    // 시드 기반 타이틀 선택
                    const titleIndex = Math.floor(seededRandom(window.resultSeed + 12345) * positiveTitles.length);
                    bossTitle = positiveTitles[titleIndex] + ' 보스';
                }
                // 합리성이 높지만 부정적 스탯도 어느 정도 있는 경우 (중립적)
                else if (negativeStatsAvg < 70) {
                    // 중립적 형용사 추가
                    const neutralAdjectives = [
                        '균형적인',
                        '소통하는',
                        '공정한',
                        '합리적인',
                        '이해심 있는'
                    ];

                    // 중립적 명사 추가
                    const neutralNouns = {
                        '꼰대력': '전통주의자',
                        '내로남불': '규칙 관리자',
                        '갑질지수': '체계적 리더',
                        '책임회피': '위임하는 관리자',
                        '워라밸파괴': '열정적 리더',
                        '무능력': '위임형 관리자'
                    };

                    // 시드 기반 형용사 선택
                    const adjIndex = Math.floor(seededRandom(window.resultSeed + 67890) * neutralAdjectives.length);
                    const selectedAdj = neutralAdjectives[adjIndex];

                    // 주요 스탯에 따른 중립적 명사 선택
                    const selectedNoun = neutralNouns[primaryStat] || statNouns[primaryStat];

                    bossTitle = `${selectedAdj} ${selectedNoun} 보스`;
                }
                // 합리성이 높지만 부정적 스탯도 높은 경우 (복합적)
                else {
                    // 완화된 형용사 사용
                    const primaryAdjective = statAdjectives[primaryStat] || '';
                    const secondaryNoun = statNouns[secondaryStat] || '';

                    // 특수 조합 확인
                    const combinationKey = [primaryStat, secondaryStat].sort().join('-');

                    if (specialCombinations[combinationKey]) {
                        const combo = specialCombinations[combinationKey];
                        bossTitle = `합리적이지만 ${primaryAdjective} ${combo.noun} 보스`;
                    } else {
                        bossTitle = `합리적이지만 ${primaryAdjective} ${secondaryNoun} 보스`;
                    }
                }
            }
            // 합리성이 낮은 경우 - 기존 로직 유지
            else {
                // 형용사 + 명사 조합 보스 이름 생성
                const primaryAdjective = statAdjectives[primaryStat] || '';
                const secondaryNoun = statNouns[secondaryStat] || '';

                // 특수 조합 확인
                const combinationKey = [primaryStat, secondaryStat].sort().join('-');

                if (specialCombinations[combinationKey]) {
                    const combo = specialCombinations[combinationKey];
                    bossTitle = `${intensityLevel} ${primaryAdjective} ${combo.noun}`;
                } else {
                    bossTitle = `${intensityLevel} ${primaryAdjective} ${secondaryNoun}`;
                }

                // 최종 보스 제목에 '보스' 추가
                bossTitle = `${bossTitle} 보스`;
            }

            console.log("최종 보스 타이틀:", bossTitle);
            console.log("난이도 레벨:", difficultyLevel);

            return {
                title: bossTitle,
                baseType: closestBossType,
                difficultyLevel: difficultyLevel,
                topStats: topStats,
                similarity: similarityScore
            };
        }

        // 보스 유형별 기본 난이도 가져오기
        function getBaseDifficultyForType(bossType) {
            const difficultyMap = {
                '구시대의 꼰대 보스': 3.5,
                '황제형 내로남불 보스': 4.0,
                '권위형 갑질 보스': 4.5,
                '책임회피형 보스': 3.5,
                '노예사냥꾼 보스': 4.5,
                '무능력형 혼돈 보스': 3.0,
                '복합형 악몽 보스': 5.0,
                '권위주의형 복합 보스': 4.5,
                '노동착취형 복합 보스': 4.5,
                '무책임형 복합 보스': 4.0,
                '꼰대황제형 복합 보스': 4.3,
                '이중 스트레스형 복합 보스': 4.0,
                '약한 스트레스형 보스': 3.0,
                '합리적 평범 보스': 2.0,
                '무난한 일상형 보스': 1.5
            };

            return difficultyMap[bossType] || 3.0; // 기본값은 3.0
        }

        function displayBossDescription(bossType, baseType) {
            const descriptionElement = document.getElementById('boss-description');
            let descriptionHTML = '';

            // 툴팁 정의 - 어려운 단어에 대한 설명
            const tooltips = {
                '금과옥조': '매우 소중하게 여기는 규칙이나 교훈을 의미합니다. 원래는 금으로 만든 거북이와 옥으로 만든 책이라는 뜻으로, 귀중한 보물을 의미했습니다.',
                '내로남불': '내가 하면 로맨스, 남이 하면 불륜의 줄임말로, 자신에게는 관대하고 타인에게는 엄격한 이중 잣대를 의미합니다.',
                '갑질': '우월적 지위나 권력을 이용해 다른 사람에게 부당한 요구나 행동을 하는 것을 의미합니다.',
                '워라밸': '일(Work)과 생활(Life)의 균형(Balance)을 의미하는 말로, 일과 개인 생활 사이의 건강한 균형을 뜻합니다.',
            };

            // 툴팁을 적용하는 함수
            function applyTooltips(text) {
                let processedText = text;

                // 각 툴팁 단어에 대해 처리
                Object.keys(tooltips).forEach(word => {
                    // 정규식으로 단어 찾기 (단어 경계 고려)
                    const regex = new RegExp(`(${word})`, 'g');
                    // 툴팁 HTML로 교체
                    processedText = processedText.replace(regex, `<span class="tooltip-word" data-tooltip="${tooltips[word]}">$1</span>`);
                });

                return processedText;
            }

            // 실제 baseType 값 확인 (전달된 baseType이 없는 경우 bossType 사용)
            const actualType = baseType || bossType;

            // 보스 유형에 따라 다른 상세 설명 제공
            switch (actualType) {
                case '구시대의 꼰대 보스':
                    descriptionHTML = `
                <div class="report-section">
                    <p>당신의 상사는 <span class="highlight">시대에 뒤떨어진 사고방식을 금과옥조처럼 모시는</span> 진성 꼰대입니다. '예전에는 말이야~'로 시작하는 멘트가 나오면 귀를 꽉 막고 싶은 충동이 들 겁니다.</p>
                </div>

                <div class="report-section">
                    <p>점심 먹으러 가는데도 <span class="quote">"상사가 먼저 숟가락 들면 먹어야지" 혹은 "무조건 팀원 다 같이 밥먹어야돼"</span>라며 나의 편안한 점심시간을 빼앗습니다. 당신이 정시 퇴근하면 <span class="quote">"벌써 퇴근? 진행하던 일은 다했어?"</span>라며 눈치를 줍니다. 애초에 오늘까지 다 못할 일인걸 알면서도 그런말이 나와?</p>
                </div>

                <div class="report-section">
                    <p>새로운 업무 방식을 제안하면 <span class="quote">"그래서 우리가 지금까지 해온 방식이 틀렸다는 거야?"</span>라며 방어적 태도로 일관합니다. 혁신은 먼 나라 이야기, 변화를 거부하는 수준이 화석급입니다. 이 사람 뇌는 아마도 조선시대에 멈춘 것 같습니다. 현대 사회에서 살아있는 화석 체험을 원하시면 멸종 위기 동물원이 아니라 당신의 사무실을 방문하시면 됩니다.</p>
                </div>
            `;
                    break;

                case '황제형 내로남불 보스':
                    descriptionHTML = `
                <div class="report-section">
                    <p>당신의 상사는 <span class="highlight">본인에게는 한없이 관대하고 타인에게는 극도로 엄격한</span> 이중 잣대의 달인입니다. 이 사람의 모토는 "내가 하면 로맨스, 남이 하면 불륜"입니다.</p>
                </div>

                <div class="report-section">
                    <p>본인은 회의에 10분 늦게 들어오면서도 <span class="quote">"미안, 중요한 일이 있어서"</span>라고 가볍게 넘기지만, 당신이 정시에 도착해도 <span class="quote">"미리 와서 준비해뒀어야지 뭐하는거야!"</span>라며 공개적으로 망신을 줍니다. 본인은 매일 8시 50분에 출근하면서 직원들에게는 8시 30분까지 출근하라고 강요하는 뻔뻔함이 압권입니다. 그 사람에게 양심이란게 있었다면 벌써 부끄러움으로 죽었을겁니다.</p>
                </div>

                <div class="report-section">
                    <p>업무 실수를 하면 <span class="quote">"이런 기본적인 것도 확인 안 해?"</span>라고 질책하면서, 정작 본인의 실수는 <span class="quote">"누구나 실수할 수 있지"</span>라며 슬쩍 넘어갑니다. 자기 편한대로 상황을 해석하는 재주가 천재적인 수준이라 반박할 수조차 없습니다. 이 사람 혀는 아마 요가 마스터급으로 유연한 것 같습니다. 상황에 따라 말을 이리저리 비틀어 늘릴 수 있으니까요.</p>
                </div>
            `;
                    break;

                case '권위형 갑질 보스':
                    descriptionHTML = `
                <div class="report-section">
                    <p>당신의 상사는 <span class="highlight">권력을 쥐고 있다는 이유만으로 갑질을 일상처럼 하는</span> 전형적인 직장인들의 천적입니다. 출근할 때마다 '저 놈이 오늘은 무슨 트집을 잡을까' 걱정하며 속이 뒤틀립니다.</p>
                </div>

                <div class="report-section">
                    <p>퇴근 1시간 전에 <span class="quote">"이거 지금 다시 해와, 마음에 안 들어"</span>라고 말하며 당신을 패닉에 빠뜨립니다. 똑같은 보고서를 열 번 뜯어고치게 하면서 뭐가 문제인지는 절대 명확히 말해주지 않습니다. "뭔가 부족해", "느낌이 안 좋아" 같은 모호한 피드백만 줄 뿐입니다. 당신의 머리카락이 하나씩 빠질 때마다 그의 자아도 한 조각씩 커지는 것 같습니다.</p>
                </div>

                <div class="report-section">
                    <p>회식자리에서는 <span class="quote">"너 술 한잔 더 마셔"</span>라며 강요하고, 퇴근 직전에 <span class="quote">"아, 이것 좀 마무리하고 가"</span>라며 대형 프로젝트를 던져줍니다. 정말 짜증나지만 표정 관리하며 웃어야 하는 현실이 더 괴롭습니다. 그의 작은 권력은 마치 초등학교 반장이 된 것처럼 하루종일 자랑하고 싶은 것 같습니다. 그런데 반장은 한 학기면 끝나는데, 이 사람은 언제까지 버텨야 할지...</p>
                </div>
            `;
                    break;

                case '책임회피형 보스':
                    descriptionHTML = `
                <div class="report-section">
                    <p>당신의 상사는 <span class="highlight">실패의 책임은 절대 지지 않고 성공의 공은 다 가져가는</span> 진정한 비겁함의 대가입니다. 이 사람 때문에 당신은 회사에서 인간 방패 역할을 하고 있습니다.</p>
                </div>

                <div class="report-section">
                    <p>일이 잘 풀리면 본인이 직접 윗선에 보고하겠다며 과정과 결과를 하나하나 물어보고선 <span class="quote">"내가 이 친구를 잘 지도해서..."</span>라며 공을 가로챕니다. 반대로 문제가 생기면 <span class="quote">"이건 네가 담당한 부분 아니었어? 니가 직접 보고해."</span>라며 발뺌합니다. "일을 이런식으로 처리할거면 당신은 도대체 이 회사에 왜 필요한거야?" 라는 생각이 목구멍까지 올라옵니다. 이 사람의 책임감은 마치 다이어트 중인 사람의 의지처럼 위기 상황에서 가장 먼저 사라집니다.</p>
                </div>

                <div class="report-section">
                    <p>중요한 의사결정은 항상 <span class="quote">"너가 전문가니까 네가 판단해"</span>라며 미루다가, 결과가 좋으면 본인 판단이었다고 우기고 나쁘면 <span class="quote">"내가 그렇게 하라고 했어?"</span>라고 발뺌합니다. 이런 상사에게 보고하느니 차라리 백수가 낫겠다는 생각이 매일 듭니다. 그럼에도 본인이 유능한 상사라고 착각하는 모습이 가장 얄밉습니다.</p>
                </div>
            `;
                    break;

                case '노예사냥꾼 보스':
                    descriptionHTML = `
                <div class="report-section">
                    <p>당신의 상사는 <span class="highlight">개인 시간이라는 개념 자체를 인정하지 않는</span> 워라밸 테러리스트입니다. 회사를 위해 개인적인 시간과 돈, 노력을 투입하는게 당연하다고 생각합니다. 이 사람 때문에 당신의 주말과 저녁 시간은 온통 회사 일로 채워집니다.</p>
                </div>

                <div class="report-section">
                    <p>퇴근 직전에 <span class="quote">"아, 이것만 하고 가자"</span>라고 말하며 3시간짜리 작업을 던집니다. 토요일 오전에는 <span class="quote">"잠깐 회사 들러줄 수 있어?"</span>라는 메시지를 보내고, 일요일 저녁에는 <span class="quote">"내일 회의 자료 좀 미리 검토해줘"</span>라며 잠깐의 휴식도 허락하지 않습니다. 당신의 연애 운은 이 사람 때문에 0으로 고정된 것 같습니다.</p>
                </div>

                <div class="report-section">
                    <p>식사 중이나 화장실에 있을 때도 <span class="quote">"지금 바로 답장 필요해"</span>라며 연락을 퍼붓습니다. 개인 생활이 뭔지, 휴식이 뭔지 모르는 사람이 상사로 있는 한 당신의 인생은 회사의 소모품으로 전락합니다. 이 사람의 달력에는 아마도 토요일과 일요일이 없고, '워라밸'이라는 단어는 사전에 등재되지 않은 것 같습니다. 퇴사가 답입니다, 진짜로.</p>
                </div>
            `;
                    break;

                case '무능력형 혼돈 보스':
                    descriptionHTML = `
                <div class="report-section">
                    <p>당신의 상사는 <span class="highlight">기본적인 업무 능력과 판단력이 심각하게 부족한</span> 무능력의 정수입니다. 근속연수가 쌓였다고 저 자리에 앉은 것으로 생각되는데, 회사의 발전 가능성이 심히 의심스럽습니다.</p>
                </div>

                <div class="report-section">
                    <p>간단한 의사결정도 <span class="quote">"음... 그건 좀 더 검토해볼게"</span>라며 끝없이 미루다가 결국 마감 직전에 당신에게 떠넘깁니다. 중요한 미팅에서는 <span class="quote">"이건 우리 김 대리가 더 잘 알아요"</span>라며 당신에게 즉석에서 발표를 시키고, 본인은 자리만 차지합니다. 그의 존재 이유는 아마도 회사 의자가 덜 외롭지 않게 해주는 것뿐인 것 같습니다.</p>
                </div>

                <div class="report-section">
                    <p>업계 트렌드나 기술에 대해 물어보면 <span class="quote">"그런 건 너희가 더 잘 알잖아"</span>라며 얼버무립니다. 보고서를 검토할 때도 내용은 보지 않고 띄어쓰기나 서식만 지적합니다. 덕분에 당신은 상사의 일까지 떠안게 되어 업무량은 두 배, 월급은 그대로입니다. "무능한 사람에게 가장 무서운 무기는 권한입니다." 당신의 상사가 그 명언의 살아있는 증거입니다.</p>
                </div>
            `;
                    break;

                case '복합형 악몽 보스':
                    descriptionHTML = `
                <div class="report-section">
                    <p>당신의 상사는 <span class="highlight">여러 문제적 특성이 섞여 있는</span> 최악의 보스 복합체입니다. 모든 나쁜 상사의 특징을 블렌더에 갈아 만든 것 같아, 어떤 대응법도 완벽하게 통하지 않습니다.</p>
                </div>

                <div class="report-section">
                    <p>월요일에는 꼰대처럼 <span class="quote">"우리 때는 이렇게 안 했어"</span>라며 구시대적 잔소리를 늘어놓다가, 화요일에는 갑질 모드로 <span class="quote">"이거 왜 이렇게 했어? 다시 해!"</span>라며 이유도 말 안 하고 다시 시킵니다. 수요일에는 책임회피 모드로 <span class="quote">"이건 네가 알아서 판단했어야지, 내가 언제 그렇게 하라고 했어?"</span>라며 본인 지시를 부정하고, 목요일에는 아침에 칭찬해놓고 오후엔 같은 일로 질책합니다. 그의 인격이 마치 러시안 룰렛처럼 매일 어떤 것이 튀어나올지 모르는 공포의 대상입니다.</p>
                </div>

                <div class="report-section">
                    <p>금요일 퇴근 직전에는 <span class="quote">"아, 이거 주말까지 끝내야 되는데?"</span>라며 폭탄을 투하하고, 주말에는 진도 체크 메시지를 시간 상관없이 보냅니다. 무슨 지뢰밭도 아니고, 매일 어떤 인격이 튀어나올지 모르니 정신 건강을 위해 이직을 진지하게 고려해보세요. 이런 상사 밑에서 10년 일하면 정신과 약 처방받고 있을 겁니다. 아니, 5년이면 충분할지도 모릅니다.</p>
                </div>
            `;
                    break;

                case '권위주의형 복합 보스':
                    descriptionHTML = `
                <div class="report-section">
                    <p>당신의 상사는 <span class="highlight">꼰대력과 갑질이 동시에 강한</span> 권위주의의 끝판왕입니다. 과거의 방식을 고집하면서 동시에 권력을 앞세워 압박하는 이중고를 선사합니다.</p>
                </div>

                <div class="report-section">
                    <p><span class="quote">"내가 너 나이 때는 이것보다 더 했어!"</span>라는 말과 함께 불가능한 업무를 요구하고, <span class="quote">"요즘 애들은 왜 이렇게 일을 못해?"</span>라며 당신의 노력을 폄하합니다. 그의 말투와 행동은 마치 자신이 조선시대 양반이고 당신은 노비라도 된 듯한 착각에 빠져있습니다. 말과 행동이 천박한건 영락없이 본인이 노비면서 말이죠.</p>
                </div>

                <div class="report-section">
                    <p>그의 눈에 들지 못하면 정당한 평가를 받기 어렵고, 그의 마음에 들려면 과거의 비효율적인 방식을 따라야 하는 모순적인 상황에 놓이게 됩니다. 이 상사의 업무 방식은 마치 스마트폰 시대에 공중전화를 찾아 헤매는 것과 같습니다. 당신은 매일 답답함과 억압감의 콜라보레이션을 경험하고 있어요!</p>
                </div>
            `;
                    break;

                case '노동착취형 복합 보스':
                    descriptionHTML = `
                <div class="report-section">
                    <p>당신의 상사는 <span class="highlight">워라밸 파괴와 갑질이 결합된</span> 극악무도한 노동착취 전문가입니다. 당신의 시간과 자존감을 동시에 빼앗아가는 이중 흡혈귀 같은 존재입니다.</p>
                </div>

                <div class="report-section">
                    <p>퇴근시간에 <span class="quote">"야, 이거 오늘 안에 처리해"</span>라며 명령조로 업무를 던지고, 주말에는 <span class="quote">"이거 지금 못하면 팀 전체에 문제가 생겨! 그럼 너 때문이야."</span>라는 협박성 메시지와 함께 업무를 지시합니다. 당신의 인생 시간표는 이 사람 손에 의해 '출근-야근-출근-야근-주말출근'이라는 끔찍한 루프에 갇혀 있습니다.</p>
                </div>

                <div class="report-section">
                    <p>회식은 강제 참석이고, 밤늦게까지 술자리를 이어가면서도 다음날 아침 일찍 출근을 요구합니다. 이 사람의 사전에는 '휴식', '개인시간', '가족'과 같은 단어가 존재하지 않습니다. 당신은 이미 인간이 아니라 24시간 가동 가능한 업무 로봇으로 취급받고 있습니다. 당신의 머리카락, 건강, 인간관계가 다 빠져나가기 전에 탈출 계획을 세우세요!</p>
                </div>
            `;
                    break;

                case '무책임형 복합 보스':
                    descriptionHTML = `
                <div class="report-section">
                    <p>당신의 상사는 <span class="highlight">책임회피와 무능력이 합쳐진</span> 위험한 조합입니다. 결정 능력은 없으면서 실패의 책임은 절대 지지 않는, 책임감이 강한 부하직원에게는 최악의 시나리오입니다.</p>
                </div>

                <div class="report-section">
                    <p>중요한 의사결정에서 <span class="quote">"너가 더 잘 알 것 같은데, 너가 판단해"</span>라고 책임을 회피하다가, 문제가 생기면 <span class="quote">"왜 이렇게 판단했어? 기본적인 것도 못하나?"</span>라며 당신을 질책합니다. 그의 의사결정 능력은 마치 그 사람의 머리숱만큼 희박하고, 책임감은 유령처럼 존재하는지 조차 의심스럽습니다.</p>
                </div>

                <div class="report-section">
                    <p>회의에서는 아무 의견도 내지 않다가 나중에 결과물을 보고 <span class="quote">"이건 높으신분이 싫어할것 같은데.."</span>라며 모든 것을 처음부터 다시 하게 만듭니다. 이 사람과 함께 일하는 것은 마치 무한 반복되는 시간 루프에 갇힌 느낌입니다. 끝없는 수정과 책임 회피의 악순환 속에서 당신의 정신 건강만 서서히 무너집니다. 이런 상사 밑에서 일하느니 차라리 백수가 낫습니다!</p>
                </div>
            `;
                    break;

                case '꼰대황제형 복합 보스':
                    descriptionHTML = `
                <div class="report-section">
                    <p>당신의 상사는 <span class="highlight">꼰대력과 내로남불이 결합된</span> 최악의 조합입니다. 당신에게는 엄격한 규칙을 강요하면서 본인은 예외를 적용하는 '내가 룰이다'식 황제 마인드를 가진 꼰대입니다.</p>
                </div>

                <div class="report-section">
                    <p><span class="quote">"우리 때는 이렇게 했어"</span>라며 과거 방식을 고집하면서도, 본인은 <span class="quote">"나는 직급이 있으니까 다르지"</span>라며 특별 대우를 요구합니다. 당신이 지각하면 불호령을 내리지만, 본인이 지각하면 "중요한 미팅이 있었다"는 핑계를 댑니다.(하지만 증거는 없죠.) 이 사람의 논리는 마치 고무줄처럼 상황에 따라 늘었다 줄었다 하는 신기한 능력을 가졌습니다.</p>
                </div>

                <div class="report-section">
                    <p>회식에서는 <span class="quote">"요즘 애들은 예의가 없어"</span>라고 한탄하면서, 정작 본인은 다른 사람의 이야기를 끊고 자기 무용담만 늘어놓습니다. 이 상사의 세계관에서는 본인만 특별하고 나머지는 다 규칙을 따라야 하는 하급 시민인 것 같습니다. 이런 사람이 있으면 조직 내 공정성과 신뢰는 바닥으로 떨어집니다. 당신의 인내심에 경의를 표합니다.</p>
                </div>
            `;
                    break;

                case '이중 스트레스형 복합 보스':
                    descriptionHTML = `
                <div class="report-section">
                    <p>당신의 상사는 <span class="highlight">두 가지 이상의 문제적 특성이 결합된</span> 복합적 스트레스 유발자입니다. 어느 한 가지 대응법으로는 해결할 수 없는 입체적인 문제를 가져다줍니다.</p>
                </div>

                <div class="report-section">
                    <p>같이 일할때 자료의 정확성을 중시하는것 같다가도, 어느날에는 신속한 일처리가 중요하다고 소리칩니다. 어떤 장단에 맞춰 일을 해야할지 판단하기가 어렵고 마치 날씨 예보보다 예측하기 어려운 변덕을 보여주는데, 아마 이 사람의 현재 상태를 추적하는 앱이 있다면 대박 날 것 같습니다.</p>
                </div>

                <div class="report-section">
                    <p>업무 방식과 개인 시간 모두에 간섭하면서도 정작 중요한 결정에서는 책임을 회피합니다. 이런 상사와 함께 일하는 것은 마치 두 개의 다른 게임을 동시에 플레이하는 것과 같습니다. 당신이 규칙을 파악했다고 생각하는 순간 갑자기 게임이 바뀌고, 아무리 노력해도 승리할 수 없는 불공정한 게임입니다. 끝없는 소모전 속에서 당신의 에너지만 바닥을 향해 달려갑니다.</p>
                </div>
            `;
                    break;

                case '약한 스트레스형 보스':
                    descriptionHTML = `
                <div class="report-section">
                    <p>당신의 상사는 <span class="highlight">한 가지 문제적 특성이 두드러지지만 심각하지는 않은</span> 관리 가능한 수준의 스트레스 유발자입니다. 완벽하지는 않지만 견딜 만한 정도입니다.</p>
                </div>

                <div class="report-section">
                    <p>가끔 예의 없는 말투나 부적절한 요구를 할 때가 있지만, 극단적인 수준은 아닙니다. 어떤 날은 합리적이고 이해심이 많다가도, 다른 날은 이유 없이 까다로워지는 등 일관성이 부족합니다. 업무 스트레스가 많을 때는 그 부담을 아래로 전가하는 경향이 있습니다.</p>
                </div>

                <div class="report-section">
                    <p>이런 상사와 일하는 것은 마치 가끔 맛이 이상한 커피를 파는 카페와 같습니다. 대체로는 괜찮지만 가끔 쓴맛이 너무 강하게 나올 때가 있어요. 그래도 매일 마시는 건 괜찮은 수준입니다. 적절한 대화와 경계 설정으로 충분히 관리 가능한 관계를 유지할 수 있습니다. 최악은 아니니 다행이네요!</p>
                </div>
            `;
                    break;

                case '합리적 평범 보스':
                    descriptionHTML = `
                <div class="report-section">
                    <p>당신의 상사는 <span class="highlight">대체로 합리적인 판단을 하고 직원들을 존중하는</span> 무난한 상사입니다. 결코 완벽하지는 않지만, 심각한 문제는 없는 편입니다.</p>
                </div>

                <div class="report-section">
                    <p>업무적인 결정에서 <span class="quote">"이건 어떻게 생각해?"</span>라며 당신의 의견을 물어보고, 실수를 했을 때는 대체로 이해심 있게 대응합니다. 가끔 스트레스 받을 때 짜증을 내기도 하지만, 곧 진정되고 합리적인 모습으로 돌아옵니다. 직장 상사 복권에서 중간 등수는 당첨된 셈입니다.</p>
                </div>

                <div class="report-section">
                    <p>야근이나 주말 근무를 강요하지 않고, 공과 사를 구분하는 편입니다. 업무 성과에 대해 적절한 피드백을 주고, 당신의 커리어 발전에도 어느 정도 관심을 보입니다. 완벽한 상사는 아니지만, 이 정도면 직장 생활에서 만날 수 있는 '보통의 운'이라고 할 수 있습니다. 최소한 악몽에 시달리진 않을 테니까요.</p>
                </div>
            `;
                    break;

                case '무난한 일상형 보스':
                    descriptionHTML = `
                <div class="report-section">
                    <p>당신의 상사는 <span class="highlight">특별히 문제가 되는 특성이 없는 평범한</span> 상사입니다. 드라마틱한 갈등이나 특별한 스트레스 없이 일상적인 직장 생활이 가능합니다.</p>
                </div>

                <div class="report-section">
                    <p>업무 지시가 명확하고, 비합리적인 요구나 압박을 거의 하지 않습니다. 당신의 개인 시간을 존중하며, 회의와 보고 절차도 효율적으로 진행합니다. 물론 가끔은 의사소통이 부족하거나 업무 처리가 지연될 때도 있지만, 심각한 수준은 아닙니다.</p>
                </div>

                <div class="report-section">
                    <p>이런 상사와 일하는 것은 마치 잘 정돈된 도로를 드라이브하는 것과 같습니다. 특별히 아름다운 풍경이 있는 것은 아니지만, 위험한 코너나 구멍도 없어 편안하게 목적지까지 갈 수 있습니다. 직장 생활에서 이런 상사를 만났다면, 다른 회사의 지옥 같은 상사 이야기를 들으며 당신의 운을 감사히 여기세요!</p>
                </div>
            `;
                    break;

                default:
                    // 기본 설명 (미분류 상사 유형)
                    descriptionHTML = `
                <div class="report-section">
                    <p>당신의 상사는 독특한 유형의 문제적 인물입니다. 여러 부정적 특성이 혼합되어 있어 예측하기 어렵고 대응하기도 쉽지 않습니다.</p>
                </div>
                
                <div class="report-section">
                    <p>팀원들은 매일 그의 기분과 태도를 파악하는 데 많은 에너지를 소비하고 있으며, 이로 인해 업무 효율성과 팀 분위기가 저하되고 있습니다. 마치 매일 아침 "오늘의 상사 날씨 예보"를 체크해야 하는 것 같은 느낌이죠.</p>
                </div>
                
                <div class="report-section">
                    <p>이 테스트에서 드러난 당신 상사의 주요 미운 능력치를 참고하여 적절한 대응 전략을 세우는 것이 중요합니다. 하루빨리 새로운 직장을 알아보는 것도 좋은 전략일 수 있습니다!</p>
                </div>
            `;
            }

            // 툴팁 적용
            descriptionHTML = applyTooltips(descriptionHTML);

            // 결과 HTML 삽입
            descriptionElement.innerHTML = descriptionHTML;

            // 툴팁 기능 활성화를 위한 스크립트 추가
            initTooltips();
        }

        // 툴팁 기능 초기화
        function initTooltips() {
            // 툴팁 스타일 추가 (아직 없는 경우에만)
            if (!document.getElementById('tooltip-styles')) {
                const styleEl = document.createElement('style');
                styleEl.id = 'tooltip-styles';
                styleEl.textContent = `
            .tooltip-word {
                border-bottom: 1px dashed #d9534f;
                position: relative;
                cursor: help;
            }
            
            .tooltip-word:hover::after {
                content: attr(data-tooltip);
                position: absolute;
                bottom: 100%;
                left: 50%;
                transform: translateX(-50%);
                background-color: #333;
                color: white;
                padding: 5px 10px;
                border-radius: 4px;
                font-size: 14px;
                min-width: 200px;
                z-index: 1000;
                box-shadow: 0 2px 5px rgba(0,0,0,0.2);
                white-space: normal;
                line-height: 1.4;
                text-align: center;
            }
            
            .tooltip-word:hover::before {
                content: '';
                position: absolute;
                bottom: 90%;
                left: 50%;
                transform: translateX(-50%);
                border-width: 5px;
                border-style: solid;
                border-color: #333 transparent transparent transparent;
                z-index: 1000;
            }
        `;
                document.head.appendChild(styleEl);
            }

            // 클릭 이벤트 리스너 추가 (모바일 사용자를 위해)
            document.querySelectorAll('.tooltip-word').forEach(word => {
                word.addEventListener('click', function (e) {
                    // 클릭 시 툴팁 표시/숨김 토글
                    const tooltip = this.getAttribute('data-tooltip');

                    // 이미 활성화된 툴팁이 있으면 제거
                    const activeTooltip = document.querySelector('.active-tooltip');
                    if (activeTooltip) {
                        activeTooltip.parentNode.removeChild(activeTooltip);
                    }

                    // 새 툴팁 생성 및 표시
                    const tooltipEl = document.createElement('div');
                    tooltipEl.className = 'active-tooltip';
                    tooltipEl.textContent = tooltip;
                    tooltipEl.style.position = 'absolute';
                    tooltipEl.style.backgroundColor = '#333';
                    tooltipEl.style.color = 'white';
                    tooltipEl.style.padding = '5px 10px';
                    tooltipEl.style.borderRadius = '4px';
                    tooltipEl.style.zIndex = '1000';
                    tooltipEl.style.boxShadow = '0 2px 5px rgba(0,0,0,0.2)';
                    tooltipEl.style.maxWidth = '250px';
                    tooltipEl.style.textAlign = 'center';

                    // 위치 계산
                    const rect = this.getBoundingClientRect();
                    tooltipEl.style.top = (rect.top - 40 + window.scrollY) + 'px';
                    tooltipEl.style.left = (rect.left + rect.width / 2) + 'px';
                    tooltipEl.style.transform = 'translateX(-50%)';

                    document.body.appendChild(tooltipEl);

                    // 클릭 이벤트 전파 중지
                    e.stopPropagation();
                });
            });

            // 문서 클릭 시 활성화된 툴팁 닫기
            document.addEventListener('click', function () {
                const activeTooltip = document.querySelector('.active-tooltip');
                if (activeTooltip) {
                    activeTooltip.parentNode.removeChild(activeTooltip);
                }
            });
        }

        // 상사의 행동 심리 분석 함수
        function generateWhyTheyDoThat(bossType, baseType, topStats, difficultyLevel, rationalityScore) {
            const psychologyList = document.getElementById('psychology-list');
            psychologyList.innerHTML = '';

            // 섹션 제목과 클래스 변경
            const sectionTitle = document.querySelector('.section-title');
            if (sectionTitle) {
                sectionTitle.textContent = '생존 난이도';
            }

            // 기존 anger-points 클래스를 psychology-section으로 변경
            const angerSection = document.querySelector('.anger-points');
            if (angerSection) {
                angerSection.className = angerSection.className.replace('anger-points', 'psychology-section');

                // 배경색과 테두리 색상 변경
                angerSection.style.backgroundColor = '#f0f7ff';
                angerSection.style.borderTop = '3px solid #3f51b5';
                angerSection.style.boxShadow = '0 3px 15px rgba(63, 81, 181, 0.15)';
            }

            // 제목 변경
            const angerTitle = document.querySelector('.anger-title');
            if (angerTitle) {
                angerTitle.textContent = '그 행동의 심리적 이유';
                angerTitle.style.color = '#3f51b5';
            }

            // 모드 전환 토글 추가
            const modeToggleDiv = document.createElement('div');
            modeToggleDiv.className = 'mode-toggle';
            modeToggleDiv.innerHTML = `
        <button class="mode-button active" id="analysis-mode">심리분석모드</button>
        <button class="mode-button" id="fun-mode">유쾌한해석모드</button>
    `;

            // 토글 버튼 스타일과 섹션 스타일 추가
            const styleEl = document.createElement('style');
            styleEl.textContent = `
    .mode-toggle {
        display: flex;
        justify-content: center;
        margin: 15px 0;
        gap: 10px;
    }
    
    .mode-button {
        background-color: #f0f0f0;
        border: none;
        border-radius: 20px;
        padding: 8px 16px;
        font-size: 14px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    /* 버튼 스타일 */
#fun-mode.active {
    background-color: #f44336; /* 빨간색 계열 */
    color: white;
    box-shadow: 0 2px 5px rgba(244, 67, 54, 0.3);
}

#spicy-mode.active {
    background-color: #2196F3; /* 파란색 계열 */
    color: white;
    box-shadow: 0 2px 5px rgba(33, 150, 243, 0.3);
}
    
    /* 모드별 섹션 스타일 */
.psychology-section.fun-mode-active {
    background-color: #ffebee; /* 연한 빨간색/분홍색 배경 */
    border-top: 3px solid #f44336;
    box-shadow: 0 3px 15px rgba(244, 67, 54, 0.15);
}

.psychology-section.analysis-mode-active {
    background-color: #e3f2fd; /* 더 선명한 하늘색 배경 */
    border-top: 3px solid #2196F3;
    box-shadow: 0 3px 15px rgba(33, 150, 243, 0.15);
}
    
    /* 기본모드 항목 스타일 */
    .psychology-list li.fun-mode em {
        display: none; /* 대처법 숨기기 */
    }
    
    /* 아이콘 스타일 */
    .psychology-list li.fun-mode:before {
        content: '😎';
    }
    
    .psychology-list li.analysis-mode:before {
        content: '🧠';
    }
`;
            document.head.appendChild(styleEl);

            // 토글 버튼을 제목 바로 아래에 삽입
            if (angerTitle && angerTitle.parentNode) {
                angerTitle.parentNode.insertBefore(modeToggleDiv, angerTitle);
            }

            // ID 변경
            const tipsList = document.getElementById('tips-list');
            if (tipsList) {
                tipsList.id = 'psychology-list';
                tipsList.className = 'psychology-list';
            }

            // 보스 유형별 심리 분석 및 대처법 (심리분석모드)
            const analysisMode = {
                '구시대의 꼰대 보스': [
                    {
                        behavior: "'우리 때는...'이라는 말을 입에 달고 사는 이유?",
                        analysis: "당신의 꼰대 상사는 변화에 대한 두려움과 존재감 상실에 대한 불안을 겪고 있어요. 세상이 너무 빠르게 변해서 자신의 경험이 무가치해질까봐 불안한 겁니다. 그래서 과거를 끊임없이 들먹여 자신의 가치를 확인받으려 하죠.",
                        solution: "그의 경험을 인정해주되, '그때의 지혜를 현재 상황에 맞게 어떻게 적용할 수 있을까요?'라고 물어보세요. 과거와 현재를 연결해주는 다리 역할을 제안하면 덜 저항할 거예요."
                    },
                    {
                        behavior: "사소한 절차와 형식에 집착하는 이유?",
                        analysis: "통제력을 상실할까봐 두려운 겁니다. 세상의 모든 것이 변해도 '형식'만큼은 자신이 통제할 수 있다고 생각하죠. 그래서 사소한 보고서 서식이나 호칭 같은 것에 목숨을 걸게 됩니다.",
                        solution: "형식은 철저히 맞춰주고, 내용에서 승부하세요. 서식과 호칭은 그대로 따르되, 그 안에 혁신적인 아이디어를 슬쩍 넣어보세요. 껍데기는 그대로, 알맹이는 새롭게!"
                    },
                    {
                        behavior: "새로운 방식을 거부하는 심리적 이유?",
                        analysis: "새로운 방식을 배우는 건 인지적 불편함을 주고, 자신의 전문성이 도전받는다고 느끼게 합니다. 이것은 '인지 부조화' 현상으로, 기존 신념체계와 새로운 정보 사이의 충돌이 불안감을 야기합니다.",
                        solution: "새로운 방식을 그의 경험과 연결시키세요. '이 새로운 접근법은 과장님께서 항상 강조하셨던 핵심 원칙을 더 효율적으로 구현할 수 있어요'라고 말하면 심리적 다리를 만들어줄 수 있습니다."
                    }
                ],
                '황제형 내로남불 보스': [
                    {
                        behavior: "본인에게는 관대하고 타인에게는 엄격한 이유?",
                        analysis: "당신의 상사는 심각한 '기본적 귀인 오류'를 겪고 있어요. 자신의 실수는 '상황' 탓으로, 타인의 실수는 '능력이나 성격' 탓으로 돌리는 인지적 왜곡이 있죠. 거기에 특권의식까지 더해져서 '나는 특별하니까 예외가 될 수 있다'고 진심으로 믿고 있습니다.",
                        solution: "그의 특별함을 인정해주면서도, 객관적 기준을 슬쩍 도입해보세요. '부장님 같은 분이니까 이런 엄격한 기준을 지키실 수 있을 거라 믿습니다'라고 말하면 오히려 자신의 기준에 스스로 묶이게 됩니다."
                    },
                    {
                        behavior: "모든 공은 자기 것으로 만들려는 이유?",
                        analysis: "이는 '자기고양 편향'과 '자기중심적 귀인'이라는 심리현상에서 비롯됩니다. 자신의 가치를 확인받고 싶은 강한 욕구와 타인보다 우월하다는 착각이 결합된 심리 방어기제입니다.",
                        solution: "공개적으로 그의 공을 인정하되, 팀원들에게도 공을 나눠주는 문화를 정착시키세요. '과장님 덕분에 저희가 이런 성과를 낼 수 있었습니다'라고 먼저 말한 후, '특히 김대리의 아이디어가 결정적이었죠'라고 덧붙이면 효과적입니다."
                    },
                    {
                        behavior: "자신의 말을 번복하는데도 문제 삼지 않는 이유?",
                        analysis: "이는 '인지적 일관성 유지'를 위한 심리 방어기제입니다. 자신의 모순된 행동이나 말을 인정하면 자아 이미지에 금이 가기 때문에, 그 모순을 인식하지 않거나 합리화하는 방향으로 기억과 사고를 왜곡합니다.",
                        solution: "신중하게 기록을 남기세요. 메일, 메모, 회의록 등으로 중요한 지시사항을 문서화하고, 필요할 때 '지난번 말씀하신 내용이...'라고 조심스럽게 언급하되, 체면을 살려주는 방식으로 접근하세요."
                    }
                ],
                '권위형 갑질 보스': [
                    {
                        behavior: "부하 직원 앞에서 권위적으로 행동하는 이유?",
                        analysis: "내면의 불안감을 감추기 위한 방어기제일 확률이 높습니다. 실제로는 자신의 능력이나 위치에 자신감이 없어서, 외적인 권위로 그 불안을 감추려는 심리가 작용하는 거죠.",
                        solution: "그의 전문성을 진심으로 인정해주세요. 불안감이 줄어들면 권위적 행동도 줄어들 겁니다. 그리고 1:1 대화에서는 훨씬 합리적일 수 있으니, 가능하면 개인적 소통 기회를 만드세요."
                    },
                    {
                        behavior: "감정 기복이 심하고 예측불가능한 이유?",
                        analysis: "이런 행동은 종종 '경계선적 성격 특성'이나 스트레스에 대한 부적절한 대처의 결과일 수 있습니다. 또한 타인을 통제하는 효과적인 방법이기도 합니다. 상대가 항상 긴장하고 눈치를 보게 만들어 권력을 유지하죠.",
                        solution: "패턴을 파악하세요. 특정 시간대나 상황에서 그의 기분이 나빠지는 경향이 있을 수 있습니다. 좋은 날에는 중요한 논의를 하고, 나쁜 날에는 최소한의 접촉만 유지하는 전략이 도움이 됩니다."
                    },
                    {
                        behavior: "팀원 앞에서 누군가를 공개적으로 비난하는 이유?",
                        analysis: "이는 '공포를 통한 통제' 전략입니다. 한 사람을 본보기로 삼아 다른 모든 사람들에게 경고 메시지를 보내는 것이죠. 또한 자신의 권력을 과시하고, 팀원들 사이의 단결력을 약화시켜 집단적 저항을 방지하는 목적도 있습니다.",
                        solution: "절대 그의 편에 서서 다른 동료를 비난하지 마세요. 대신 공개적으로 공격받는 동료에게 개인적으로 지지를 표현하고, 팀원들 간의 연대를 강화하세요. 그리고 당신이 타겟이 되었을 때는 감정적 반응을 자제하고 팩트에 집중하는 것이 중요합니다."
                    }
                ],
                '책임회피형 보스': [
                    {
                        behavior: "실패할 땐 팀원 탓, 성공할 땐 자기 공으로 돌리는 이유?",
                        analysis: "이것은 '자기 봉사적 편향'의 극단적 사례입니다. 자존감이 낮거나 실패에 대한 두려움이 강한 사람들이 자아를 보호하기 위해 발달시킨 심리적 방어기제입니다. 실패를 인정하는 것이 자아에 큰 위협으로 느껴지는 거죠.",
                        solution: "모든 중요한 지시와 결정을 이메일로 남기고, 주요 미팅은 녹음하거나 회의록을 작성하세요. 일이 잘 풀렸을 때는 '과장님의 지시대로 했더니 정말 좋은 결과가 나왔네요'라고 선제적으로 공을 돌리세요."
                    },
                    {
                        behavior: "결정을 미루고 책임지기를 두려워하는 이유?",
                        analysis: "결정 회피는 실패에 대한 극도의 두려움과 완벽주의에서 비롯될 수 있습니다. 잘못된 결정을 내리는 것보다 아예 결정을 하지 않는 것이 심리적으로 더 안전하게 느껴지는 거죠.",
                        solution: "결정 사항을 작은 단계로 나누어 제시하고, 각 단계마다 승인을 받으세요. '이 방향으로 진행해도 될까요?'와 같은 작은 결정부터 시작해서 점점 큰 결정으로 이끄는 방식이 효과적입니다."
                    },
                    {
                        behavior: "명확한 지시를 하지 않고 모호하게 말하는 이유?",
                        analysis: "이는 '전략적 모호성'이라는 심리적 전술입니다. 나중에 결과가 좋지 않을 경우 '그건 내가 의도한 바가 아니었어'라고 말할 수 있는 여지를 남기는 것이죠. 또한 업무 실패의 책임을 부하직원에게 전가하기 쉽게 만듭니다.",
                        solution: "대화 후에는 반드시 정리 이메일을 보내세요. '오늘 논의한 내용을 제가 이해한 바대로 정리했습니다. 1) ... 2) ... 맞다면 확인 부탁드립니다.'라고 명시적인 승인을 요청하세요. 이렇게 하면 책임 회피의 여지를 줄일 수 있습니다."
                    }
                ],
                '노예사냥꾼 보스': [
                    {
                        behavior: "개인 시간을 존중하지 않는 심리적 배경은?",
                        analysis: "일과 정체성이 완전히 융합된 사람들의 특징입니다. 자신의 가치를 오직 일을 통해서만 확인받고, 다른 영역에서의 자아실현이나 균형에 대한 개념이 부족합니다. 또한 자신이 희생하는만큼 타인도 희생해야 한다는 왜곡된 공정성 개념을 가질 수 있습니다.",
                        solution: "명확한 경계 설정이 필수입니다. 처음부터 단호하게 '오후 6시 이후에는 가족 약속이 있어서 응답이 어렵습니다'와 같은 선을 그어두세요. 한 번 무너진 경계는 회복하기 어렵습니다."
                    },
                    {
                        behavior: "끊임없이 업무량을 늘리고 긴급함을 강조하는 이유?",
                        analysis: "이는 '중요성 착각'과 '통제 욕구'에서 비롯됩니다. 모든 일이 긴급하고 중요하다고 생각하면 자신의 존재감과 일의 가치가 확인되는 심리적 만족감을 얻습니다.",
                        solution: "업무의 우선순위화를 문서화하고 공유하세요. '현재 A, B, C 업무가 진행 중인데, 이 새 업무를 추가하면 어떤 순서로 진행하면 좋을까요?'라고 물어보는 것이 효과적입니다."
                    },
                    {
                        behavior: "회사 행사나 회식을 강제하는 심리적 이유?",
                        analysis: "이는 '집단 충성도 테스트'와 '경계 흐림' 전략의 일환입니다. 개인 시간까지 회사에 헌신하게 함으로써 더 큰 충성심과 순응을 유도하고, 일과 개인 생활의 경계를 모호하게 만들어 업무 외 시간에도 일을 요구하기 쉽게 만듭니다.",
                        solution: "모든 행사에 빠지려 하기보다 전략적으로 참석하세요. 중요한 자리는 짧게라도 얼굴을 비추고, 덜 중요한 자리는 정중히 양해를 구하세요. 완전한 거부보다 선택적 참여가 더 효과적인 전략입니다."
                    }
                ],
                '무능력형 혼돈 보스': [
                    {
                        behavior: "결정을 못 내리고 책임을 전가하는 심리적 이유?",
                        analysis: "이는 '결정 공포증'과 '부적절감'에서 비롯될 수 있습니다. 자신의 전문성 부족을 내면적으로 인식하고 있어, 잘못된 결정으로 이 사실이 드러날까 두려워하는 것입니다.",
                        solution: "의사결정을 위한 명확한 프레임워크를 제시하고, 각 옵션의 장단점을 객관적으로 정리해서 보여주세요. '이 세 가지 옵션 중에서 A가 이런 이점이 있어 보이는데, 과장님 생각은 어떠신가요?'처럼 방향성을 제시하면 도움이 됩니다."
                    },
                    {
                        behavior: "전문 지식 없이 높은 자리에 오른 이유?",
                        analysis: "이는 '피터의 원리'로 설명될 수 있습니다: 조직에서 사람들은 무능력해질 때까지 승진한다는 이론이죠. 또한 정치적 기술, 대인관계 능력, 또는 단순히 오래 버티는 능력이 실제 업무 능력보다 승진에 더 중요하게 작용할 수 있습니다.",
                        solution: "그들의 강점(있다면)을 활용하세요. 대외 관계나 상위 관리자와의 소통이 좋다면 그 부분을 담당하게 하고, 실무는 팀이 주도적으로 진행하는 방식으로 역할을 분담하는 것이 효과적입니다."
                    },
                    {
                        behavior: "기본적인 업무 원리도 이해하지 못하는 이유?",
                        analysis: "이는 '던닝-크루거 효과'로 설명됩니다. 능력이 부족한 사람일수록 자신의 무능함을 인식하지 못하고, 오히려 자신의 능력을 과대평가하는 경향이 있습니다. 또한 빠르게 변화하는 업계에서 지속적인 학습을 게을리했을 가능성도 있습니다.",
                        solution: "직접적인 도전보다는 교육적 접근이 효과적입니다. '최근 업계에서 이런 방식이 표준이 되고 있어요. 간단히 설명해드릴까요?'라는 방식으로 정보를 공유하세요. 또한 팀원들끼리 중요한 결정을 사전에 조율하여 상사에게는 승인만 받는 전략도 도움이 됩니다."
                    }
                ],
                '복합형 악몽 보스': [
                    {
                        behavior: "다양한 문제 행동을 복합적으로 보이는 이유?",
                        analysis: "이는 여러 성격 장애적 특성이 중첩된 경우일 수 있습니다. 내면의 깊은 불안, 자존감 문제, 통제 욕구, 공감 능력 부족 등이 복합적으로 작용하여 다양한 문제 행동으로 표출되는 것입니다.",
                        solution: "이런 유형의 상사와 일할 때는 감정적 방어벽을 구축하는 것이 중요합니다. 그의 행동을 개인적으로 받아들이지 말고, 전문적인 거리를 유지하세요. 가능하다면 팀원들과 연대하여 서로 지지하는 네트워크를 형성하는 것이 정신 건강에 도움이 됩니다."
                    },
                    {
                        behavior: "변덕스럽고 예측할 수 없는 행동의 원인?",
                        analysis: "이런 행동은 종종 '경계선적 성격 특성'이나 스트레스에 대한 부적절한 대처의 결과일 수 있습니다. 또한 타인을 통제하는 효과적인 방법이기도 합니다. 상대가 항상 긴장하고 눈치를 보게 만들어 권력을 유지하죠.",
                        solution: "패턴을 파악하세요. 특정 시간대나 상황에서 그의 기분이 나빠지는 경향이 있을 수 있습니다. 좋은 날에는 중요한 논의를 하고, 나쁜 날에는 최소한의 접촉만 유지하는 전략이 도움이 됩니다."
                    },
                    {
                        behavior: "극단적인 감정 기복을 보이는 이유?",
                        analysis: "이는 '정서 조절 장애'의 한 형태일 수 있습니다. 스트레스나 좌절에 대한 내성이 낮아 작은 자극에도 과도한 감정 반응을 보이는 것이죠. 또한 의도적으로 팀원들을 불안정한 상태로 유지하여 통제력을 행사하려는 전략일 수도 있습니다.",
                        solution: "감정적 전염을 방지하세요. 그의 감정 폭발에 동요하지 말고, 차분하고 중립적인 태도를 유지하세요. 가능하다면 감정이 격해질 때는 시간을 두고 나중에 다시 대화하는 전략이 효과적입니다. 또한 중요한 안건은 그의 기분이 좋을 때 논의하는 것이 현명합니다."
                    }
                ],
                '합리적 평범 보스': [
                    {
                        behavior: "가끔 소통이 부족하게 느껴지는 이유?",
                        analysis: "이는 '지식의 저주'라는 인지 편향에서 비롯될 수 있습니다. 자신이 알고 있는 정보나 맥락을 다른 사람도 알고 있다고 착각하여 충분한 설명이나 소통을 생략하게 되는 것이죠.",
                        solution: "명확한 질문을 통해 정보를 이끌어내세요. '이 프로젝트의 최종 목표가 무엇인가요?' 또는 '우선 순위가 어떻게 되나요?'와 같은 구체적인 질문은 합리적인 상사에게 효과적입니다."
                    },
                    {
                        behavior: "때때로 피드백을 직설적으로 주는 이유?",
                        analysis: "이는 '효율성 지향' 성향에서 비롯될 수 있습니다. 감정적 쿠션 없이 직접적으로 말하는 것이 시간을 절약하고 명확하다고 생각하는 것이죠. 또한 자신의 말이 상대에게 어떤 감정적 영향을 미칠지 충분히 고려하지 못하는 '공감 부족'의 한 형태일 수도 있습니다.",
                        solution: "감정을 개인적으로 받아들이지 말고, 피드백의 내용에 집중하세요. 필요하다면 '좀 더 구체적인 개선점을 알려주시면 도움이 될 것 같습니다'라고 요청하세요. 합리적인 상사는 대개 건설적인 제안을 잘 받아들입니다."
                    }
                ],
                // 스탯별 분석 (스탯 기반으로 항목 추가)
                '스탯분석': {
                    '꼰대력': {
                        behavior: "과거 경험만 강조하는 이유?",
                        analysis: "이는 '앵커링 효과'와 '현상 유지 편향'이라는 인지적 오류와 관련이 있습니다. 이미 알고 있는 방식에 과도하게 의존하고, 변화로 인한 불확실성과 불안을 피하려는 심리가 작용합니다.",
                        solution: "새로운 방식이 그의 경험과 지혜를 더욱 빛나게 할 것이라는 관점으로 접근해보세요. '과장님의 풍부한 경험이 있어야 이 새로운 방법도 제대로 활용할 수 있을 것 같습니다'라고 말하면 효과적입니다."
                    },
                    '내로남불': {
                        behavior: "자신과 타인에게 다른 기준을 적용하는 이유?",
                        analysis: "이것은 '자기 봉사적 편향'과 '행위자-관찰자 편향'의 결합입니다. 자신의 행동은 상황적 요인으로, 타인의 행동은 성격적 요인으로 판단하는 인지적 왜곡이 작용합니다.",
                        solution: "객관적인 기준과 원칙을 문서화하고 참조하세요. '우리 팀의 지각 규정에 따르면...'과 같이 개인이 아닌 규칙에 초점을 두면 이중 잣대를 적용하기 어렵게 만들 수 있습니다."
                    },
                    '갑질지수': {
                        behavior: "미팅에서 다른 사람의 말을 자르고 본인만 말하는 이유?",
                        analysis: "이는 '자기 중요성 편향'과 권력에 의한 '탈억제 효과'와 관련이 있습니다. 높은 직위에 있을수록 타인의 의견을 경청하는 능력이 떨어지고, 자신의 생각만이 가치 있다고 착각하게 됩니다.",
                        solution: "미팅 전에 아젠다를 준비하고, 모든 참석자가 의견을 낼 수 있는 구조를 제안하세요. '각자 2분씩 아이디어를 공유하는 시간을 가지면 어떨까요?'와 같은 제안은 발언 균형을 맞추는 데 도움이 됩니다."
                    },
                    '책임회피': {
                        behavior: "자신의 실수를 인정하지 않는 이유?",
                        analysis: "이는 '자아 보호 기제'와 관련이 있습니다. 실수를 인정하는 것이 자신의 가치나 역량, 이미지에 타격을 줄 것이라는 두려움이 크게 작용합니다.",
                        solution: "비난이나 평가 없이 문제 해결에 초점을 맞추세요. '누구의 잘못인지보다는 어떻게 해결할 수 있을지 함께 생각해보면 좋겠습니다'라는 접근은 방어적 태도를 줄이는 데 효과적입니다."
                    },
                    '워라밸파괴': {
                        behavior: "자신과 타인의 시간 경계를 존중하지 않는 이유?",
                        analysis: "이는 일과 자아의 경계가 불분명한 사람들의 특징입니다. 자신의 가치를 전적으로 일에서 찾고, 다른 영역의 중요성을 인식하지 못합니다. 또한 자신이 희생하는 만큼 타인도 희생해야 공정하다는 왜곡된 인식을 가질 수 있습니다.",
                        solution: "처음부터 명확한 경계를 설정하고 일관되게 유지하세요. 퇴근 시간에 급한 업무를 요청하면 '내일 아침 첫 업무로 처리하겠습니다'라고 단호하게 대응하는 것이 중요합니다."
                    },
                    '무능력': {
                        behavior: "기본적인 업무 능력이 부족한데도 높은 자리에 있는 이유?",
                        analysis: "이는 '던닝-크루거 효과'와 관련이 있을 수 있습니다. 실제 능력이 부족한 사람일수록 자신의 능력을 과대평가하는 경향이 있어요. 또한 조직에서는 때로 정치적 기술이나 대인관계가 실무 능력보다 승진에 더 큰 영향을 미치기도 합니다.",
                        solution: "그의 강점(있다면)을 활용하고 약점은 팀이 보완하는 전략을 취하세요. 예를 들어, 외부 소통은 그가 담당하고 내부 실무는 팀이 주도하는 방식으로 역할을 분담하는 것이 효과적입니다."
                    },
                    '합리성': {
                        behavior: "대체로 합리적이지만 가끔 감정적으로 변하는 이유?",
                        analysis: "이는 '인지적 자원 고갈' 현상과 관련이 있습니다. 사람은 스트레스, 피로, 과부하 상태에서 합리적 사고 능력이 떨어지고 감정적 반응이 증가합니다.",
                        solution: "중요한 논의나 결정은 상사의 컨디션이 좋고 스트레스가 적은 시간대를 선택하세요. 아침 시간이나 주 초반이 일반적으로 더 좋은 결과를 얻을 수 있습니다."
                    }
                },
                // 기본 분석 (다른 항목이 부족할 때 사용)
                '기본분석': [
                    {
                        behavior: "직장에서 권력을 이용해 타인을 통제하려는 이유?",
                        analysis: "이는 심리학에서 '권력 보상 기제'라고 불리는 현상입니다. 권력을 행사할 때 뇌에서 도파민이 분비되어 일종의 중독 상태에 빠질 수 있어요. 또한 내면의 불안정함을 외부 통제로 보상받으려는 시도일 수도 있습니다.",
                        solution: "상사에게 선택권을 제공하되, 그 범위를 당신이 수용 가능한 옵션들로 제한하세요. '이 방식과 저 방식 중 어떤 것이 더 좋을까요?'라고 물어보면 통제감을 주면서도 당신의 주도권을 유지할 수 있습니다."
                    },
                    {
                        behavior: "업무 지시가 모호한 이유?",
                        analysis: "명확한 지시를 하면 결과물이 기대에 미치지 못할 경우 자신의 책임이 될 수 있기 때문이에요. 모호하게 지시하면 나중에 '이건 내가 원한 게 아니야'라고 말할 여지를 남길 수 있죠.",
                        solution: "대화의 요약본을 이메일로 보내세요. '오늘 논의한 내용을 제가 이해한 대로 정리했습니다. 맞는지 확인 부탁드립니다.' 이렇게 하면 명확한 기준점이 생깁니다."
                    },
                    {
                        behavior: "다른 사람의 아이디어를 무시하는 이유?",
                        analysis: "이는 '확증 편향'이라는 인지적 오류와 관련이 있습니다. 자신의 기존 생각과 맞지 않는 정보나 아이디어는 무시하거나 평가절하하는 경향이죠. 또한 다른 사람의 좋은 아이디어가 자신의 전문성을 위협한다고 느낄 수도 있습니다.",
                        solution: "아이디어를 제시할 때 상사의 과거 의견이나 가치관과 연결지어 설명해보세요. '지난번 회의에서 말씀하신 효율성 향상에 도움이 될 것 같아 이런 아이디어를 생각해봤습니다'처럼 말이죠."
                    }
                ]
            };

            // 보스 유형별 심리 분석 및 대처법 (유쾌한해석모드)
            const funMode = {
                '구시대의 꼰대 보스': [
                    {
                        behavior: "'우리 때는...'이라는 말을 입에 달고 사는 이유?",
                        analysis: "이 사람의 머리는 80년대에 멈춰있어요. 박물관에 전시해야 할 화석 같은 생각방식이죠. 새로운 아이디어가 들어오면 뇌가 자동으로 거부반응을 일으켜요. 마치 오래된 텔레비전처럼 새로운 방송 신호를 받아들이지 못하고 계속 같은 화면만 보여주고 있는 거예요. 그리고 과거의 좋았던 기억만 선택적으로 기억하는 특별한 능력이 있답니다.",
                        solution: "고개만 끄덕이세요. 공룡과 논쟁해봤자 이기는 사람 없어요. 앞에서는 '네네~' 하고 뒤에서는 현대적인 방식으로 일하면 됩니다. 공룡에게 스마트폰 사용법을 설명하려고 노력하지 마세요. 그냥 옆에서 조용히 사용하면 됩니다."
                    },
                    {
                        behavior: "사소한 절차와 형식에 집착하는 이유?",
                        analysis: "불필요한 절차를 강조함으로써 본인의 위엄을 챙기고 다른사람을 압박하려는 의도에요. 인생의 모든 것을 통제할 수 없으니 서류 한 장이라도 자기 마음대로 하고 싶은 거예요. 마치 장난감 병정처럼 모든 것이 딱딱 규칙대로 정해져 있어야 마음이 편한 거죠.",
                        solution: "형식은 완벽하게 맞춰주고, 내용은 마음대로 하세요. 껍데기만 멀쩡하게 보이면 속은 안 들여다본다는게 이런 사람들의 약점이에요. 양식에 목숨 거는 사람은 대체로 내용을 꼼꼼히 확인할 인내심이 없답니다."
                    },
                    {
                        behavior: "새로운 방식을 거부하는 심리적 이유?",
                        analysis: "새로운 것을 배우려면 뇌가 너무 아파요. 생각이 굳어서 새로운 연결을 만들 수가 없는 상태죠. 마치 오래된 고무줄처럼 더 이상 늘어나지 않아요. 그리고 자존심이 하늘을 찌르는 수준이라 '내가 몰랐던 게 있다'는 걸 인정하는 순간 자아가 무너질까봐 두려운 거죠. 그래서 '예전 방식이 최고'라는 신념에 필사적으로 매달려 있어요.",
                        solution: "새로운 방식을 '옛날 방식의 업그레이드'라고 속이세요. '과장님, 이건 사실 80년대 방식의 핵심을 살린 거예요!' 그러면 갑자기 관심 보입니다. 낡은 생각을 가진 사람도 자기 체면을 살려주면 새로운 것을 받아들이는 법이에요."
                    }
                ],
                '황제형 내로남불 보스': [
                    {
                        behavior: "본인에게는 관대하고 타인에게는 엄격한 이유?",
                        analysis: "이 사람은 태어날 때부터 세상의 중심이 자기라고 배웠어요. 양심이라는 걸 팔아서 자기애를 사들인 사람이죠. 자기 뇌는 자동으로 자신을 위한 변명을 만들어내는 특수 기능이 있어요. 그런데 남의 실수는 평생 기억하는 블랙리스트를 따로 관리해요. 공정함이라는 개념이 유전적으로 결핍된 사람입니다.",
                        solution: "그의 말을 기록해두세요. 나중에 비슷한 상황에서 '과장님이 지난번에 이렇게 말씀하셔서...' 하면 갑자기 기억상실증에 걸립니다. 비열한 사람을 상대할 때는 증거가 최고의 무기예요."
                    },
                    {
                        behavior: "모든 공은 자기 것으로 만들려는 이유?",
                        analysis: "학창시절에 관심과 인정을 충분히 못 받아서 지금 그걸 갈구하는 거예요. 칭찬이라는 영양분이 부족해서 남의 칭찬까지 빼앗아 먹는 인정 갈증 환자죠. 초등학교 때 친구들 앞에서 창피 당한 기억이 트라우마로 남아서, 이제는 자기가 인정받는 모습을 보여주려고 필사적인 거예요.",
                        solution: "미리 그에게 공을 돌리세요. '과장님 덕분에 이 아이디어가 생각났어요.' 그러면 뿌듯해서 당신을 가만히 놔둡니다. 인정에 굶주린 사람에게는 작은 칭찬 한 조각이 강력한 무기가 됩니다."
                    },
                    {
                        behavior: "자신의 말을 번복하는데도 스스로가 문제라 생각하지 않는 이유?",
                        analysis: "양심이 휴가를 영구적으로 떠난 상태예요. 낯짝이 쇠로 만들어져서 부끄러움을 느낄 신경세포가 아예 없어요. 금붕어보다 기억력이 나쁜 척하면서, 사실은 자기한테 불리한 기억만 지우는 선택적 기억 관리 능력자죠. 그 두꺼운 낯짝으로 하루에도 열 번씩 말을 바꿔도 전혀 부끄러워하지 않아요.",
                        solution: "모든 대화를 문서화하세요. 이메일, 메신저, 회의록 등 흔적을 남기세요. 이런 유형은 증거가 있어도 변명하지만, 적어도 다른 사람들 앞에서 그의 신뢰도는 떨어지게 됩니다. 그리고 그게 당신의 작은 승리예요."
                    }
                ],
                '권위형 갑질 보스': [
                    {
                        behavior: "부하 직원 앞에서 권위적으로 행동하는 이유?",
                        analysis: "집에서는 꼬리 내린 개처럼 살다가 회사에서만 호랑이 행세를 해요. 배우자한테 쩔쩔 기는 모습을 아무도 모르니까요. 실제로는 실력도 인성도 바닥인데, 큰소리로 위협해서 그걸 감추려는 거예요. 속이 텅 빈 북이 요란한 법이죠. 자신의 무능함을 감추기 위한 연기라고 볼 수 있어요.",
                        solution: "그의 허약한 자아를 키워주세요. '역시 과장님, 대단하십니다!' 이런 말에 약해요. 자존감이 바닥인 사람들은 거짓 칭찬에도 쉽게 녹아내립니다. 마치 사탕 하나면 진정되는 아이처럼요."
                    },
                    {
                        behavior: "감정 기복이 심하고 예측불가능한 이유?",
                        analysis: "감정 조절이라는 기본 인간 기능이 결여됐어요. 유치원생 수준의 감정 통제력을 가진 어른이죠. 자기 기분에 따라 세상을 판단하는 사람이라 그날 아침에 무슨 일이 있었느냐에 따라 당신의 운명이 결정돼요. 어쩌면 정신과 약을 먹어야 하는데 자존심 때문에 거부하고 있을지도 모릅니다.",
                        solution: "아이 다루듯 해보세요. '오늘 기분이 안 좋아 보이시네요, 무슨 일 있으셨어요?' 관심을 보이면 기분이 풀리는 경우가 많아요. 어른 몸에 어린이 마음을 가진 사람이니 그에 맞게 대응하는 게 현명해요."
                    },
                    {
                        behavior: "팀원 앞에서 누군가를 공개적으로 비난하는 이유?",
                        analysis: "관중 앞에서 공연하는 걸 좋아하는 열등한 영혼이에요. 다른 사람을 깎아내려야만 자신이 높아진다고 믿는 비열한 사고방식을 가졌죠. 학창시절에 왕따를 시키던 그 쾌감을 아직도 잊지 못하는 어른이 안 된 어른이에요. 타인의 고통이 주는 쾌감에 중독된 거죠.",
                        solution: "타겟이 되지 마세요. 눈에 띄지 않게 행동하고, 그의 비위를 맞춰주세요. 공개 처형은 본보기가 필요할 때 하는 거니까, 적당히 다른 사람이 타겟이 되게 하세요. 고문관 앞에서는 죄가 없어도 죄가 있는 척하는 게 살 길입니다."
                    }
                ],
                '책임회피형 보스': [
                    {
                        behavior: "실패할 땐 팀원 탓, 성공할 땐 자기 공으로 돌리는 이유?",
                        analysis: "양심이란 것이 선택사항인 사람이에요. 어릴 때 한 번도 제대로 된 책임감을 배운 적이 없는 거죠. 부모가 '우리 아이는 잘못이 없어'라며 키웠을 거예요. 엄마한테 혼날까봐 '내가 안 그랬어요, 쟤가 그랬어요!'라고 말하던 5살 마인드에서 멈췄어요. 그래놓고 자신이 얼마나 훌륭한지 착각하는 자아도취증까지 있습니다.",
                        solution: "모든 성공을 미리 그에게 돌리세요. '과장님 아이디어로 이렇게 해봤습니다'라고 하면 자기 공이라고 착각합니다. 모든 지시는 이메일로 받아서 증거를 남기세요. 비열한 사람을 상대할 때는 더 비열해져야 이길 수 있습니다."
                    },
                    {
                        behavior: "결정을 미루고 책임지기를 두려워하는 이유?",
                        analysis: "인생에서 가장 무서워하는 게 '책임'이에요. 결정하면 책임져야 하니까 아예 결정을 안 하는 거죠. 태생적으로 겁쟁이에 판단력마저 부족해서 이중으로 무능한 사람이에요. 평생 타인의 결정에 기생해왔고, 자기 힘으로 결정한 경험이 거의 없어요. 그냥 자리만 차지하고 있는 무늬만 관리자인 거죠.",
                        solution: "당신이 결정권을 가져가세요. '과장님 말씀대로 이렇게 하겠습니다'라고 하세요. 실제로 그가 뭐라고 했는지는 중요하지 않아요. 어차피 기억도 못해요. 무능한 상사에게는 이미 내린 결정인 것처럼 말하는 게 최선의 전략입니다."
                    },
                    {
                        behavior: "명확한 지시를 하지 않고 모호하게 말하는 이유?",
                        analysis: "본인도 뭘 원하는지 모르는 혼란의 덩어리예요. 머릿속이 안개처럼 뿌옇습니다. 생각이 명확하지 않으니 말도 명확할 수가 없는 거죠. 또는 의도적으로 책임회피를 위해 모호하게 말하는 거고요. 나중에 결과가 좋으면 '내 지시대로 했네', 나쁘면 '그렇게 하라고 한 적 없어'라고 빠져나갈 구멍을 미리 만들어두는 겁니다.",
                        solution: "대화 후에는 항상 정리 이메일을 보내세요. '오늘 논의한 내용 정리했습니다. 맞으면 확인 부탁드립니다.' 답장이 없으면 승인한 걸로 간주하고 진행하세요. 기록은 당신의 가장 강력한 보호막입니다."
                    }
                ],
                '노예사냥꾼 보스': [
                    {
                        behavior: "개인 시간을 존중하지 않는 심리적 배경은?",
                        analysis: "이 사람의 인생에는 '회사'라는 한 가지 정체성밖에 없어요. 집에 가면 대화할 가족도, 즐길 취미도 없는 불쌍한 영혼이죠. 인생의 즐거움이라곤 일밖에 모르는 사람이라 다른 사람도 그럴 거라고 착각해요. 자기처럼 퇴근 후에도 할 일 없는 사람이라 생각하니 당연히 회사에 있어야 한다고 믿는 거죠.",
                        solution: "처음부터 확고한 경계선을 그으세요. 선례를 만들면 끝없이 당하게 됩니다. '죄송하지만 6시 이후에는 가족 돌봄 시간입니다' 같은 핑계를 대고 절대 안 움직이세요. 처음에 약하게 나오면 평생 노예로 살게 됩니다."
                    },
                    {
                        behavior: "끊임없이 업무량을 늘리고 긴급함을 강조하는 이유?",
                        analysis: "시간 관리와 계획성이라는 기본 능력이 결여된 사람이에요. 모든 걸 미루다가 마감 직전에 허둥지둥 처리하는 습관이 있죠. 그리고 자기 무능함을 남들에게 떠넘기는 책임전가의 달인이고요. '급하다, 지금 해라'라고 압박하는 건 자신의 무계획성을 감추기 위한 술수입니다.",
                        solution: "우선순위를 명확히 요구하세요. '이것, 저것, 그것 중에 어떤 게 가장 중요한가요?' 선택하게 만들면 자기모순에 빠져서 잠시 멈춥니다. 그리고 긴급하다는 업무일수록 더 천천히 처리하세요. 위급한 상황을 자꾸 만드는 사람에게는 위급함을 느끼지 않는 모습을 보여주는 게 최선입니다."
                    },
                    {
                        behavior: "회사 행사나 회식을 강제하는 심리적 이유?",
                        analysis: "다른 사람의 시간까지 통제하고 싶은 권력욕이 있어요. 사생활이란 개념 자체가 없는 사람이죠. 아마도 어릴 때 부모님이 모든 걸 감시하고 통제했을 가능성이 높아요. 그래서 그 패턴을 직장에서 반복하는 거예요. 자신이 당한 통제와 억압을, 이제는 자신이 다른 사람에게 가하고 있는 거죠.",
                        solution: "가끔은 참석하고, 중요한 개인적 일정은 확고하게 거절하세요. 모든 것을 거부하면 표적이 되고, 다 참석하면 노예가 됩니다. 70%는 참석하고 30%는 거절하는 전략이 효과적이에요. 참석할 때는 얼굴만 비추고 빨리 도망치는 게 현명합니다."
                    }
                ],
                '무능력형 혼돈 보스': [
                    {
                        behavior: "결정을 못 내리고 책임을 전가하는 심리적 이유?",
                        analysis: "타고난 지능과 판단력이 심각하게 부족한 사람이에요. 복잡한 상황을 이해하고 분석하는 능력이 없죠. 자신의 무능함을 어렴풋이 알기 때문에, 잘못된 결정으로 비난받는 게 두려워서 아예 결정을 회피해요. 그리고 그 무능함을 감추기 위해 남 탓을 하는 거죠. 무능한 사람이 살아남는 가장 흔한 방법입니다.",
                        solution: "결정을 대신 해주고 그가 한 것처럼 포장해주세요. '과장님 의견대로 진행했더니 정말 좋은 결과가 나왔어요!'라고 해주면 좋아해요. 무능한 사람일수록 허영심이 강하니 그걸 이용하세요. 그의 자존심을 세워주면서 실제로는 당신이 주도권을 가져가는 거예요."
                    },
                    {
                        behavior: "전문 지식 없이 높은 자리에 오른 이유?",
                        analysis: "실력보다 처세술이 뛰어난 거예요. 윗사람 비위 맞추기의 달인인 거죠. 아부의 천재라고 볼 수 있어요. 또는 그냥 좋은 집안에 태어났거나, 빽이 있거나, 운이 좋았을 수도 있고요. 이 세상은 실력만으로 올라가는 곳이 아니니까요. 세습 자본주의의 전형적인 산물이라고 볼 수 있어요.",
                        solution: "그의 '가짜 전문성'을 건드리지 마세요. 대신 그를 통해 윗선과 연결되는 파이프라인으로 활용하세요. 그의 유일한 강점은 인맥이니, 그걸 이용하세요. '과장님께서 대표님과 골프 치실 때 이 안건 좀 말씀해주시면 안 될까요?'라고 부탁하면 효과적이에요."
                    },
                    {
                        behavior: "기본적인 업무 원리도 이해하지 못하는 이유?",
                        analysis: "태어날 때부터 이해력 유전자가 누락된 것 같아요. 평범한 사람이 한 번에 이해하는 걸 열 번 설명해도 못 알아듣는 특별한 능력이 있죠. 이해력과 학습능력이 심각하게 부족한 거예요. 학교에서도 항상 꼴등이었을 가능성이 높아요. 그런데도 여기까지 올라온 건 정말 신기한 일이죠.",
                        solution: "3살 아이에게 설명하듯 초간단하게 말해주세요. 전문용어는 절대 쓰지 말고, '이건 이렇고, 저건 저래요'처럼 가장 기본적인 문장으로 설명하세요. 그래도 안 되면 포기하고 알아서 처리하세요. 뇌의 용량이 부족한 사람에게 복잡한 개념을 설명하는 건 시간 낭비예요."
                    }
                ],
                '복합형 악몽 보스': [
                    {
                        behavior: "다양한 문제 행동을 복합적으로 보이는 이유?",
                        analysis: "여러 인성 결함이 동시에 발현된 진귀한 사례예요. 마치 모든 나쁜 성격의 집합체 같죠. 아마 어릴 때 심한 트라우마가 있었거나, 부모의 잘못된 양육 방식 때문일 수도 있어요. 어쨌든 정상적인 인간관계가 불가능할 정도로 인성이 파괴된 상태입니다. 정상인이라면 도저히 저런 행동을 할 수 없어요.",
                        solution: "이런 유형은 그냥 피하세요. 고치려고 노력하지 말고 당신의 정신 건강을 지키는 데 집중하세요. 이직을 준비하는 게 최선이에요. 이런 사람 밑에서 오래 일하면 당신도 정신적으로 피해를 입게 됩니다. 도망치는 게 최고의 전략이에요."
                    },
                    {
                        behavior: "변덕스럽고 예측할 수 없는 행동의 원인?",
                        analysis: "감정 조절 능력이 심각하게 부족해요. 마치 어른의 몸에 어린아이의 감정 조절 시스템이 들어간 것 같죠. 또한 의도적으로 당신을 불안하게 만드는 측면도 있어요. 예측불가능하면 사람들이 더 조심하고 복종하게 되거든요. 독재자들이 자주 쓰는 심리 전략과 비슷해요.",
                        solution: "매일 아침 '오늘의 상사 기분' 체크리스트를 만드세요. 표정, 말투, 걸음걸이를 보고 오늘의 지뢰밭을 예측하는 거예요. 그리고 동료들과 정보를 공유하세요. '오늘 기분 최악이니 조심해'라는 신호 체계를 만들면 서로 도움이 됩니다."
                    },
                    {
                        behavior: "극단적인 감정 기복을 보이는 이유?",
                        analysis: "자기 감정을 전혀 통제하지 못하는 사람이에요. 어린아이처럼 느끼는 그대로 표출하죠. 감정 조절이라는 기본적인 어른의 능력이 없는 거예요. 또는 정말로 정신적인 문제가 있을 수도 있어요. 치료가 필요한데 자존심 때문에 거부하는 경우가 많죠.",
                        solution: "감정의 롤러코스터에 함께 타지 마세요. 이성적인 관찰자로 남아있어야 해요. 화나면 '네, 이해합니다'라고 공감해주고, 기분 좋을 때는 중요한 부탁을 하세요. 그리고 언제든 돌변할 수 있다는 걸 항상 명심하세요. 좋은 날을 활용해 휴가 신청 같은 중요한 일을 처리하는 게 현명해요."
                    }
                ],
                '권위주의형 복합 보스': [
                    {
                        behavior: "꼰대력과 갑질이 동시에 강한 이유?",
                        analysis: "인생에서 처음으로 권력을 맛본 사람이에요. 어디서나 무시당하던 사람이 작은 권력이라도 생기니까 폭주하는 거죠. 어릴 때 심하게 억압받았던 사람이 이제는 자기가 그 억압을 다른 사람에게 가하고 있어요. 마치 괴롭힘을 당하던 아이가 커서 다른 아이를 괴롭히는 것과 같은 악순환이죠.",
                        solution: "겉으로는 복종하고 속으로는 동요하지 마세요. 이런 사람들은 당신의 진심 따위 관심 없어요. 그냥 복종하는 척만 하면 돼요. 그리고 서서히 자기 영역을 확보하세요. 마치 개구리를 서서히 데우는 물처럼, 자율성을 조금씩 키워나가는 전략이 필요합니다."
                    },
                    {
                        behavior: "과거의 방식을 고집하면서 본인은 예외를 적용하는 이유?",
                        analysis: "타고난 뻔뻔함의 대가예요. 낯짝에 철판을 깔았다고 봐야죠. 남들에게는 엄격한 규칙을 요구하면서 자기는 특별하다고 진심으로 믿어요. 선민사상에 빠져있는 거죠. 과거 방식을 고집하는 건 그게 자기한테 유리하기 때문이에요. 낡은 시스템에서는 윗사람이 항상 이득을 보니까요.",
                        solution: "그의 꼰대 발언을 몰래 기록해두세요. 나중에 그가 예외를 적용할 때 '과장님께서 평소에 강조하시던 원칙이 있잖아요'라고 하면 잠시 멈칫해요. 자기모순에 빠지면 혼란스러워하는 틈을 노리세요."
                    },
                    {
                        behavior: "회의에서 다른 사람 의견은 무시하는 이유?",
                        analysis: "듣는 척만 하고 실제로는 전혀 듣지 않아요. 귀는 그냥 장식품이고, 자기 의견만 중요하다고 생각해요. 회의 전에 이미 다 결정해놓고 요식행위로 회의하는 거죠. 자기 말을 들어줄 관객이 필요한 거예요. 혼자 중얼거리면 미친 사람 취급받으니까 회의라는 형식을 빌린 독백쇼를 하는 겁니다.",
                        solution: "그의 의견을 확대 재생산하세요. '과장님 말씀처럼 이렇게 하면 어떨까요?'라고 하면서 실은 당신의 아이디어를 슬쩍 끼워넣으세요. 그럼 자기 생각이라고 착각하고 채택할 가능성이 높아요. 자존심 강한 사람은 자기 아이디어라고 믿게 만드는 게 승리의 지름길입니다."
                    }
                ],
                '노동착취형 복합 보스': [
                    {
                        behavior: "워라밸 파괴와 갑질이 결합된 이유?",
                        analysis: "옛날 군대식 문화에 세뇌된 사람이에요. '나도 이렇게 고생했으니 너도 고생해야 한다'는 왜곡된 정의감을 가졌죠. 게다가 본인 인생에 회사 말고는 아무것도 없어요. 가족과의 대화도, 취미도, 친구도 없는 불쌍한 영혼이라 다른 사람도 그럴 거라고 착각해요. 타인의 시간과 행복에 대한 기본적인 존중심이 결여된 사람이죠.",
                        solution: "처음부터 확실한 경계선을 그으세요. 한 번 넘어가면 끝없이 당하게 됩니다. 퇴근 시간에는 '중요한 약속이 있다'며 단호하게 거절하는 연습을 하세요. 약한 모습을 보이면 더 심하게 물고 늘어지는 유형이니 처음부터 단호하게 대응해야 합니다."
                    },
                    {
                        behavior: "퇴근 시간에 '야, 이거 오늘 안에 처리해'라며 명령조로 업무를 던지는 이유?",
                        analysis: "당신을 인간이 아니라 기계로 보는 거예요. 감정이나 사생활이 있는 존재가 아니라 24시간 작동하는 로봇으로 여기는 거죠. 타인을 도구로만 생각하는 비인간적 사고방식을 가진 사람이에요. 또는 자기 계획성 부족을 남에게 떠넘기는 무책임한 인간일 수도 있고요. 아니면 타인의 고통을 즐기는 사디스트 성향이 있을 수도 있어요.",
                        solution: "퇴근 30분 전에는 화장실이나 회의실에 숨어있세요. 아니면 미리 '오늘 병원 예약이 있어서' 같은 핑계를 준비해두세요. 갑작스런 공격에 맞서려면 방패가 필요해요. 때로는 전화기를 꺼버리는 것도 방법이죠. '배터리가 나갔어요'만큼 반박하기 어려운 변명은 없습니다."
                    },
                    {
                        behavior: "회식은 강제 참석이고, 밤늦게까지 술자리를 이어가는 이유?",
                        analysis: "정상적인 대화 능력이 부족해서 술의 힘을 빌려야만 소통이 가능한 사람이에요. 평소에는 대화를 못 해서 술자리에서라도 권위를 과시하고 싶은 거죠. '내가 술자리를 주도한다 = 내가 권력자다'라는 단순한 공식으로 살아가는 거예요. 알코올 중독이 의심될 정도로 술에 의존하는 불쌍한 사람입니다.",
                        solution: "초반에 건강 문제로 술을 못 마신다고 선언하세요. '약 먹는 중이라' 또는 '알러지가 있어서'라는 핑계가 효과적이에요. 그리고 2시간쯤 참석하다가 '급한 전화가 왔다'며 빠져나오는 비상 탈출 계획을 세우세요. 아예 안 나가면 미움을 사니 얼굴만 보이고 빠져나오는 전략이 필요합니다."
                    }
                ],
                '무책임형 복합 보스': [
                    {
                        behavior: "책임회피와 무능력이 합쳐진 이유?",
                        analysis: "태생적인 겁쟁이에 실력까지 없는 최악의 조합이에요. 인생에서 단 한 번도 어려운 결정을 내려본 적이 없고, 자신의 선택에 책임져본 경험도 전무한 사람이죠. 마치 온실 속 화초처럼 편안하게만 자라서 작은 어려움도 해결할 능력이 없어요. 그러면서도 자존심만큼은 하늘을 찌르니 실수를 절대 인정하지 않는 거죠.",
                        solution: "모든 대화를 문서화하고, 그가 결정할 여지를 주지 마세요. '과장님 말씀대로 이렇게 진행하겠습니다'라고 하면서 사실은 당신이 판단한 방식대로 끌고 가세요. 무능하고 책임감 없는 사람에게 결정권을 주면 항상 재앙만 초래합니다."
                    },
                    {
                        behavior: "중요한 의사결정에서 '너가 더 잘 알 것 같은데, 너가 판단해'라고 말하는 이유?",
                        analysis: "결정 능력이 선천적으로 결핍되었어요. 판단력이 떨어지는데다 잘못된 결정으로 비난받는 게 극도로 두려운 거죠. 머릿속이 텅 비어서 복잡한 상황을 분석할 능력이 전혀 없어요. 관리자로서의 자질이 0점인데 어쩌다 그 자리에 앉게 된 거죠. 전형적인 '무능력자가 승진하는 조직'의 산물입니다.",
                        solution: "그의 무능함을 역이용하세요. '저한테 맡겨주셔서 감사합니다'라고 하고 원하는 대로 진행하세요. 나중에 문제가 생기면 '과장님께서 저한테 판단을 맡기셨잖아요'라고 하면 할 말이 없어요. 무능한 상사 밑에서 일하는 유일한 장점은 당신이 더 많은 경험을 쌓을 수 있다는 것뿐이에요."
                    },
                    {
                        behavior: "회의에서는 아무 의견도 내지 않다가 나중에 결과물을 보고 모든 것을 다시 하게 만드는 이유?",
                        analysis: "두뇌 처리 속도가 거북이 수준이라 실시간으로 의견을 내지 못해요. 회의 중에는 무슨 소리인지 이해하기에도 벅차서 입을 다물고 있다가, 며칠 후에야 겨우 이해했을 때 '나도 중요한 사람이다'라는 걸 증명하기 위해 트집을 잡는 거예요. 무능함을 감추기 위해 쓰는 가장 흔한 전술이죠.",
                        solution: "회의 때 의도적으로 그에게 의견을 물어보세요. '과장님 생각은 어떠세요?'라고 물으면 대부분 얼버무려요. 그러면 '과장님께서 이런 방향으로 생각하시는 것 같습니다'라고 회의록에 기록해두세요. 나중에 딴소리하면 이 기록을 보여주면 됩니다. 무능한 사람은 증거 앞에서 약해집니다."
                    }
                ],
                '꼰대황제형 복합 보스': [
                    {
                        behavior: "꼰대력과 내로남불이 결합된 이유?",
                        analysis: "완벽한 독재자 기질을 타고났어요. 자기중심적 세계관과 구시대적 사고방식이 결합된 거죠. 자신은 특별하고 다른 사람은 규칙을 따라야 한다는 왜곡된 생각에 빠져 있어요. 평생 자기 위주로 살아와서 타인을 배려할 줄 모르는 사람이죠. 어릴 때부터 너무 많이 받아서 나누는 법을 배우지 못했거나, 너무 없이 자라서 양보할 줄 모르는 거예요.",
                        solution: "겉으로는 예의바르게 복종하되, 속으로는 '이 사람의 심리가 정말 흥미롭네'라고 관찰자 시점을 유지하세요. 그리고 '과장님 말씀이 항상 맞았어요'라고 아부하면서 실제로는 당신이 원하는 방향으로 상사를 조종하는 기술을 키우세요. 독재자는 자아가 큰 만큼 조종하기 쉽습니다."
                    },
                    {
                        behavior: "'우리 때는 이렇게 했어'라며 과거 방식을 고집하면서 본인은 '나는 직급이 있으니까 다르지'라고 특별 대우를 요구하는 이유?",
                        analysis: "양심이 휴가를 영구적으로 떠난 상태예요. 부끄러움을 느낄 수 있는 세포가 한 개도 없는 사람이죠. 자기모순을 인식하기엔 지능이 부족하고, 인식하더라도 부끄러워할 인간성이 결여됐어요. 권력을 가진 사람들의 특징인데, 권력은 뇌를 녹이는 마약 같아서 판단력과 양심을 파괴합니다.",
                        solution: "그의 말을 녹음하거나 기록해두세요. '과장님께서 저번에 이런 원칙을 강조하셨는데...'라고 말하면 갑자기 기억상실증에 걸려요. 상사의 이중잣대를 은근히 지적하면 잠시 멈칫하는 순간이 오는데, 그 틈을 놓치지 마세요. 물론 곧 정신 차리고 변명하겠지만, 그 짧은 승리의 순간이라도 맛보는 게 정신 건강에 좋습니다."
                    },
                    {
                        behavior: "회식에서 '요즘 애들은 예의가 없어'라고 한탄하면서 본인은 다른 사람 이야기를 끊고 자기 무용담만 늘어놓는 이유?",
                        analysis: "타인에 대한 공감 능력이 완전히 결여된 사람이에요. 다른 사람은 그냥 자기 인생의 배경과 소품 정도로 생각하는 거죠. 그리고 자기 목소리를 너무 사랑해요. 마치 거울을 보며 자위하듯 자기 이야기를 하면서 혼자 황홀경에 빠져요. 나르시시즘의 극치를 보여주는 인간이죠.",
                        solution: "그의 무용담을 조용히 참고 끝나면 '정말 대단한 이야기네요'라고 한 마디 던져주세요. 굳이 맞받아칠 필요 없어요. 그냥 웃으면서 견디다가 집에 가서 스트레스를 푸는 게 현명해요. 이런 사람은 고치려고 해도 안 고쳐져요. 당신의 에너지를 아끼세요."
                    }
                ],
                '이중 스트레스형 복합 보스': [
                    {
                        behavior: "두 가지 이상의 문제적 특성이 결합된 이유?",
                        analysis: "여러 가지 인성 결함이 한 몸에 모인 희귀한 사례예요. 성격이 완전히 망가진 데다가 지능도 낮고 자기애는 극도로 강해서 최악의 조합이 된 거죠. 사회생활 하면서 온갖 상처와 트라우마를 받았는데, 제대로 해소하지 못하고 모두 쌓아두다가 직원들에게 푸는 거예요. 자기 인생의 불행을 모두 당신에게 전가하는 거죠.",
                        solution: "다양한 문제에는 다양한 대응이 필요해요. 꼰대 모드일 때는 '네네~' 전략, 갑질 모드일 때는 '무시' 전략, 책임회피 모드일 때는 '증거 수집' 전략을 쓰는 식으로 상황별 대응책을 마련하세요. 그리고 퇴사를 준비하세요. 이런 상사 밑에서 오래 일하면 당신의 정신 건강이 심각하게 손상됩니다."
                    },
                    {
                        behavior: "상황과 사람에 따라 평가 기준이 달라지는 이유?",
                        analysis: "머릿속에 일관된 기준이라는 게 존재하지 않아요. 논리적 사고 능력이 부족해서 모순된 행동을 하고 있다는 걸 스스로 인식하지 못하는 거죠. 또는 그냥 기분에 따라 사는 사람이고요. 감정이 판단을 지배하는 원시적인 뇌 구조를 가진 사람이에요. 사실 대부분의 나쁜 관리자가 이런 유형에 속합니다.",
                        solution: "그 사람의 패턴을 파악하세요. '이럴 때는 이런 기준, 저럴 때는 저런 기준'이라는 규칙을 발견하면 미리 대비할 수 있어요. 그리고 항상 가장 엄격한 기준으로 일하세요. 그래야 어떤 기준을 적용해도 살아남을 수 있어요. 상사가 변덕쟁이라면 최악의 상황에 맞춰 준비하는 게 생존 전략입니다."
                    },
                    {
                        behavior: "업무 방식과 개인 시간 모두에 간섭하는 이유?",
                        analysis: "타고난 통제 강박증 환자예요. 모든 걸 자기 마음대로 하고 싶은 거죠. 다른 사람의 자유와 자율성을 인정한다는 개념 자체가 없어요. 아마도 어릴 때 부모님께 강한 통제를 받았거나, 반대로 너무 방임되어 자라서 극단적인 통제욕을 발달시킨 걸 수도 있어요. 또는 그냥 타고난 사이코패스일 가능성도 배제할 수 없고요.",
                        solution: "업무는 어쩔 수 없이 그의 방식대로 하되, 개인 시간은 절대 양보하지 마세요. '업무 시간에는 따를게요, 하지만 제 시간은 제 겁니다'라는 원칙을 세우세요. 한 번이라도 개인 시간을 침해당하면 그 다음부터는 끝없이 당하게 됩니다. 경계선 긋기는 처음이 가장 중요해요."
                    }
                ],
                '약한 스트레스형 보스': [
                    {
                        behavior: "한 가지 문제적 특성이 두드러지지만 심각하지는 않은 이유?",
                        analysis: "모든 사람이 약간의 문제는 가지고 있잖아요. 이 사람도 조금 이상한 것뿐이에요. 정상과 비정상의 경계선에 살고 있는 거죠. 하나의 문제점은 있지만 다른 부분은 그럭저럭 괜찮아서 전체적으로는 참을 만한 수준인 거예요. 심각한 인성 결함까지는 아니고, 한 가지 성격적 문제가 있는 정도랍니다.",
                        solution: "그 한 가지 문제점만 피해서 지내세요. 완벽한 상사는 없으니 약간의 이상한 점은 그냥 개성으로 받아들이는 게 좋아요. 그 특정 문제에 대한 맞춤형 대응책만 마련해두면 크게 스트레스받지 않고 지낼 수 있어요. 하나의 문제만 피해가면 되는 건 상대적으로 행운이에요."
                    },
                    {
                        behavior: "대체로 괜찮다가 가끔 이상한 행동을 하는 이유?",
                        analysis: "특정 상황에서만 촉발되는 트라우마가 있는 것 같아요. 대부분의 경우 정상적으로 행동하다가, 특정 스트레스나 상황에서만 이상 행동을 보이는 거죠. 마치 평소엔 얌전한 강아지가 특정 소리에만 짖어대는 것처럼요. 모든 사람이 특정 상황에서 방어기제가 발동하면 이성적 판단이 흐려지기 마련이에요.",
                        solution: "그 사람의 트리거(방아쇠)를 파악하세요. 무엇이 그를 이상하게 만드는지 알면 그 상황을 피할 수 있어요. 특정 주제, 특정 상황, 특정 스트레스 요인이 있을 테니, 그걸 파악하고 피해가는 전략을 세우세요. 지뢰밭에서 지뢰 위치만 알면 안전하게 걸을 수 있잖아요?"
                    },
                    {
                        behavior: "일관성이 부족하여 팀원들이 방향을 잡기 어려운 이유?",
                        analysis: "기억력과 논리력에 약간의 문제가 있어요. 어제 한 말을 오늘 까먹거나, 같은 상황에서도 다르게 판단하는 거죠. 일관성을 유지하려면 논리적 사고력이 필요한데, 그게 약간 부족한 상태예요. 머릿속 정리정돈 능력이 떨어져서 생각이 자주 바뀌는 거라고 볼 수 있죠.",
                        solution: "모든 지시와 피드백을 기록해두세요. '지난번에 이렇게 말씀하셨는데, 이번에는 저렇게 말씀하시네요. 어떤 방향으로 가면 될까요?'라고 물어보세요. 기록으로 확인시켜주면 대부분 일관된 지시를 내리게 됩니다. 기억력이 좋지 않은 사람은 증거를 보여주는 게 가장 효과적이에요."
                    }
                ],
                '합리적 평범 보스': [
                    {
                        behavior: "대체로 합리적인 판단을 하지만 가끔 감정적으로 변하는 이유?",
                        analysis: "그냥 평범한 인간이라서 그래요. 로봇이 아니라 감정이 있는 사람이니까요. 누구나 스트레스나 피로가 쌓이면 평소보다 감정적으로 변하기 마련이에요. 완벽한 사람은 없고, 모두가 가끔은 자신의 감정에 휘둘릴 때가 있죠. 그래도 대체로 이성적인 사람이니 금방 회복하는 편이에요.",
                        solution: "그냥 이해해주세요. 당신도 가끔 감정적으로 변하잖아요. 서로 이해하면 더 좋은 관계를 유지할 수 있어요. 감정이 격해진 순간에는 중요한 일을 논의하지 말고, 나중에 진정됐을 때 다시 이야기하세요. 대체로 합리적인 사람은 감정이 가라앉으면 다시 이성적으로 돌아옵니다."
                    },
                    {
                        behavior: "소통이 가끔 부족하게 느껴지는 이유?",
                        analysis: "자신이 알고 있는 정보나 생각을 다른 사람도 알 거라고 착각하는 거예요. '이건 다 알텐데 뭐'라는 생각으로 충분한 설명을 안 하는 거죠. 마치 퍼즐을 완성한 사람이 조각 몇 개만 보여주고 전체 그림을 맞추라고 하는 것과 비슷해요. 그냥 자기 입장에서만 생각하는 습관이 있는 거죠.",
                        solution: "적극적으로 질문하세요. '이 부분이 명확하지 않은데 더 설명해주실 수 있을까요?'라고 물어보면 대부분 잘 설명해줘요. 대화 후에는 정리해서 확인하는 것도 좋아요. '제가 이해한 게 맞나요?' 소통은 쌍방향이니 당신도 적극적으로 노력해야 더 좋은 결과를 얻을 수 있어요."
                    },
                    {
                        behavior: "피드백을 직설적으로 주는 이유?",
                        analysis: "효율을 중시하는 성격이라 말을 꾸미는 데 시간 쓰는 걸 낭비라고 생각해요. 나쁜 의도는 전혀 없어요. 그저 직설적인 성격이라 그렇죠. 마음은 따뜻한데 표현 방식이 서툰 거예요. 감정적인 쿠션을 깔아주는 사회적 기술이 약간 부족한 거죠. 하지만 기본적으로는 선의를 가진 사람이에요.",
                        solution: "개인적으로 받아들이지 마세요. 내용에 집중하고 감정은 분리하세요. 피드백이 불명확하면 '조금 더 구체적인 개선점을 알려주시면 도움이 될 것 같아요'라고 요청하세요. 직설적인 사람들은 대부분 논리적 접근을 좋아하니, 감정적으로 대응하지 말고 이성적으로 대화하는 게 효과적이에요."
                    }
                ],
                '무난한 일상형 보스': [
                    {
                        behavior: "특별히 문제가 되는 특성이 없이 평범한 이유?",
                        analysis: "천문학적 확률을 뚫고 정상적인 상사를 만난 거예요. 로또에 당첨된 것보다 더 희귀한 경우죠. 제대로 된 인성 교육을 받고 자란 사람이 관리자가 된 드문 사례입니다. 대부분의 직장인은 평생 이런 상사를 만나지 못하고 퇴직한다는 걸 생각하면 정말 운이 좋은 거예요.",
                        solution: "이 행운을 소중히 여기세요. 좋은 상사는 귀한 자원이니 감사함을 표현하고 좋은 관계를 유지하세요. 그리고 다른 사람들에게 자랑하지 마세요. 질투 받아요. 주변 동료들은 다 미친 상사 밑에서 고생하고 있을 테니까요. 그냥 조용히 행복을 즐기세요."
                    },
                    {
                        behavior: "업무 지시가 명확하고 비합리적인 요구를 하지 않는 이유?",
                        analysis: "정상적인 지능과 인성을 가지고 있어서 그래요. 가정교육과 학교교육을 제대로 받고 자란 사람이죠. 사실 이게 기본인데, 직장에서는 너무 희귀해서 특별해 보이는 거예요. 아무리 봐도 그냥 정상적인 사람이 정상적인 행동을 하는 건데, 주변이 다 이상하니까 이 사람이 특별해 보이는 겁니다.",
                        solution: "이 상황을 최대한 활용하세요. 무리한 요구를 안 한다고 일을 안 해도 된다는 뜻은 아니에요. 오히려 더 책임감 있게 행동해서 이 좋은 관계를 유지하세요. 좋은 상사 밑에서 성장할 기회를 충분히 활용하고, 나중에 당신이 관리자가 되면 그 모습을 본받으세요."
                    },
                    {
                        behavior: "개인 시간을 존중하고 팀원의 성장을 지원하는 이유?",
                        analysis: "인간의 기본적인 존엄성과 권리를 이해하는 사람이에요. 경영학에서 배운 리더십을 실제로 실천하는 드문 사례죠. 자기 자신도 일과 삶의 균형이 중요하다고 생각하니까 다른 사람의 시간도 존중하는 거예요. 그리고 타인의 성장이 결국 팀과 조직의 성장으로 이어진다는 기본적인 원리를 아는 지혜를 가졌어요. 실은 어려운 게 아니라 당연한 건데, 그걸 실천하는 사람이 너무 적다 보니 특별해 보이는 거죠.",
                        solution: "이런 환경을 최대한 활용해서 성장하세요. 개인 시간을 존중해주니까 자기 계발에 투자하고, 성장을 지원해주니까 새로운 기술을 배우는 데 집중하세요. 좋은 환경에서 최대한의 성과를 내는 게 중요합니다. 그리고 이런 문화를 주변에 퍼뜨리는 데 동참하세요. 당신이 나중에 관리자가 됐을 때 이 모델을 본받아 더 나은 직장 문화를 만드는 데 기여할 수 있어요."
                    }
                ],
                // 스탯별 분석 (스탯 기반으로 항목 추가)
                '스탯분석': {
                    '꼰대력': {
                        behavior: "과거 경험만 강조하는 이유?",
                        analysis: "머리 속에 있는 모든 생각이 80년대에 굳어버렸어요. 두뇌가 오래된 앨범처럼 과거에만 머물러 있는 거죠. 새로운 정보를 받아들일 능력이 전혀 없어요. 그리고 선택적 기억 장애가 있어서 과거의 좋았던 것만 기억하고 나빴던 것은 싹 지웠어요. '옛날이 좋았지'라는 착각에 빠져 있는 거예요. 사실 옛날은 지금보다 훨씬 힘들고 불편했는데, 그건 다 잊어버리고 좋은 기억만 간직한 채 현재를 폄하하는 거죠.",
                        solution: "고개만 끄덕이세요. 화석과 논쟁하는 건 시간 낭비예요. '네네~' 하면서 속으로는 '오케이 부머'를 외치세요. 그리고 뒤에서는 현대적인 방식으로 일하면 됩니다. 당신이 공룡에게 스마트폰 사용법을 가르칠 필요는 없어요. 그냥 옆에서 조용히 사용하면 됩니다."
                    },
                    '내로남불': {
                        behavior: "자신과 타인에게 다른 기준을 적용하는 이유?",
                        analysis: "타고난 뻔뻔함의 대가예요. 자기 얼굴에 철판을 깔고 태어난 거죠. 양심이라는 개념이 유전적으로 결여되어 있어서 자기 모순을 느끼지 못해요. 또는 느껴도 부끄러움을 모르는 거고요. 자기중심적 사고가 너무 강해서 '나는 특별하니까 예외가 될 수 있다'고 진심으로 믿는 거예요. 자기 맘대로 세상의 규칙을 바꾸는 신기한 능력의 소유자죠.",
                        solution: "그의 모순을 조용히 기록해두세요. 나중에 적절한 타이밍에 '지난번에 이렇게 말씀하셨는데...'라고 은근히 지적하면 효과적이에요. 자기모순에 빠지면 잠시 멈칫하거든요. 물론 곧 또 까먹겠지만, 그 순간만큼은 작은 승리를 맛볼 수 있어요. 양심이 없는 사람도 창피함은 느낄 수 있으니까요."
                    },
                    '갑질지수': {
                        behavior: "미팅에서 다른 사람의 말을 자르고 본인만 말하는 이유?",
                        analysis: "자기 목소리에 병적으로 반해있어요. 남의 말은 듣고 싶지 않고 자기 말만 하고 싶은 거죠. 귀는 달고 다니는 장식품이고 입만 활발하게 사용해요. 집에서는 아무도 들어주지 않아서 회사에서라도 존재감을 드러내고 싶은 거예요. 다른 사람의 생각에는 전혀 관심이 없고, 남들은 그저 자기 독백의 청중일 뿐이죠. 자기중심적 사고가 극단적으로 발달한 사람입니다.",
                        solution: "그가 말 끊을 때 '제 말이 끝나지 않았습니다'라고 정중하게 말해보세요. 주변 사람들 앞에서 그러면 대개 잠시 멈칫해요. 꼭 필요한 말은 미팅 전후로 다른 사람들에게 전달해두는 것도 좋은 방법이에요. 독설가와 대화하는 건 소모적이니, 그의 에너지가 다 소진될 때까지 기다렸다가 중요한 이야기를 하는 게 효과적입니다."
                    },
                    '책임회피': {
                        behavior: "자신의 실수를 인정하지 않는 이유?",
                        analysis: "자존심이 하늘을 찌르는데 실력은 땅을 기는 수준이라 그 괴리를 감당할 수 없는 거예요. 실수를 인정하면 그 취약한 자아가 와르르 무너질까봐 두려운 거죠. 어릴 때부터 실수하면 심하게 혼났을 가능성이 높아요. 그래서 무의식적으로 '내 잘못이 아니야'라는 방어기제가 발동하는 거고요. 책임지는 법을 배운 적이 없는 철없는 어른이라고 볼 수 있어요.",
                        solution: "모든 대화를 기록해두세요. 증거가 없으면 '내가 그런 적 없어'라고 뻔뻔하게 부인할 거예요. 이메일, 메시지, 회의록 같은 흔적을 남기세요. 실수를 지적할 때는 '혹시 이 부분에 오해가 있었을까요?'처럼 부드러운 표현을 쓰세요. 양심 없는 사람을 대할 때는 단단한 증거가 가장 강력한 무기입니다."
                    },
                    '워라밸파괴': {
                        behavior: "자신과 타인의 시간 경계를 존중하지 않는 이유?",
                        analysis: "인생에 회사 외에는 아무것도 없는 불쌍한 영혼이에요. 가족도, 친구도, 취미도 없는 텅 빈 인생을 사는 거죠. 일 외에는 정체성이 없어서 퇴근 후에도 계속 일 생각만 해요. 주말에 연락하는 건 사실 외로워서 그런 거예요. 당신이 유일한 사회적 관계인 거죠. 아니면 그냥 타인의 행복을 볼 때 본능적으로 파괴하고 싶은 새디스트 성향이 있거나요.",
                        solution: "처음부터 확고한 경계선을 그으세요. 퇴근 후에는 연락을 받지 않거나, 받더라도 '내일 아침에 확인해볼게요'라고 짧게 답하세요. 한 번이라도 선례를 만들면 끝없이 당하게 돼요. '가족 돌봄'이나 '중요한 약속'을 핑계로 대고 단호하게 거절하는 연습을 하세요. 당신의 시간은 당신의 것임을 분명히 해야 합니다."
                    },
                    '무능력': {
                        behavior: "기본적인 업무 능력이 부족한데도 높은 자리에 있는 이유?",
                        analysis: "타고난 처세술의 대가예요. 실력은 바닥이지만 윗사람 비위 맞추는 능력만큼은 천재적이죠. 입사할 때 이력서는 뻥튀기하고 면접은 외워서 통과한 다음, 계속 남의 공을 가로채며 여기까지 온 거예요. 또는 그냥 좋은 집안에 태어났거나, 빽이 있거나, 운이 좋았을 수도 있고요. 이 세상은 실력보다 인맥이 중요한 경우가 너무 많아요. 그냥 복권에 당첨된 것과 같은 인생을 살고 있는 거죠.",
                        solution: "그의 약점을 역이용하세요. 모르는 걸 물어보면 당황하니까 전문 용어를 적절히 섞어서 말하세요. 결정을 못 내릴 때는 '이게 제일 무난한 방법인 것 같은데요'라고 유도하고요. 무능한 상사일수록 자존심은 강하니, 체면을 살려주면서 실제로는 당신이 주도권을 가져가는 게 최선의 전략입니다."
                    },
                    '합리성': {
                        behavior: "대체로 합리적이지만 가끔 감정적으로 변하는 이유?",
                        analysis: "그냥 인간이라서 그래요. 로봇이 아니라 감정이 있는 사람이니까요. 누구나 피로하거나 스트레스 받으면 평소보다 감정적으로 되기 마련이에요. 이성이 감정을 항상 통제할 수는 없잖아요. 가끔은 감정이 이성을 압도할 때가 있고, 그게 인간의 자연스러운 모습이에요. 완벽한 사람은 없으니 이해해주세요.",
                        solution: "감정적인 순간에는 중요한 의사결정을 피하세요. 그리고 진정될 때까지 기다렸다가 다시 대화하는 게 좋아요. '지금은 잠시 생각할 시간이 필요할 것 같습니다'라고 정중하게 말하면 대부분 이해합니다. 합리적인 사람은 감정이 가라앉으면 다시 이성을 되찾아요. 그때까지 기다리는 게 현명한 전략입니다."
                    }
                },
                // 기본 분석 (다른 항목이 부족할 때 사용)
                '기본분석': [
                    {
                        behavior: "직장에서 권력을 이용해 타인을 통제하려는 이유?",
                        analysis: "이 사람은 인생에서 처음으로 권력을 맛봤어요. 초등학교 반장도 못 해본 사람이 갑자기 작은 권력이라도 생기니까 정신이 혼미해진 거죠. 어디 가서도 인정받지 못하던 사람이 직장에서라도 존재감을 과시하고 싶은 거예요. 아마도 어릴 때 부모님이나 선생님에게 심하게 통제당한 경험이 있을 거예요. 이제 그 억눌린 분노를 당신에게 풀고 있는 거죠. 학대의 대물림이라고 볼 수 있어요.",
                        solution: "겉으로는 복종하고 속으로는 무시하세요. 작은 권력에 취한 사람은 당신의 진심 따위 관심 없어요. 그냥 복종하는 척만 하면 됩니다. 그리고 물이 새는 것처럼 조금씩 자기 영역을 확보하세요. 개구리를 서서히 데우는 물처럼, 자율성을 조금씩 키워나가는 게 현명한 전략입니다."
                    },
                    {
                        behavior: "업무 지시가 모호한 이유?",
                        analysis: "이 사람은 자기도 뭘 원하는지 모르는 혼란의 덩어리예요. 머릿속이 안개처럼 뿌옇습니다. 생각이 명확하지 않으니 말도 명확할 수 없는 거죠. 아니면 의도적으로 책임회피를 위해 모호하게 말하는 거고요. 결과가 좋으면 '내 지시대로 했네', 나쁘면 '그렇게 하라고 한 적 없어'라고 빠져나갈 구멍을 미리 만들어두는 겁니다. 양심이 결여된 사람들이 흔히 쓰는 전략이에요.",
                        solution: "대화 후에는 항상 정리 이메일을 보내세요. '오늘 논의한 내용을 제가 이해한 대로 정리했습니다. 맞으면 확인 부탁드립니다.' 답장이 없으면 승인한 걸로 간주하고 진행하세요. 모호함을 역이용해서 당신이 원하는 방향으로 일을 진행하는 것도 좋은 전략입니다. 책임회피자의 무기를 역으로 이용하는 거죠."
                    },
                    {
                        behavior: "다른 사람의 아이디어를 무시하는 이유?",
                        analysis: "자기 생각만 옳다고 믿는 독선적인 사람이에요. 열등감이 너무 깊어서 남의 좋은 생각을 인정하면 자기가 무너질 것 같은 두려움이 있는 거죠. 또는 단순히 지능이 낮아서 남의 좋은 아이디어를 이해할 능력이 없는 걸 수도 있어요. 남의 아이디어를 평가하려면 최소한의 지적 유연성이 필요한데, 그게 부족한 거죠. 자존심만 크고 실력은 없는 전형적인 무능한 관리자의 모습입니다.",
                        solution: "그의 아이디어를 먼저 칭찬하고 나서 슬쩍 당신의 아이디어를 끼워넣으세요. '과장님 아이디어에서 영감을 받아 조금 발전시켜 봤는데요...'라고 하면 자기 아이디어라고 착각하고 수용할 가능성이 높아요. 자존심 강한 사람은 자기 공로라고 믿게 만들어야 설득이 됩니다. 자아가 클수록 그 자아를 활용하는 게 최선의 전략이에요."
                    }
                ]
            };

            // 모드 전환 버튼 이벤트 설정 (안전한 방식)
            const analysisBtn = document.getElementById('spicy-mode'); // 심층분석 버튼
            const funBtn = document.getElementById('fun-mode'); // 기본모드 버튼

            // 기본 데이터 설정 - 기본모드(funMode)를 초기값으로 설정
            let analysisData = funMode;

            // 페이지 초기 로드 시 스크롤 방지를 위한 플래그
            let isInitialLoad = true;

            // 초기 로드 후 플래그 변경 (약간의 시간 지연 후)
            setTimeout(() => {
                isInitialLoad = false;
            }, 1000);

            // 심층분석 버튼 클릭 이벤트
            if (analysisBtn) {
                analysisBtn.addEventListener('click', function () {
                    if (analysisBtn) analysisBtn.classList.add('active');
                    if (funBtn) funBtn.classList.remove('active');

                    // 섹션 클래스 업데이트
                    const section = document.querySelector('.psychology-section');
                    if (section) {
                        section.classList.remove('fun-mode-active');
                        section.classList.add('analysis-mode-active');

                        // 초기 로드가 아닐 때만 스크롤
                        if (!isInitialLoad) {
                            section.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }
                    }

                    const title = document.querySelector('.psychology-title');
                    if (title) {
                        title.textContent = '그 행동의 심리적 이유';
                        title.style.display = 'block'; // 타이틀 표시
                    }

                    analysisData = analysisMode;
                    updatePsychologyContent(analysisData, baseType, topStats);
                });
            }

            // 기본모드 버튼 클릭 이벤트
            if (funBtn) {
                funBtn.addEventListener('click', function () {
                    if (funBtn) funBtn.classList.add('active');
                    if (analysisBtn) analysisBtn.classList.remove('active');

                    // 섹션 클래스 업데이트
                    const section = document.querySelector('.psychology-section');
                    if (section) {
                        section.classList.remove('analysis-mode-active');
                        section.classList.add('fun-mode-active');

                        // 초기 로드가 아닐 때만 스크롤
                        if (!isInitialLoad) {
                            section.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }
                    }

                    const title = document.querySelector('.psychology-title');
                    if (title) {
                        title.style.display = 'none'; // 타이틀 숨기기
                    }

                    analysisData = funMode;
                    updatePsychologyContent(analysisData, baseType, topStats);
                });
            }

            // 초기 상태 설정 - 기본모드가 기본으로 활성화
            if (funBtn) {
                funBtn.classList.add('active');
                if (analysisBtn) analysisBtn.classList.remove('active');

                // 섹션 초기 클래스 설정
                const section = document.querySelector('.psychology-section');
                if (section) {
                    section.classList.remove('analysis-mode-active');
                    section.classList.add('fun-mode-active');
                }

                // 초기 타이틀 제거
                const title = document.querySelector('.psychology-title');
                if (title) {
                    title.style.display = 'none'; // 타이틀 숨기기
                }
            }

            // 콘텐츠 업데이트 함수
            function updatePsychologyContent(analysisData, baseType, topStats) {
                const psychologyList = document.getElementById('psychology-list') || document.getElementById('tips-list');
                psychologyList.innerHTML = '';

                // 선택할 항목 준비
                let candidateItems = [];

                // 보스 유형 기반 항목 추가
                if (analysisData[baseType]) {
                    candidateItems = candidateItems.concat(analysisData[baseType]);
                }

                // 스탯 기반 항목 추가 (스탯 분석 데이터가 있다면)
                if (analysisData['스탯분석']) {
                    topStats.forEach(([stat]) => {
                        if (analysisData['스탯분석'][stat]) {
                            candidateItems.push(analysisData['스탯분석'][stat]);
                        }
                    });
                }

                // 항목이 부족하면 기본 항목 추가
                if (candidateItems.length < 3 && analysisData['기본분석']) {
                    candidateItems = candidateItems.concat(analysisData['기본분석']);
                }

                // 시드 기반으로 3개 선택
                const selectedItems = [];
                for (let i = 0; i < 3 && candidateItems.length > 0; i++) {
                    const index = Math.floor(seededRandom(window.resultSeed + i * 1000) * candidateItems.length);
                    selectedItems.push(candidateItems[index]);
                    candidateItems.splice(index, 1);
                }

                // 모드에 따른 클래스 결정
                const modeClass = (analysisData === funMode) ? 'fun-mode' : 'analysis-mode';

                // 선택된 항목 표시
                selectedItems.forEach(item => {
                    const li = document.createElement('li');
                    li.className = modeClass;

                    // 행동/이유 (볼드체)
                    const behaviorEl = document.createElement('strong');
                    behaviorEl.textContent = item.behavior;
                    li.appendChild(behaviorEl);

                    // 분석 (기본 텍스트)
                    const analysisEl = document.createElement('span');
                    analysisEl.textContent = item.analysis;
                    li.appendChild(analysisEl);

                    // 해결책 (이탤릭체)
                    const solutionEl = document.createElement('em');
                    solutionEl.textContent = `대처법: ${item.solution}`;
                    li.appendChild(solutionEl);

                    psychologyList.appendChild(li);
                });
            }

            // 초기 콘텐츠 업데이트
            updatePsychologyContent(analysisData, baseType, topStats);
        }
        // 생존 팁 생성 함수 수정 - 이제 generateWhyTheyDoThat 함수를 호출하도록 변경
        function generateSurvivalTips(topStats, bossType, baseType, difficultyLevel, rationalityScore) {
            // 기존 빡침 포인트 대신 새로운 심리 분석 함수 호출
            generateWhyTheyDoThat(bossType, baseType, topStats, difficultyLevel, rationalityScore);
        }

        // 심리 처방전 생성 함수 (기존 generateSurvivalTips 함수 대체)
        // function generateSurvivalTips(topStats) {
        //     const tipsList = document.getElementById('tips-list');
        //     tipsList.innerHTML = '';

        //     // 각 능력치별 공감/위로 메시지
        //     const empathyMessages = {
        //         '꼰대력': ['스스로가 꼰대라는걸 인정한다며 꼰대짓을 마음껏 하고 있죠? 진짜 웃는 얼굴로 은근히 돌려깔때는 정강이를 까주고 싶죠.',
        //             '"우리 때는 말이야~" 시작할 때마다 한숨이 나오죠. 그 입에서 나오는 모든 조언이 쓰레기통 직행감인건 아는데, 고개 끄덕이기 지치네요. 인생 선배는 개뿔.',
        //             '동기들과 꼰대 상사 명언 빙고판 만들어보세요. 상사가 또 그 소리 시작할 때마다 빙고 체크하면 하루가 조금은 재밌어질 거예요. 고통적인 순간을 웃긴 순간으로 바꾸는 기술이죠!'],
        //         '내로남불': ['본인 지각할 땐 교통체증, 내가 지각하면 시간 관념 부족이라고? 그 이중성에 치가 떨릴 때 있죠. 가끔은 그 모습 녹화해서 들이밀고 싶어요.',
        //             '당신의 3분 지각은 세상 죄악인데, 그 양반의 30분 지각은 어쩔 수 없는 상황이랍니다. 진짜 저런 사람들 뇌구조가 궁금해요. 그 뻔뻔함을 배울 수 있다면 인생이 편해질 텐데.',
        //             '내로남불 상사의 말도 안 되는 기준들을 몰래 기록해두세요. 퇴사할 때 "깨달음의 책"으로 동료들에게 남겨주는 것도 좋은 선물이 될 거예요. 웃픈 추억팔이지만 통쾌함이 있죠.'],
        //         '갑질지수': ['또 시작된 갑질의 향연! "너랑 나랑 직급이 같아?" 따위의 말 좀 그만했으면 좋겠어요. 그 작은 권력으로 사람 괴롭히는 모습이 참 한심하죠.',
        //             '손가락으로 책상 두드리며 윽박지를 때마다 "저 손가락을 부러뜨리고 싶다"는 생각, 한 번쯤 해봤죠? 당연한 거예요. 갑질러는 언젠가 자기보다 더 쎈 갑을 만나게 되어 있어요. 그때 분명 크게 다칠거에요^^ (여러모로)',
        //             '갑질 상사를 향한 분노 에너지를 운동으로 승화시켜보는건 어때요? 골프, 배드민턴, 테니스 등은 의사가 권장하는 스트레스 해소법입니다! 스트레스도 풀리고 살도 빼보자구요. 그놈의 처벌은 언젠가 나타날 더 쎈 갑이 해줄거에요.'],
        //         '책임회피': ['또 누군가를 희생양 삼아 자신은 발 빼고 있죠? "내가 언제 그랬어?" 하는 표정으로 모른 척할 때는 정말 이마를 치고 싶어져요.',
        //             '성공할 땐 자기 공이고 실패하면 팀원 탓이라는 이 마법 같은 논리. 저런 사람들이 잘 사는 걸 보면 진짜 세상이 공평한지 의심스러워요. 본인도 자신이 한심한 사람이란걸 알까?',
        //             '책임 회피 상사의 말은 반드시 녹음하거나 이메일로 남겨두세요. 거짓말을 밥먹듯이 하는 사람들은 확실한 증거와 논리 앞에 무너지게 되어있거든요!'],
        //         '압박관리': ['하루에도 수십 번 "진행상황 어때?" 물어보는 거 정말 짜증나죠? 내쪽을 쳐다보는 느낌만 들어도 숨이 턱턱 막히죠.',
        //             '심지어 부하직원들에게 업무를 떠넘겨 놓고 자신은 관리자라며 압박감만 주고 있어요. 하나하나 다 지적할거면 니가 직접하던가! 라는 말이 목구멍까지 차올라요.',
        //             '그놈이 원하는 것보다 더 자주, 더 자세히 보고하세요. 질리게 만들어야 포기합니다. 사소한것까지 물어본다 지적하면 평소에 사소한거까지 태클걸고 지적했던 그놈의 말을 인용하여 되받아 치는게 효과적입니다!'],
        //         '워라밸파괴': ['한번 회의했다 하면 1~2시간은 기본이고, 퇴근시간이 얼마 안남았을때 "잠시만 볼까?" 라는 말부터 시작된 대화는 남들 다 퇴근하는데도 계속 듣고있어야 돼요.',
        //             '그러다 가끔은 "밥먹고와서 마저 이야기하자~"" 라는 콤보로 이어질때면, 속에서 아주 큰 스트레스가 생기고 머리도 지끈거리고 해요. 그사람과 야근하며 둘이 밥먹을 바에야 집에서 물에 밥을 말아먹는게 낫죠.',
        //             '이놈을 위해서 항상 변명으로 말할 퇴근후 일정을 생각해두세요! 물어보면 바로바로 단호하게 거절할 수 있도록 말이죠. 그리고 가끔씩 이놈과 야근을 해야할때면 아주 새벽까지 일을 하자고 압박주세요! 질리도록 만들어야 합니다.'],
        //         '이중인격': ['회식땐 형님, 회사에선 남남... 그 변덕에 정신이 혼미해질 때가 있죠. 아침엔 칭찬하더니 오후엔 같은 일로 깔아뭉개는 모습에 현타가 오죠.',
        //             '어제는 "최고의 아이디어"라더니 오늘은 "말도 안 되는 소리"라고? 그냥 조현병 환자 아니냐고 물어보고 싶을 때 있어요. 회식 때 친한 척하다가 다음날 모른 척하는 거, 진짜 참기 힘들죠.',
        //             '그들의 호의적인 말을 믿지마세요! 살갑게 다가와도 "아 네~" 하고 넘겨버리시고, 급발진하며 나를 공격해도 "아 네~" 하고 넘겨버리세요. 미친개는 피하는개 상책입니다!'],
        //         '무능력': ['중요한 결정을 내려야 할 때마다 "음... 좀 더 검토해볼게"라고 하는 모습에 속으로 "그냥 결정 좀 해줘!"라고 외치게 되죠. 답답함이 극에 달해요.',
        //             '실무는 1도 모르면서 높은 자리 차지하고 있는 그 모습, 정말 신기하죠? 어떻게 저기까지 올라갔는지 미스터리예요. 도대체 어떤 처세술이 있길래 저럴수 있나 경이롭기까지 해요.',
        //             '하지만 잠시 생각해보면 팀원들과는 더욱 끈끈하지 않나요? 무능한 상사가 있으면 오히려 팀원들끼리 더 끈끈해집니다. "저 분 빼고 우리끼리 해결하자"는 공감대가 형성되거든요. 상사 뒷담을 통한 스트레스 해소는 덤이죠.'],
        //         '합리성': ['합리적으로 말하고 행동하는것 같지만 정작 본인의 마음에 들지 않을 때에는 손바닥 뒤집듯이 상황을 뒤집어 버리지 않나요? 그때부터는 나와의 의사소통 시도 자체가 가식적으로 보여지죠.',
        //             '하지만 평소에는 얼핏 논리에 맞는 말들을 하며 압박해오기 때문에 상대하기가 가장 까다롭죠. 논리로 이기고나서는 그 사람의 비논리적인 부분까지 지적하고 설득해야하기 때문이에요.',
        //             '이런 상사를 다루는 비법은 그들의 무기를 역이용하는 것입니다. 모든 대화를 녹음하거나 기록해두고, 나중에 그들이 비합리적으로 행동할 때 과거의 말을 그대로 인용해보세요. "지난번에 말씀하신 원칙에 따르면..."이라고 시작하면 적어도 잠시는 당황할 겁니다. 작은 승리지만 당신의 정신 건강을 지키는 데 도움이 될 거예요.']
        //     };

        //     // 일반적인 공감/위로 메시지
        //     const generalEmpathy = [
        //         "힘든 하루를 보냈나요? 퇴근 후 당신이 좋아하는 음식으로 작은 위로를 해보세요. 당신은 충분히 그럴 자격이 있어요.",
        //         "상사 때문에 스트레스 받는 건 당신 혼자만의 문제가 아니에요. 같은 고민을 하는 동료들과 가끔 속마음을 나누는 것도 좋은 방법이랍니다.",
        //         "오늘도 상사 때문에 한숨이 나왔나요? 깊게 심호흡하고 '이 또한 지나가리라'를 기억하세요.",
        //         "직장에서의 어려움이 당신의 가치를 정의하지 않아요. 당신은 그 이상의 멋진 사람이라는 걸 잊지 마세요.",
        //         "때로는 '그냥 웃자'가 최고의 대처법일 때도 있어요. 어차피 바꿀 수 없는 상황이라면, 유머로 승화시키는 것도 방법이죠."
        //     ];

        //     // 상위 3개 능력치에 대한 위로/공감 메시지 추가
        //     topStats.forEach(([stat], index) => {
        //         const messages = empathyMessages[stat];
        //         if (messages && messages.length > 0) {
        //             // 시드 기반 선택 (전역 시드 + 인덱스 + 능력치명 기반)
        //             const specificSeed = window.resultSeed + (index * 1000) + stat.charCodeAt(0);
        //             const message = selectBasedOnSeed(messages, specificSeed);

        //             const li = document.createElement('li');
        //             li.textContent = message;
        //             tipsList.appendChild(li);
        //         }
        //     });

        //     // 메시지가 3개 미만이면 일반적인 공감 메시지 추가 (시드 기반)
        //     let generalIndex = 0;
        //     while (tipsList.children.length < 3 && generalEmpathy.length > 0) {
        //         const specificSeed = window.resultSeed + 9000 + generalIndex;
        //         const message = selectBasedOnSeed(generalEmpathy, specificSeed);

        //         const li = document.createElement('li');
        //         li.textContent = message;
        //         tipsList.appendChild(li);

        //         generalIndex++;

        //         // 중복 방지를 위해 사용된 메시지 제거
        //         const messageIndex = generalEmpathy.indexOf(message);
        //         if (messageIndex !== -1) {
        //             generalEmpathy.splice(messageIndex, 1);
        //         }
        //     }
        // }
        // 생존 팁 생성
        // function generateSurvivalTips(topStats) {
        //     const tipsList = document.getElementById('tips-list');
        //     tipsList.innerHTML = '';

        //     // 상위 3개 능력치에 대한 생존 팁 추가
        //     topStats.forEach(([stat]) => {
        //         const tips = statTypes[stat].tips;
        //         if (tips && tips.length > 0) {
        //             // 각 능력치마다 1-2개 팁 선택
        //             const numTips = Math.min(2, tips.length);
        //             for (let i = 0; i < numTips; i++) {
        //                 const tipIndex = Math.floor(Math.random() * tips.length);
        //                 const tip = tips[tipIndex];

        //                 const li = document.createElement('li');
        //                 li.textContent = tip;
        //                 tipsList.appendChild(li);

        //                 // 사용한 팁 제거 (중복 방지)
        //                 tips.splice(tipIndex, 1);
        //             }
        //         }
        //     });

        //     // 팁이 3개 미만이면 일반적인 팁 추가
        //     if (tipsList.children.length < 3) {
        //         const generalTips = [
        //             "동료들과 좋은 관계를 유지하며 서로 도움을 주고받으세요.",
        //             "스트레스 관리와 자기 돌봄을 위한 시간을 반드시 확보하세요.",
        //             "업무 외 시간에는 취미나 운동을 통해 업무 스트레스를 해소하세요.",
        //             "가능하다면 점진적으로 이직을 준비해보는 것도 좋은 전략입니다.",
        //             "자신의 성과와 업적을 꾸준히 기록하고 포트폴리오를 만들어두세요."
        //         ];

        //         while (tipsList.children.length < 3 && generalTips.length > 0) {
        //             const tipIndex = Math.floor(Math.random() * generalTips.length);
        //             const tip = generalTips[tipIndex];

        //             const li = document.createElement('li');
        //             li.textContent = tip;
        //             tipsList.appendChild(li);

        //             generalTips.splice(tipIndex, 1);
        //         }
        //     }
        // }

        // // 긍정적 특성 생성
        // function generatePositiveTraits(stats) {
        //     const positiveText = document.getElementById('positive-text');

        //     // 낮은 점수의 부정적 능력치 찾기
        //     const lowNegativeStats = Object.entries(stats)
        //         .filter(([stat, value]) => stat !== '합리성' && value < 40)
        //         .sort((a, b) => a[1] - b[1])
        //         .slice(0, 2);

        //     // 합리성 점수 확인
        //     const rationalityScore = stats['합리성'] || 0;

        //     let positiveComment = '';

        //     if (lowNegativeStats.length > 0) {
        //         positiveComment += '적어도 당신의 상사는 ';
        //         lowNegativeStats.forEach(([stat, value], index) => {
        //             positiveComment += `<strong>${stat}</strong>이(가) 낮고`;

        //             if (index < lowNegativeStats.length - 1) {
        //                 positiveComment += ', ';
        //             } else {
        //                 positiveComment += ' ';
        //             }
        //         });

        //         const randomPositives = [
        //             '그나마 다행이네요.',
        //             '생각보다 견딜만 할 수도 있어요.',
        //             '최악의 상사는 아닌 것 같네요.',
        //             '그래도 완전 지옥은 아니네요.'
        //         ];

        //         positiveComment += randomPositives[Math.floor(Math.random() * randomPositives.length)];
        //     }

        //     if (rationalityScore > 50) {
        //         if (positiveComment) {
        //             positiveComment += ' 또한, ';
        //         }

        //         positiveComment += `<strong>합리성</strong> 점수가 ${rationalityScore}%로 꽤 높은 편이에요. 논리적인 설득이 가능할지도 모르겠네요.`;
        //     }

        //     if (!positiveComment) {
        //         const defaultPositives = [
        //             '음... 긍정적인 면을 찾기가 쉽지 않네요. 하지만 이직 시장이 활발하다고 하니 희망을 가져보세요.',
        //             '매우 힘든 상황이지만, 이런 상사 밑에서 버틴다면 어디서든 살아남을 수 있을 거예요!',
        //             '최소한 당신은 상사의 문제점을 정확히 파악했어요. 이제 대응 전략을 세울 차례입니다.',
        //             '지금은 힘들지만, 나중에 당신이 관리자가 됐을 때 어떻게 하지 말아야 할지 좋은 교훈이 될 거예요.'
        //         ];

        //         positiveComment = defaultPositives[Math.floor(Math.random() * defaultPositives.length)];
        //     }

        //     positiveText.innerHTML = positiveComment;
        // }

        // 개선된 난이도 표시 함수
        function setDifficultyLevel(level) {
            // 별점 표시
            const fullStars = Math.floor(level);
            const hasHalfStar = level % 1 >= 0.5;

            for (let i = 1; i <= 5; i++) {
                const star = document.getElementById(`star-${i}`);

                if (i <= fullStars) {
                    star.classList.add('filled');
                } else if (i === fullStars + 1 && hasHalfStar) {
                    star.innerHTML = '★';
                    star.style.background = 'linear-gradient(90deg, #ff9800 50%, #ddd 50%)';
                    star.style.webkitBackgroundClip = 'text';
                    star.style.webkitTextFillColor = 'transparent';
                }
            }

            // 게이지 퍼센트 계산
            const difficultyPercentage = (level / 5) * 100;
            const gauge = document.getElementById('difficulty-gauge');
            const label = document.getElementById('difficulty-label');

            // 난이도 텍스트 및 색상 설정
            let difficultyText, difficultyColor;

            if (level < 1.5) {
                difficultyText = "순조로움";
                difficultyColor = "#4caf50"; // 녹색
            } else if (level < 2.5) {
                difficultyText = "관리 가능";
                difficultyColor = "#8bc34a"; // 연두색
            } else if (level < 3.5) {
                difficultyText = "도전적";
                difficultyColor = "#ffc107"; // 노란색
            } else if (level < 4.5) {
                difficultyText = "고난도";
                difficultyColor = "#ff9800"; // 주황색
            } else {
                difficultyText = "극악";
                difficultyColor = "#f44336"; // 빨간색
            }

            // 게이지 색상 설정
            let gaugeColor;
            if (level < 2.5) {
                gaugeColor = `linear-gradient(90deg, #4caf50, #8bc34a)`;
            } else if (level < 4) {
                gaugeColor = `linear-gradient(90deg, #8bc34a, #ffc107, #ff9800)`;
            } else {
                gaugeColor = `linear-gradient(90deg, #ff9800, #f44336)`;
            }

            // 난이도 텍스트와 게이지 업데이트
            setTimeout(() => {
                gauge.style.width = difficultyPercentage + '%';
                gauge.style.background = gaugeColor;
                label.textContent = `${difficultyText} (${difficultyPercentage.toFixed(0)}%)`;
                label.style.color = difficultyColor;
                label.style.fontWeight = "bold";
            }, 300);

            // 난이도 텍스트도 별도로 추가
            const difficultyDescription = document.getElementById('difficulty-description');
            if (difficultyDescription) {
                difficultyDescription.textContent = getDifficultyDescription(level);
                difficultyDescription.style.color = difficultyColor;
            }
        }

        // 난이도 설명 생성 함수 추가
        function getDifficultyDescription(level) {
            if (level < 1.5) {
                return "상대적으로 대처하기 쉬운 상사입니다. 기본적인 직장 예절만 지켜도 무난히 지낼 수 있어요.";
            } else if (level < 2.5) {
                return "가끔 어려운 상황이 있지만, 적절한 대응 전략으로 충분히 관리할 수 있습니다.";
            } else if (level < 3.5) {
                return "꽤 까다로운 상사입니다. 체계적인 대응 전략과 꾸준한 자기 관리가 필요합니다.";
            } else if (level < 4.5) {
                return "매우 까다로운 상사로, 강한 인내심과 전략적 사고가 필요합니다. 동료와의 연대가 중요해요.";
            } else {
                return "최고 난이도의 상사입니다. 극도의 인내심과 철저한 자기 보호가 필요하며, 가능하다면 이직도 고려해보세요.";
            }
        }

        // 공유 버튼 설정
        function setupShareButtons() {
            // 카카오 공유 버튼 클릭 이벤트
            document.getElementById('kakao-share-btn').addEventListener('click', function () {
                // 카카오 SDK 초기화 (처음 클릭할 때만)
                if (typeof Kakao !== 'undefined' && !Kakao.isInitialized()) {
                    Kakao.init('31f13f66e83c5eb7091fd137350a43ae');
                }

                if (typeof Kakao === 'undefined') {
                    alert('카카오톡 공유 기능을 사용할 수 없습니다. 링크 복사를 이용해주세요.');
                    return;
                }

                // 보스 타이틀 가져오기
                const bossTitle = document.getElementById('boss-title').textContent;

                // 공유 URL 생성 (시드 포함)
                let shareUrl = window.location.href;
                if (!shareUrl.includes('seed=') && window.resultSeed) {
                    const separator = shareUrl.includes('?') ? '&' : '?';
                    shareUrl = `${shareUrl}${separator}seed=${window.resultSeed}`;
                }

                // 카카오톡 공유하기
                try {
                    Kakao.Link.sendDefault({
                        objectType: 'feed',
                        content: {
                            title: '미운 그놈 스탯 분석 결과 - 직장편',
                            description: `내 상사는 "${bossTitle}"이(가) 나왔어요! 당신의 상사는 어떤 유형인가요?`,
                            imageUrl: 'https://sungho-park522.github.io/troll-man-test/images/boss_complex.png',
                            link: {
                                mobileWebUrl: shareUrl,
                                webUrl: shareUrl
                            }
                        },
                        buttons: [
                            {
                                title: '결과 보기',
                                link: {
                                    mobileWebUrl: shareUrl,
                                    webUrl: shareUrl
                                }
                            },
                            {
                                title: '테스트 하기',
                                link: {
                                    mobileWebUrl: 'https://sungho-park522.github.io/troll-man-test/index.html',
                                    webUrl: 'https://sungho-park522.github.io/troll-man-test/index.html'
                                }
                            }
                        ]
                    });
                } catch (e) {
                    console.error('카카오톡 공유 에러:', e);
                    alert('카카오톡 공유 기능을 사용할 수 없습니다. 링크 복사를 이용해주세요.');
                }
            });

            // 링크 복사 버튼
            document.getElementById('copy-link-btn').addEventListener('click', () => {
                // 현재 URL에서 시드를 포함한 상태로 가져오기
                const currentUrl = window.location.href;

                // 시드가 없는 경우 추가
                let shareUrl = currentUrl;
                if (!shareUrl.includes('seed=') && window.resultSeed) {
                    const separator = shareUrl.includes('?') ? '&' : '?';
                    shareUrl = `${shareUrl}${separator}seed=${window.resultSeed}`;
                }

                navigator.clipboard.writeText(shareUrl)
                    .then(() => {
                        alert('결과 링크가 클립보드에 복사되었습니다!');
                    })
                    .catch(err => {
                        console.error('링크 복사 실패:', err);
                        // 대체 방법
                        const tempInput = document.createElement('input');
                        document.body.appendChild(tempInput);
                        tempInput.value = shareUrl;
                        tempInput.select();
                        document.execCommand('copy');
                        document.body.removeChild(tempInput);
                        alert('결과 링크가 클립보드에 복사되었습니다!');
                    });
            });

            // 공유하기 버튼 (Web Share API)
            document.getElementById('share-btn').addEventListener('click', () => {
                const bossTypeText = document.getElementById('boss-title').textContent;

                // 현재 URL에서 시드를 포함한 상태로 가져오기
                const currentUrl = window.location.href;

                // 시드가 없는 경우 추가
                let shareUrl = currentUrl;
                if (!shareUrl.includes('seed=') && window.resultSeed) {
                    const separator = shareUrl.includes('?') ? '&' : '?';
                    shareUrl = `${shareUrl}${separator}seed=${window.resultSeed}`;
                }

                const shareData = {
                    title: '미운 그놈 스탯 분석 결과 - 직장편',
                    text: `내 상사는 "${bossTypeText}"이(가) 나왔어요! 당신의 상사는 어떤 유형인가요?`,
                    url: shareUrl
                };

                if (navigator.share) {
                    navigator.share(shareData)
                        .catch(err => {
                            console.error('공유 실패:', err);
                        });
                } else {
                    alert('이 브라우저는 공유 기능을 지원하지 않습니다. 링크 복사를 이용해주세요.');
                }
            });

            // 테스트 다시하기 버튼
            document.getElementById('back-btn').addEventListener('click', () => {
                window.location.href = 'index.html';
            });
        }

        // 페이지 초기화 함수에서의 호출 방식도 수정
        function initializePage() {
            // 이미 초기화된 경우 중복 실행 방지
            if (pageInitialized) return;
            pageInitialized = true;

            // URL에서 능력치 결과 가져오기
            const stats = getStatsFromURL();

            // URL에서 시드값 직접 가져오기
            const urlParams = new URLSearchParams(window.location.search);
            const seedParam = urlParams.get('seed');

            // 시드가 있으면 그것을 사용, 없으면 새로 생성
            if (seedParam && !isNaN(parseInt(seedParam))) {
                window.resultSeed = parseInt(seedParam);
            } else {
                // 새 시드 생성 (현재 시간 + 스탯 합계)
                window.resultSeed = Date.now() + Object.values(stats).reduce((sum, val) => sum + val, 0);
            }

            console.log("사용 중인 시드:", window.resultSeed);

            // 결과가 없으면 오류 메시지 표시
            if (Object.keys(stats).length === 0) {
                document.getElementById('boss-title').textContent = '결과를 불러올 수 없습니다';
                document.getElementById('boss-description').innerHTML = '<p>테스트를 처음부터 다시 진행해주세요.</p>';
                return;
            }

            try {
                // 레이더 차트 생성
                const chartResult = createRadarChart(stats);

                // 상사 유형 분석
                const bossAnalysis = analyzeBossType(stats);
                console.log("보스 분석 결과:", bossAnalysis);

                // baseType 확인 디버깅
                if (!bossAnalysis.baseType) {
                    console.error("오류: baseType이 설정되지 않았습니다:", bossAnalysis);
                    // 문제 해결까지 기본값 제공
                    bossAnalysis.baseType = "무난한 일상형 보스";
                }

                // 상사 유형 표시 - 새 타이틀 사용
                document.getElementById('boss-title').textContent = bossAnalysis.title;

                // 상사 설명 표시 - 기존 유형 사용
                displayBossDescription(bossAnalysis.title, bossAnalysis.baseType);

                // 상사 이미지 설정 - 기존 유형 사용
                setBossImage(bossAnalysis.title, bossAnalysis.baseType);

                // 말풍선 내용 설정 (오류 처리 추가)
                if (chartResult && chartResult.topStats && chartResult.topStats.length > 0) {
                    try {
                        setRandomBubbles(chartResult.topStats);
                    } catch (error) {
                        console.error("말풍선 설정 오류:", error);
                    }
                }

                setupResponsiveBubbles();

                // 난이도 설정
                setDifficultyLevel(bossAnalysis.difficultyLevel);

                // 합리성 점수 
                const rationalityScore = stats['합리성'] || 0;

                // 심리 분석 생성 (오류 처리 추가) - 수정된 부분
                if (bossAnalysis.topStats && bossAnalysis.topStats.length > 0) {
                    try {
                        // 새로운 함수에 더 많은 매개변수 전달
                        generateSurvivalTips(
                            bossAnalysis.topStats,
                            bossAnalysis.title,
                            bossAnalysis.baseType,
                            bossAnalysis.difficultyLevel,
                            rationalityScore
                        );
                    } catch (error) {
                        console.error("심리 분석 생성 오류:", error);
                        // 오류 발생 시 기본 내용 표시
                        const tipsList = document.getElementById('tips-list');
                        if (tipsList) {
                            tipsList.innerHTML = '<li>상사와의 갈등 상황에서 심호흡하고 감정을 진정시키세요.</li>' +
                                '<li>동료들과 함께 어려움을 나누며 지지를 구하세요.</li>' +
                                '<li>업무 외 취미나 운동으로 스트레스를 해소하는 시간을 가지세요.</li>';
                        }
                    }
                }

                // 공유 버튼 설정
                setupShareButtons();
            } catch (error) {
                console.error("결과 초기화 중 오류 발생:", error);
                // 오류 시 기본 메시지 표시
                document.getElementById('boss-title').textContent = '결과 로딩 중 오류가 발생했습니다';
                document.getElementById('boss-description').innerHTML = '<p>페이지를 새로고침하거나 다시 시도해주세요.</p>';
            }
        }

        // 이미지 프리로드 함수
        function preloadBossImage(baseType, callback) {
            // 상사 유형별 이미지 경로 설정
            let imagePath = "";
            switch (baseType) {
                case '구시대의 꼰대 보스': imagePath = "images/boss_old_school.png"; break;
                case '황제형 내로남불 보스': imagePath = "images/boss_emperor.png"; break;
                case '권위형 갑질 보스': imagePath = "images/boss_threatening.png"; break;
                case '책임회피형 보스': imagePath = "images/boss_manipulator.png"; break;
                case '노예사냥꾼 보스': imagePath = "images/boss_slave_hunter.png"; break;
                case '무능력형 혼돈 보스': imagePath = "images/boss_incompetent.png"; break;
                case '복합형 악몽 보스': imagePath = "images/Composite_Nightmare_Boss.png"; break;
                case '권위주의형 복합 보스': imagePath = "images/Authoritarian_Composite_Boss.png"; break;
                case '노동착취형 복합 보스': imagePath = "images/Labor_Exploitation_Composite_Boss.png"; break;
                case '무책임형 복합 보스': imagePath = "images/Irresponsible_Composite_Boss.png"; break;
                case '꼰대황제형 복합 보스': imagePath = "images/Old_Fashioned_Emperor_Composite_Boss.png"; break;
                case '이중 스트레스형 복합 보스': imagePath = "images/Dual_Stress_Composite_Boss.png"; break;
                case '약한 스트레스형 보스': imagePath = "images/boss_mild_stress.png"; break;
                case '합리적 평범 보스': imagePath = "images/boss_normal.png"; break;
                case '무난한 일상형 보스': imagePath = "images/boss_ordinary.png"; break;
                default: imagePath = "images/boss_default.png"; break;
            }

            // 이미지 로드
            const img = new Image();
            img.onload = function () {
                callback(true); // 이미지 로드 성공
            };
            img.onerror = function () {
                console.error(`이미지 로드 실패: ${imagePath}`);
                callback(false); // 이미지 로드 실패
            };
            img.src = imagePath;
        }

        document.addEventListener('DOMContentLoaded', function () {
            // URL에서 시드 확인
            const urlParams = new URLSearchParams(window.location.search);
            const hasSeed = urlParams.has('seed');

            // 결과 컨테이너 숨기기
            const resultContainer = document.querySelector('.result-container');
            if (resultContainer) {
                resultContainer.style.display = 'none';
            }

            // 로딩 화면 관련 요소
            const loadingContainer = document.getElementById('loading-container');
            const progressBar = document.getElementById('loading-progress-bar');
            const percentage = document.getElementById('loading-percentage');
            const loadingMessage = document.getElementById('loading-message');
            const showResultsBtn = document.getElementById('show-results-btn');

            // 이미지 로딩 상태 플래그
            let imageLoaded = false;
            let currentProgress = 0;
            const maxProgressBeforeImageLoad = 89; // 이미지 로드 전 최대 진행률

            // 로딩 단계 설정
            const loadingStages = [
                { endProgress: 17, message: "제출된 설문지 분석중..." },
                { endProgress: 40, message: "능력치 차트 생성중..." },
                { endProgress: 58, message: "상사 이미지 생성중..." },
                { endProgress: 71, message: "분석 보고서 생성중..." },
                { endProgress: 89, message: "행동분석 생성중..." }
            ];
            let currentStage = 0;

            // 총 로딩 시간 설정 (0~89%까지 10~15초)
            const minLoadingTime = 10000; // 10초
            const maxLoadingTime = 15000; // 15초
            const totalLoadingTime = Math.floor(Math.random() * (maxLoadingTime - minLoadingTime + 1)) + minLoadingTime;

            // 각 단계별 최소 시간 (1.5초)
            const minStageTime = 1500; // 1.5초

            // 각 단계별 시간 배분 (랜덤하게 하되 최소 시간 보장)
            const stageTimes = [];
            let remainingTime = totalLoadingTime;
            let remainingStages = loadingStages.length;

            // 각 단계별 시간 할당 (마지막 단계 제외)
            for (let i = 0; i < loadingStages.length - 1; i++) {
                // 남은 시간에서 최소 시간을 제외한 범위 내에서 랜덤 시간 할당
                const maxPossibleTime = remainingTime - (minStageTime * (remainingStages - 1));
                const stageTime = Math.max(
                    minStageTime,
                    Math.floor(Math.random() * (maxPossibleTime - minStageTime + 1)) + minStageTime
                );

                stageTimes.push(stageTime);
                remainingTime -= stageTime;
                remainingStages--;
            }

            // 마지막 단계에 남은 시간 할당
            stageTimes.push(Math.max(minStageTime, remainingTime));

            console.log("단계별 할당 시간(ms):", stageTimes);

            // 각 단계의 진행률 증가량 계산
            const stageIncrements = [];
            for (let i = 0; i < loadingStages.length; i++) {
                const startProgress = i === 0 ? 0 : loadingStages[i - 1].endProgress;
                const endProgress = loadingStages[i].endProgress;
                const progressRange = endProgress - startProgress;

                // 진행률 증가량 = 단계의 진행률 범위 / (단계 시간 / 업데이트 간격)
                const updateInterval = 30; // 30ms마다 업데이트
                const increment = progressRange / (stageTimes[i] / updateInterval);

                stageIncrements.push(increment);
            }

            // 보스 유형 분석 및 이미지 프리로드 시작
            const stats = getStatsFromURL();
            const bossAnalysis = analyzeBossType(stats);

            // 이미지 프리로드 시작 (로딩창 표시 직후)
            preloadBossImage(bossAnalysis.baseType, function (success) {
                imageLoaded = true;
                // 이미지 로드 완료 시 추가 조치는 메인 로딩 인터벌에서 처리됨
            });

            // 진행 상태 업데이트 간격
            const updateInterval = 30; // 30ms마다 업데이트

            // 초기 메시지 설정
            loadingMessage.textContent = loadingStages[0].message;

            // 진행 상태 및 메시지 업데이트 함수 수정
            const loadingInterval = setInterval(function () {
                // 현재 단계 결정
                const startProgress = currentStage === 0 ? 0 : loadingStages[currentStage - 1].endProgress;
                const endProgress = loadingStages[currentStage].endProgress;

                // 89% 미만일 때 (이미지 로딩 완료 여부와 관계없이)
                if (currentProgress < maxProgressBeforeImageLoad) {
                    // 현재 단계의 진행률 증가
                    currentProgress += stageIncrements[currentStage];

                    // 현재 단계의 끝에 도달했는지 확인
                    if (currentProgress >= endProgress && currentStage < loadingStages.length - 1) {
                        currentStage++;
                        loadingMessage.textContent = loadingStages[currentStage].message;
                    }

                    // 89%를 넘지 않도록 제한
                    if (currentProgress > maxProgressBeforeImageLoad) {
                        currentProgress = maxProgressBeforeImageLoad;
                    }
                }
                // 89%에 도달했고 이미지가 로드되었을 때
                else if (currentProgress >= maxProgressBeforeImageLoad && imageLoaded) {
                    // 89%에 도달했을 때 "종합 보고서 생성중..." 메시지 표시
                    if (Math.floor(currentProgress) === maxProgressBeforeImageLoad) {
                        loadingMessage.textContent = "종합 보고서 생성중...";
                    }

                    // 89%에서 100%까지 2초 동안 진행
                    currentProgress += (100 - maxProgressBeforeImageLoad) / (2000 / updateInterval);

                    if (currentProgress > 100) {
                        currentProgress = 100;
                    }
                }
                // 이미지가 아직 로드되지 않았지만 89%에 도달한 경우
                else if (currentProgress >= maxProgressBeforeImageLoad && !imageLoaded) {
                    // 89%에서 대기하면서 "종합 보고서 생성중..." 메시지 유지
                    loadingMessage.textContent = "종합 보고서 생성중...";
                }

                // 진행률이 100%에 도달하면 로딩 완료
                if (currentProgress >= 100) {
                    currentProgress = 100;
                    clearInterval(loadingInterval);

                    // 로딩 완료 후 결과 버튼 표시
                    showResultsBtn.style.display = 'inline-block';
                    showResultsBtn.classList.add('pulse');
                    loadingMessage.textContent = "분석 완료! 결과를 확인해보세요.";
                }

                // 프로그레스 바 및 퍼센트 업데이트
                progressBar.style.width = currentProgress + '%';
                percentage.textContent = Math.round(currentProgress) + '%';
            }, updateInterval);

            // 결과 보기 버튼 클릭 이벤트
            showResultsBtn.addEventListener('click', function () {
                // 로딩 화면 숨기기
                loadingContainer.style.display = 'none';

                // 결과 컨테이너 표시
                if (resultContainer) {
                    resultContainer.style.display = 'block';

                    // 차트 다시 그리기 (필요한 경우)
                    if (typeof initializePage === 'function') {
                        initializePage();
                    }
                }
            });
        });

        // 페이지 완전 로드 시에도 초기화 시도 (DOMContentLoaded가 실패한 경우 백업)
        window.addEventListener('load', function () {
            // 아직 초기화되지 않았으면 초기화
            if (!pageInitialized) {
                console.log("DOMContentLoaded에서 초기화되지 않음, 페이지 로드에서 다시 시도");
                initializePage();
            }
        });

        // document.addEventListener('DOMContentLoaded', function () {
        //     // URL에서 시드 확인 - 가장 먼저 실행
        //     const urlParams = new URLSearchParams(window.location.search);
        //     const hasSeed = urlParams.has('seed');

        //     // 시드 유무에 따라 로딩 시간 결정 (확실하게 적용)
        //     let randomLoadingTime;
        //     if (hasSeed) {
        //         // 시드가 있으면 1~2초 로딩
        //         randomLoadingTime = Math.floor(Math.random() * 3000) + 4000; // 1~2초
        //         console.log("공유된 결과: 짧은 로딩 시간 적용", randomLoadingTime, "ms");
        //     } else {
        //         // 시드가 없으면 4~7초 로딩
        //         randomLoadingTime = Math.floor(Math.random() * 3000) + 4000; // 4~7초
        //         console.log("새 테스트 결과: 일반 로딩 시간 적용", randomLoadingTime, "ms");
        //     }

        //     // 로딩 메시지 배열
        //     const loadingMessages = [
        //         "상사의 꼰대력을 측정중...",
        //         "내로남불 지수 분석중...",
        //         "갑질 패턴 탐색중...",
        //         "워라밸 파괴력 계산중...",
        //         "책임회피 사례 수집중...",
        //         "이중인격 지표 분석중...",
        //         "상사의 영혼을 검색중...",
        //         "압박관리 스타일 분석중...",
        //         "퇴사 가능성 예측중..."
        //     ];

        //     // 결과 컨테이너 숨기기
        //     const resultContainer = document.querySelector('.result-container');
        //     if (resultContainer) {
        //         resultContainer.style.display = 'none';
        //     }

        //     // 로딩 화면 표시
        //     const loadingContainer = document.getElementById('loading-container');
        //     const progressBar = document.getElementById('loading-progress-bar');
        //     const percentage = document.getElementById('loading-percentage');
        //     const loadingMessage = document.getElementById('loading-message');
        //     const showResultsBtn = document.getElementById('show-results-btn');

        //     let currentProgress = 0;

        //     // 시드가 있으면 메시지 개수 줄이기
        //     const effectiveMessages = hasSeed ?
        //         loadingMessages.slice(0, 3) : // 시드 있으면 첫 3개 메시지만
        //         loadingMessages;              // 시드 없으면 전체 메시지

        //     // 메시지 변경 간격 (시드 유무에 따라 조정)
        //     const messageChangeInterval = randomLoadingTime / (effectiveMessages.length + 1);
        //     let currentMessageIndex = 0;

        //     // 진행 상태 업데이트 간격
        //     const updateInterval = 30; // 30ms마다 업데이트
        //     const totalSteps = randomLoadingTime / updateInterval;
        //     const incrementPerStep = 100 / totalSteps;

        //     // 진행 상태 및 메시지 업데이트 함수
        //     const loadingInterval = setInterval(function () {
        //         currentProgress += incrementPerStep;

        //         // 진행률이 100%에 도달하면 로딩 완료
        //         if (currentProgress >= 100) {
        //             currentProgress = 100;
        //             clearInterval(loadingInterval);

        //             // // 시드가 있으면 로딩 버튼 자동 클릭 (선택 사항)
        //             // if (hasSeed) {
        //             //     // 잠시 후 자동으로 결과 표시 (시드가 있는 경우)
        //             //     setTimeout(function () {
        //             //         showResultsBtn.click();
        //             //     }, 500);
        //             // }

        //             // 로딩 완료 후 결과 버튼 표시
        //             showResultsBtn.style.display = 'inline-block';
        //             showResultsBtn.classList.add('pulse');

        //             // 마지막 메시지 표시
        //             loadingMessage.textContent = "분석 완료! 결과를 확인해보세요.";
        //         }

        //         // 프로그레스 바 및 퍼센트 업데이트
        //         progressBar.style.width = currentProgress + '%';
        //         percentage.textContent = Math.round(currentProgress) + '%';

        //         // 메시지 업데이트 (시드 유무에 따라 다른 메시지 집합 사용)
        //         if (effectiveMessages.length > 0 &&
        //             currentProgress > (currentMessageIndex + 1) * (100 / effectiveMessages.length)) {
        //             currentMessageIndex = Math.min(currentMessageIndex + 1, effectiveMessages.length - 1);
        //             loadingMessage.textContent = effectiveMessages[currentMessageIndex];
        //         }
        //     }, updateInterval);

        //     // 결과 보기 버튼 클릭 이벤트
        //     showResultsBtn.addEventListener('click', function () {
        //         // 로딩 화면 숨기기
        //         loadingContainer.style.display = 'none';

        //         // 결과 컨테이너 표시
        //         if (resultContainer) {
        //             resultContainer.style.display = 'block';

        //             // 차트 다시 그리기 (필요한 경우)
        //             if (typeof initializePage === 'function') {
        //                 initializePage();
        //             }
        //         }
        //     });
        // });
    </script>
    <script>
        // 페이지 로드 완료 후 실행
        document.addEventListener('DOMContentLoaded', function () {
            // 카카오 SDK 동적 로드
            const kakaoScript = document.createElement('script');
            kakaoScript.src = 'https://developers.kakao.com/sdk/js/kakao.js';
            kakaoScript.onload = function () {
                console.log("카카오 SDK 로드 완료:", typeof Kakao);
                if (typeof Kakao !== 'undefined') {
                    Kakao.init('여기에_발급받은_JavaScript_키를_넣으세요');
                    console.log("카카오 SDK 초기화 상태:", Kakao.isInitialized());
                }
            };
            document.head.appendChild(kakaoScript);
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // 광고 컨테이너들을 선택
            const adContainers = document.querySelectorAll('.ad-container');

            // 현재 활성화된 광고 수를 추적
            let activeAds = 0;
            const MAX_ACTIVE_ADS = 2; // 동시에 활성화될 수 있는 최대 광고 수

            // 각 광고의 원본 HTML을 저장할 객체
            const originalAdContent = {};

            // 초기 광고 컨텐츠 저장
            adContainers.forEach((container, index) => {
                const adContentEl = container.querySelector('.ad-content');
                if (adContentEl) {
                    originalAdContent[index] = adContentEl.innerHTML;
                    // 초기 상태는 로드되지 않음으로 설정
                    container.dataset.loaded = 'false';
                }
            });

            // Intersection Observer 옵션
            const options = {
                root: null, // viewport 기준
                rootMargin: '0px',
                threshold: 0.1 // 10% 이상 보일 때 활성화
            };

            // Observer 콜백 함수
            const handleIntersect = (entries, observer) => {
                entries.forEach(entry => {
                    const adContainer = entry.target;
                    const containerIndex = Array.from(adContainers).indexOf(adContainer);

                    // 광고가 화면에 보이는 경우
                    if (entry.isIntersecting) {
                        // 이미 로드되었는지 확인
                        if (adContainer.dataset.loaded !== 'true' && activeAds < MAX_ACTIVE_ADS) {
                            loadAd(adContainer, containerIndex);
                            activeAds++;
                            console.log(`광고 로드 (${containerIndex}): 활성 광고 수: ${activeAds}`);
                        }
                    }
                    // 광고가 화면에서 사라진 경우
                    else if (!entry.isIntersecting && adContainer.dataset.loaded === 'true') {
                        unloadAd(adContainer, containerIndex);
                        activeAds = Math.max(0, activeAds - 1); // 음수 방지
                        console.log(`광고 언로드 (${containerIndex}): 활성 광고 수: ${activeAds}`);
                    }
                });
            };

            // Observer 생성
            const observer = new IntersectionObserver(handleIntersect, options);

            // 각 광고 컨테이너 관찰 시작
            adContainers.forEach(container => {
                observer.observe(container);
            });

            // 광고 로드 함수
            function loadAd(container, index) {
                // 이미 로드된 광고는 무시
                if (container.dataset.loaded === 'true') return;

                // 광고 컨텐츠 요소 찾기
                const adContent = container.querySelector('.ad-content');
                if (!adContent) return;

                // 원본 HTML 복원
                if (originalAdContent[index]) {
                    adContent.innerHTML = originalAdContent[index];

                    // 카카오 애드핏 스크립트 로드
                    const script = document.createElement('script');
                    script.src = '//t1.daumcdn.net/kas/static/ba.min.js';
                    script.async = true;
                    adContent.appendChild(script);

                    // 로드 상태 표시
                    container.dataset.loaded = 'true';

                    console.log(`광고 ${index} 로드됨`);
                }
            }

            // 광고 언로드 함수
            function unloadAd(container, index) {
                // 로드되지 않은 광고는 무시
                if (container.dataset.loaded !== 'true') return;

                // 광고 컨텐츠 요소 찾기
                const adContent = container.querySelector('.ad-content');
                if (!adContent) return;

                // 광고 내용 비우기 (원본 HTML은 저장되어 있음)
                adContent.innerHTML = '';

                // 로드 상태 초기화
                container.dataset.loaded = 'false';

                console.log(`광고 ${index} 언로드됨`);
            }
        });
    </script>
</body>

</html>
