<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>미운 그놈 - 직장 상사편</title>
    <!-- 파비콘 추가 -->
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }

        .test-container {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            min-height: 400px;
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
        }

        .intro {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 25px;
        }

        .question {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            background-color: #f0f4ff;
            padding: 12px;
            border-radius: 8px;
        }

        .options {
            margin-bottom: 30px;
        }

        .option {
            border: 1px solid #e9ecef;
            background-color: #f8f9fa;
            margin: 10px 0;
            padding: 12px 15px;
            border-radius: 8px;
            transition: all 0.2s;
        }

        .option:hover {
            background-color: #e9ecef;
        }

        .option-text {
            margin-bottom: 10px;
        }

        .selection-group {
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }

        .selection-btn {
            flex: 1;
            padding: 8px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: none;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }

        .selection-btn:hover {
            background-color: #f1f1f1;
        }

        .selection-btn.first {
            border-color: #4a6bdf;
            color: #4a6bdf;
        }

        .selection-btn.first.selected {
            background-color: #4a6bdf;
            color: white;
        }

        .selection-btn.second {
            border-color: #d9534f;
            /* 빨간색 테두리 */
            color: #d9534f;
            /* 빨간색 글자 */
        }

        .selection-btn.second.selected {
            background-color: #d9534f;
            /* 빨간색 배경 */
            color: white;
        }

        .option.selected-first .option-text {
            font-weight: bold;
            color: #4a6bdf;
        }

        .option.selected-second .option-text {
            font-weight: bold;
            color: #d9534f;
            /* 빨간색 글자 */
        }

        .button-container {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .nav-btn {
            padding: 12px;
            background-color: #4a6bdf;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .nav-btn:hover {
            background-color: #3a54b4;
        }

        .nav-btn:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        .prev-btn {
            flex: 0 0 auto;
            width: 100px;
        }

        .next-btn,
        .submit-btn {
            flex: 0 0 auto;
            width: 100px;
        }

        .error {
            color: #d9534f;
            margin-bottom: 15px;
            display: none;
        }

        .progress-container {
            margin: 20px 0;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background-color: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background-color: #4a6bdf;
            width: 0%;
            transition: width 0.3s;
        }

        .question-number {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }

        /* 질문 페이지 표시/숨김 */
        .question-page {
            display: none;
        }

        .question-page.active {
            display: block;
        }

        .intro-page {
            display: block;
        }

        .page-indicators {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }

        .page-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #e9ecef;
            margin: 0 5px;
            cursor: pointer;
        }

        .page-indicator.active {
            background-color: #4a6bdf;
        }

        .emoji {
            font-size: 24px;
            margin-right: 8px;
        }

        .special-text {
            color: #d9534f;
            font-weight: bold;
        }

        /* 선택된 옵션 스타일 */
        .option.selected-first .option-text {
            font-weight: bold;
            color: #4a6bdf;
        }

        .option.dimmed {
            opacity: 0.6;
        }
    </style>
</head>

<body>
    <h1>미운 그놈 분석하기</h1>
    <div class="subtitle">직장 상사편</div>

    <div class="test-container">
        <!-- 인트로 페이지 -->
        <!-- 인트로 페이지 부분만 수정합니다 -->
        <div class="intro-page" id="intro-page">
            <div class="intro">
                <p>"하아..." 오늘도 퇴근길에 상사 욕 한 사발 하셨나요?</p>
                <p>그 사람이 왜 이렇게 밉고 싫은지, 그리고 어떻게 버텨야 할지 이 테스트가 알려드릴게요!</p>
                <p><strong>각 상황에서 상사의 말과 행동으로 제일 비슷한 선택지 하나, 정반대인 선택지 하나를 골라주세요. (가볍게 하세요! 혹시 회사에서 보고 있다면... 뒤에 조심
                        👀)</strong></p>
            </div>

            <!-- 선택 방법 예시 추가 -->
            <div class="selection-example">
                <h3>선택 방법 예시</h3>
                <div class="example-container">
                    <!-- 예시 이미지 -->
                    <div class="example-image">
                        <div class="option example-option">
                            <div class="option-text">A. 술 먹을때만 가족인척 친한척 한다.</div>
                            <div class="selection-group">
                                <!-- disabled 속성과 example-btn 클래스 추가 -->
                                <button class="selection-btn first selected example-btn" disabled>가장 가깝다</button>
                                <button class="selection-btn second example-btn" disabled>가장 멀다</button>
                            </div>
                        </div>
                        <div class="option example-option">
                            <div class="option-text">B. 회식이 친목도모가 아니라 업무의 연장으로 생각한다.</div>
                            <div class="selection-group">
                                <button class="selection-btn first example-btn" disabled>가장 가깝다</button>
                                <button class="selection-btn second example-btn" disabled>가장 멀다</button>
                            </div>
                        </div>
                        <div class="option example-option">
                            <div class="option-text">C. 회식자리에서 본인의 불만사항 늘어놓기 바쁘다.</div>
                            <div class="selection-group">
                                <button class="selection-btn first example-btn" disabled>가장 가깝다</button>
                                <button class="selection-btn second selected example-btn" disabled>가장 멀다</button>
                            </div>
                        </div>
                        <div class="option example-option">
                            <div class="option-text">D. 2차 3차 안가는 사람을 기억하고 있다.</div>
                            <div class="selection-group">
                                <button class="selection-btn first example-btn" disabled>가장 가깝다</button>
                                <button class="selection-btn second example-btn" disabled>가장 멀다</button>
                            </div>
                        </div>
                    </div>

                    <!-- 예시 설명 -->
                    <div class="example-description">
                        <p>👉 위 예시에서는:</p>
                        <ul>
                            <li><span class="highlight">A 옵션</span>이 상사와 <span class="highlight">'가장 가까운'</span> 행동으로
                                선택되었습니다.</li>
                            <li><span class="highlight">C 옵션</span>이 상사와 <span class="highlight">'가장 먼'</span> 행동으로
                                선택되었습니다.</li>
                            <li>B와 D 옵션은 선택되지 않았습니다.</li>
                        </ul>
                        <p>각 질문마다 반드시 <span class="important">'가장 가까운' 행동 하나</span>와 <span class="important">'가장 먼' 행동
                                하나</span>만 선택해 주세요!</p>
                    </div>
                </div>
            </div>

            <!-- 참고 사항 추가 -->
            <div class="intro-note">
                <p>💡 <strong>참고:</strong> 너무 진지하게 생각하지 마세요. 회사 컴퓨터로 보고 있다면 빨리 창을 닫으세요!</p>
            </div>

            <!-- 여기에 광고 추가 -->
            <div class="ad-container">
                <div class="ad-header">
                    <span>추천</span>
                </div>
                <div class="ad-content">
                    <ins class="kakao_ad_area" style="display:none;" data-ad-unit="DAN-YOUR_AD_UNIT_ID"
                        data-ad-width="250" data-ad-height="250"></ins>
                    <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
                </div>
            </div>

            <div class="button-container">
                <div></div>
                <button id="start-btn" class="nav-btn next-btn"
                    style="width: auto; padding-left: 30px; padding-right: 30px;">테스트 시작</button>
            </div>
        </div>

        <!-- 예시를 위한 CSS 스타일 추가 (head 태그 내 style 태그 안에 추가) -->
        <style>
            .selection-example {
                background-color: #f0f4ff;
                border-radius: 8px;
                padding: 15px;
                margin-bottom: 25px;
            }

            .selection-example h3 {
                text-align: center;
                margin-bottom: 15px;
                color: #4a6bdf;
            }

            .example-container {
                display: flex;
                flex-direction: column;
            }

            .example-image {
                border: 2px dashed #4a6bdf;
                border-radius: 8px;
                padding: 15px;
                margin-bottom: 15px;
                background-color: white;
            }

            .example-option {
                opacity: 0.85;
                transform: scale(0.95);
                margin: 8px 0;
            }

            .example-option .option-text {
                font-size: 0.9em;
            }

            /* 선택된 예시 강조 */
            .example-option:nth-child(1) {
                border-left: 4px solid #4a6bdf;
            }

            .example-option:nth-child(3) {
                border-left: 4px solid #d9534f;
            }

            /* 예시 버튼 스타일 추가 */
            .example-btn {
                cursor: default !important;
                /* 커서를 기본으로 변경 */
                pointer-events: none;
                /* 포인터 이벤트 비활성화 */
                opacity: 0.9;
                /* 약간 불투명하게 하여 비활성화된 느낌 줌 */
            }

            .example-btn.selected {
                opacity: 1;
                /* 선택된 버튼은 완전히 불투명하게 */
            }

            .example-description {
                background-color: white;
                padding: 15px;
                border-radius: 8px;
            }

            .example-description ul {
                margin: 10px 0;
                padding-left: 20px;
            }

            .example-description li {
                margin-bottom: 8px;
            }

            .highlight {
                font-weight: bold;
                padding: 2px 4px;
                border-radius: 4px;
            }

            .example-description li:nth-child(1) .highlight:first-child {
                background-color: rgba(74, 107, 223, 0.2);
            }

            .example-description li:nth-child(1) .highlight:last-child {
                background-color: rgba(74, 107, 223, 0.2);
                color: #4a6bdf;
            }

            .example-description li:nth-child(2) .highlight:first-child {
                background-color: rgba(217, 83, 79, 0.2);
            }

            .example-description li:nth-child(2) .highlight:last-child {
                background-color: rgba(217, 83, 79, 0.2);
                color: #d9534f;
            }

            .important {
                font-weight: bold;
                background-color: #fff3cd;
                padding: 2px 4px;
                border-radius: 4px;
            }

            .intro-note {
                background-color: #e8f5e9;
                border-radius: 8px;
                padding: 12px;
                margin-bottom: 25px;
            }

            /* 반응형 스타일 추가 */
            @media (min-width: 768px) {
                .example-container {
                    flex-direction: row;
                    align-items: flex-start;
                    gap: 20px;
                }

                .example-image {
                    flex: 2;
                }

                .example-description {
                    flex: 1;
                }
            }
        </style>

        <!-- 프로그레스 바 -->
        <div class="progress-container" id="progress-container" style="display: none;">
            <div class="progress-bar">
                <div class="progress" id="progress-bar"></div>
            </div>
        </div>

        <!-- 페이지 인디케이터 -->
        <div class="page-indicators" id="page-indicators" style="display: none;">
            <!-- JavaScript로 동적 생성 -->
        </div>

        <!-- 질문 1 -->
        <div class="question-page" id="question-page-1">
            <div class="question-number">질문 1/7</div>
            <div class="question"><span class="emoji">🤔</span>아침 출근하는 길, 그 상사를 떠올리면 어떤 기분이 드나요?</div>
            <div class="options">
                <div class="option" id="option-1-A">
                    <div class="option-text">A. 별다른 생각이 들지 않는다. 그냥 평화롭지는 않지만 그렇다고 빠듯하지도 않은 하루가 반복될 것 같은 기분이다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="1" data-option="A"
                            data-stats="합리성:+5,무능력:+8">가장 가깝다</button>
                        <button class="selection-btn second" data-question="1" data-option="A"
                            data-stats="합리성:-5,무능력:-8">가장 멀다</button>
                    </div>
                </div>
                <div class="option" id="option-1-B">
                    <div class="option-text">B. 어제 밤에 보았던 재밌는 영상이나 이슈를 이야기할 생각에 약간 미소가 지어진다. 갈등 상황들도 있지만, 금세 해소되며 일하다 보면
                        그럴 수도 있지 라는 생각이 든다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="1" data-option="B"
                            data-stats="합리성:+10,꼰대력:-6,갑질지수:-6">가장 가깝다</button>
                        <button class="selection-btn second" data-question="1" data-option="B"
                            data-stats="합리성:-10,꼰대력:+6,갑질지수:+6">가장 멀다</button>
                    </div>
                </div>
                <div class="option" id="option-1-C">
                    <div class="option-text">C. 어제 미처 다 못했던 업무가 떠오르고, 왜 못했었는지 설명해야 하는 상황이 떠오른다. 분명 상황 설명을 해도 하나하나 따지는
                        질의응답이 있을 것이란 생각이 든다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="1" data-option="C"
                            data-stats="꼰대력:+10,갑질지수:+9,합리성:-5">가장 가깝다</button>
                        <button class="selection-btn second" data-question="1" data-option="C"
                            data-stats="꼰대력:-10,갑질지수:-9,합리성:+5">가장 멀다</button>
                    </div>
                </div>
                <div class="option" id="option-1-D">
                    <div class="option-text">D. 숨이 턱 막힌다. 오늘도 그 사람을 마주한다는 생각을 하는 것만으로도 스트레스를 받는다. 오늘은 어떤 일이 나에게 압박감을 줄지
                        걱정이다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="1" data-option="D"
                            data-stats="갑질지수:+11,워라밸파괴:+12,합리성:-8">가장 가깝다</button>
                        <button class="selection-btn second" data-question="1" data-option="D"
                            data-stats="갑질지수:-11,워라밸파괴:-12,합리성:+8">가장 멀다</button>
                    </div>
                </div>
            </div>

            <div class="error" id="error-message-1">두 개의 선택지를 골라주세요! 상사와 '가장 가까운' 행동, '가장 먼' 행동 각각 하나씩!</div>

            <div class="button-container">
                <button class="nav-btn prev-btn" disabled>이전</button>
                <button class="nav-btn next-btn" id="next-btn-1">다음</button>
            </div>
        </div>

        <!-- 질문 2 -->
        <div class="question-page" id="question-page-2">
            <div class="question-number">질문 2/7</div>
            <div class="question"><span class="emoji">👋</span>그 상사는 자기보다 직급 낮은 사람들을 부를 때 어떻게 부르나요?</div>
            <div class="options">
                <div class="option" id="option-2-A">
                    <div class="option-text">A. OO씨~ 혹은 OO 대리님~ 과 같이 존대를 섞어가며 친근하게 부른다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="2" data-option="A"
                            data-stats="합리성:+10,꼰대력:-6,갑질지수:-6">가장 가깝다</button>
                        <button class="selection-btn second" data-question="2" data-option="A"
                            data-stats="합리성:-10,꼰대력:+6,갑질지수:+6">가장 멀다</button>
                    </div>
                </div>
                <div class="option" id="option-2-B">
                    <div class="option-text">B. OO 대리 혹은 철수야~ 라며 약간의 하대 섞인 듯하지만 친근한 느낌으로 부른다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="2" data-option="B"
                            data-stats="꼰대력:+4, 합리성:+2">가장 가깝다</button>
                        <button class="selection-btn second" data-question="2" data-option="B"
                            data-stats="꼰대력:-4, 합리성:-2">가장 멀다</button>
                    </div>
                </div>
                <div class="option" id="option-2-C">
                    <div class="option-text">C. "야!" 혹은 "인마!" 와 같이 인격모독적으로 부른다. 간혹 손가락을 까딱거리며 제 집 뽀삐 부르듯이 부르는 경우도 있다.
                    </div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="2" data-option="C"
                            data-stats="갑질지수:+11,꼰대력:+12,합리성:-8">가장 가깝다</button>
                        <button class="selection-btn second" data-question="2" data-option="C"
                            data-stats="갑질지수:-11,꼰대력:-12,합리성:+8">가장 멀다</button>
                    </div>
                </div>
                <div class="option" id="option-2-D">
                    <div class="option-text">D. 딱히 부르지도 않고 일방적으로 업무지시를 한 후에 가버린다. 다른 사람이 들을 준비가 되었는지는 전혀 신경 쓰지 않는다.
                    </div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="2" data-option="D"
                            data-stats="꼰대력:+12,무능력:+12,갑질지수:+11,합리성:-5">가장 가깝다</button>
                        <button class="selection-btn second" data-question="2" data-option="D"
                            data-stats="꼰대력:-12,무능력:-12,갑질지수:-11,합리성:+5">가장 멀다</button>
                    </div>
                </div>
            </div>

            <div class="error" id="error-message-2">두 개 다 선택해주세요! 상사와 '가장 가까운' 행동과 '가장 먼' 행동 하나씩!</div>

            <div class="button-container">
                <button class="nav-btn prev-btn" id="prev-btn-2">이전</button>
                <button class="nav-btn next-btn" id="next-btn-2">다음</button>
            </div>
        </div>

        <!-- 질문 3 -->
        <div class="question-page" id="question-page-3">
            <div class="question-number">질문 3/7</div>
            <div class="question"><span class="emoji">⏰</span>그 상사는 바쁠 때 어떤 태도를 보이나요?</div>
            <div class="options">
                <div class="option" id="option-3-A">
                    <div class="option-text">A. 바쁜 티를 내지만 부하직원들에게 짜증을 내거나 하지는 않으며 평소처럼 침착함을 유지하려 노력한다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="3" data-option="A"
                            data-stats="합리성:+10,갑질지수:-6,꼰대력:-6,워라밸파괴:-7">가장 가깝다</button>
                        <button class="selection-btn second" data-question="3" data-option="A"
                            data-stats="합리성:-10,갑질지수:+6,꼰대력:+6,워라밸파괴:+7">가장 멀다</button>
                    </div>
                </div>
                <div class="option" id="option-3-B">
                    <div class="option-text">B. 바쁘다는 핑계로 부하직원들에게 업무를 떠넘긴다. "내가 지금 바쁘니까 이건 네가 해줘"라는 논리인데, 거절하면 이것도 못해주냐며
                        되려 화를 낸다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="3" data-option="B"
                            data-stats="책임회피:+25,무능력:+10,갑질지수:+11,내로남불:+17,합리성:-6">가장 가깝다</button>
                        <button class="selection-btn second" data-question="3" data-option="B"
                            data-stats="책임회피:-25,무능력:-10,갑질지수:-11,내로남불:-17,합리성:+6">가장 멀다</button>
                    </div>
                </div>
                <div class="option" id="option-3-C">
                    <div class="option-text">C. 바쁘게 업무를 처리하지만 합리적인 우선순위에 따라 하나씩 일을 처리한다. 이런 모습을 보면 능력은 있는 사람이라는 생각이 든다.
                    </div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="3" data-option="C"
                            data-stats="합리성:+10,무능력:-15">가장 가깝다</button>
                        <button class="selection-btn second" data-question="3" data-option="C"
                            data-stats="합리성:-10,무능력:+15">가장 멀다</button>
                    </div>
                </div>
                <div class="option" id="option-3-D">
                    <div class="option-text">D. 바쁜 티를 팍팍 내고 얼굴에 인상을 한가득 찌푸리고 있다. 눈이라도 마주치면 온갖 짜증을 들어야 하기 때문에 쳐다보는 것도
                        힘들다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="3" data-option="D"
                            data-stats="갑질지수:+11,꼰대력:+12,합리성:-10">가장 가깝다</button>
                        <button class="selection-btn second" data-question="3" data-option="D"
                            data-stats="갑질지수:-11,꼰대력:-12,합리성:+10">가장 멀다</button>
                    </div>
                </div>
            </div>

            <div class="error" id="error-message-3">두 개 다 선택해주세요! 상사와 '가장 가까운' 행동과 '가장 먼' 행동 하나씩!</div>

            <div class="button-container">
                <button class="nav-btn prev-btn" id="prev-btn-3">이전</button>
                <button class="nav-btn next-btn" id="next-btn-3">다음</button>
            </div>
        </div>

        <!-- 질문 4 -->
        <div class="question-page" id="question-page-4">
            <div class="question-number">질문 4/7</div>
            <div class="question"><span class="emoji">🍱</span>점심시간이 되면 그 상사는 보통 무엇을 하나요?</div>
            <div class="options">
                <div class="option" id="option-4-A">
                    <div class="option-text">A. 식사 후에 낮잠을 취하거나 휴게실 등에서 조용히 휴식을 취한다. 그 시간에 나도 편하게 쉴 수 있기 때문에 힐링하는 시간이다.
                    </div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="4" data-option="A"
                            data-stats="합리성:+8,워라밸파괴:-9,갑질지수:-2">가장 가깝다</button>
                        <button class="selection-btn second" data-question="4" data-option="A"
                            data-stats="합리성:-8,워라밸파괴:+9,갑질지수:+2">가장 멀다</button>
                    </div>
                </div>
                <div class="option" id="option-4-B">
                    <div class="option-text">B. 계속해서 업무를 보며 마우스 소리, 키보드 소리, 프린트 소리 등을 시끄럽게 낸다. 일하는 건 알겠는데, 조용히 쉬고 싶은
                        사람들을 불편하게 만드는 게 마음에 안 든다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="4" data-option="B"
                            data-stats="워라밸파괴:+12,내로남불:+12,합리성:-3">가장 가깝다</button>
                        <button class="selection-btn second" data-question="4" data-option="B"
                            data-stats="워라밸파괴:-12,내로남불:-12,합리성:+3">가장 멀다</button>
                    </div>
                </div>
                <div class="option" id="option-4-C">
                    <div class="option-text">C. 쉬고 있는 부하 직원에게 잠시 이야기좀 하자며 밖으로 불러낸다. 나는 피곤해서 낮잠이라도 자고 싶은데, 점심시간 내내 본인의
                        생각을 떠든다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="4" data-option="C"
                            data-stats="꼰대력:+12,워라밸파괴:+15,갑질지수:+4,합리성:-6">가장 가깝다</button>
                        <button class="selection-btn second" data-question="4" data-option="C"
                            data-stats="꼰대력:-12,워라밸파괴:-15,갑질지수:-4,합리성:+6">가장 멀다</button>
                    </div>
                </div>
                <div class="option" id="option-4-D">
                    <div class="option-text">D. 오전에 생긴 업무적인 이슈에 대해 논의가 필요하다며 회의를 소집한다. 당연히 회의는 점심시간이 끝난 이후까지도 이어지기 때문에,
                        회의 끝나고 나면 점심시간은 이미 끝나 있다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="4" data-option="D"
                            data-stats="워라밸파괴:+15,갑질지수:+8,합리성:-8">가장 가깝다</button>
                        <button class="selection-btn second" data-question="4" data-option="D"
                            data-stats="워라밸파괴:-15,갑질지수:-8,합리성:+8">가장 멀다</button>
                    </div>
                </div>
            </div>

            <div class="error" id="error-message-4">두 개 다 선택해주세요! 상사와 '가장 가까운' 행동과 '가장 먼' 행동 하나씩!</div>

            <div class="button-container">
                <button class="nav-btn prev-btn" id="prev-btn-4">이전</button>
                <button class="nav-btn next-btn" id="next-btn-4">다음</button>
            </div>
        </div>

        <!-- 질문 5 -->
        <div class="question-page" id="question-page-5">
            <div class="question-number">질문 5/7</div>
            <div class="question"><span class="emoji">😱</span>상사에게 문제상황을 보고했을 때, 그 상사는 어떻게 반응하나요?</div>
            <div class="options">
                <div class="option" id="option-5-A">
                    <div class="option-text">A. 주위 사람들에게 차분히 필요한 정보를 물어보고, 문제의 원인과 해결방안을 하나씩 정해간다. 그 이후에 따끔한 피드백을 주는 경우가
                        있지만, 꽤 합리적이란 생각이 든다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="5" data-option="A"
                            data-stats="합리성:+10,무능력:-8,책임회피:-20">가장 가깝다</button>
                        <button class="selection-btn second" data-question="5" data-option="A"
                            data-stats="합리성:-10,무능력:+8,책임회피:+20">가장 멀다</button>
                    </div>
                </div>
                <div class="option" id="option-5-B">
                    <div class="option-text">B. 관련 담당자를 호출하여 문제를 해결하지만, 문제를 보고할 때 내가 사용한 말과 단어를 인용하며 담당자를 나무란다. 가끔 곤란할
                        때가 있다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="5" data-option="B"
                            data-stats="책임회피:+20,무능력:+15,갑질지수:+7,합리성:-4">가장 가깝다</button>
                        <button class="selection-btn second" data-question="5" data-option="B"
                            data-stats="책임회피:-20,무능력:+15,갑질지수:-7,합리성:+4">가장 멀다</button>
                    </div>
                </div>
                <div class="option" id="option-5-C">
                    <div class="option-text">C. 어디에서부터 일이 잘못되었는지는 생각하지 않고, 문제를 보고한 부하직원에게 다짜고짜 짜증을 낸다. 내 잘못이 아니지만 분위기상
                        반박하면 안 될 것 같아 넘어가는 경우가 잦다. 그래도 문제는 잘 해결된다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="5" data-option="C"
                            data-stats="갑질지수:+11,꼰대력:+15,합리성:-10,무능력:-17">가장 가깝다</button>
                        <button class="selection-btn second" data-question="5" data-option="C"
                            data-stats="갑질지수:-11,꼰대력:-15,합리성:+10,무능력:+17">가장 멀다</button>
                    </div>
                </div>
                <div class="option" id="option-5-D">
                    <div class="option-text">D. 그 정도는 알아서 해결해야 하는 거 아니냐며 짜증을 낸다. 심지어 욕으로 시작해 욕으로 대화가 끝나기 때문에 문제해결도 내
                        몫이다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="5" data-option="D"
                            data-stats="책임회피:+25,무능력:+20,갑질지수:+11,합리성:-8">가장 가깝다</button>
                        <button class="selection-btn second" data-question="5" data-option="D"
                            data-stats="책임회피:-25,무능력:-20,갑질지수:-11,합리성:+8">가장 멀다</button>
                    </div>
                </div>
            </div>

            <div class="error" id="error-message-5">두 개 다 선택해주세요! 상사와 '가장 가까운' 행동과 '가장 먼' 행동 하나씩!</div>

            <div class="button-container">
                <button class="nav-btn prev-btn" id="prev-btn-5">이전</button>
                <button class="nav-btn next-btn" id="next-btn-5">다음</button>
            </div>
        </div>

        <!-- 질문 6 -->
        <div class="question-page" id="question-page-6">
            <div class="question-number">질문 6/7</div>
            <div class="question"><span class="emoji">🏃</span>퇴근시간이 다가올 때, 그 상사는 어떻게 행동하나요?</div>
            <div class="options">
                <div class="option" id="option-6-A">
                    <div class="option-text">A. 하루 업무를 마무리하며 오늘 실적과 내일 해야 할 업무를 정비한다. 이 덕분에 하루 업무가 마무리 되는 느낌이 든다. 퇴근하며
                        "고생 많으셨어요"와 같은 응원 섞인 인사말도 종종 건넨다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="6" data-option="A"
                            data-stats="합리성:+10,워라밸파괴:-12,갑질지수:-6">가장 가깝다</button>
                        <button class="selection-btn second" data-question="6" data-option="A"
                            data-stats="합리성:-10,워라밸파괴:+12,갑질지수:+6">가장 멀다</button>
                    </div>
                </div>
                <div class="option" id="option-6-B">
                    <div class="option-text">B. 갑자기 업무상황을 물어온다. 대답해주다 보면 퇴근 시간이 지나는 건 다반사다. 이후에 이어지는 "밥 먹고 와서 하자"라는 식의
                        콤보로 야근을 은근히 강요한다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="6" data-option="B"
                            data-stats="워라밸파괴:+15,갑질지수:+8,합리성:-4">가장 가깝다</button>
                        <button class="selection-btn second" data-question="6" data-option="B"
                            data-stats="워라밸파괴:-15,갑질지수:-8,합리성:+4">가장 멀다</button>
                    </div>
                </div>
                <div class="option" id="option-6-C">
                    <div class="option-text">C. 오늘 마치고 술 한잔 마실 부하직원을 찾는다. 집에 들어가기 싫은 건지 매일 야근을 하거나 술자리를 잡는다. 거절하는 것도 일이라
                        꽤나 심력소모가 크다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="6" data-option="C"
                            data-stats="워라밸파괴:+15,내로남불:+14,갑질지수:+8,합리성:-8">가장 가깝다</button>
                        <button class="selection-btn second" data-question="6" data-option="C"
                            data-stats="워라밸파괴:-15,내로남불:-14,갑질지수:-8,합리성:+8">가장 멀다</button>
                    </div>
                </div>
                <div class="option" id="option-6-D">
                    <div class="option-text">D. 오늘 업무를 다 못 끝낸 사람들에게는 야근을 지시한다. 이번 일이 꼭 시급하고 특별한 일인 것처럼 강조하지만,
                        365일 매일 같은 패턴이다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="6" data-option="D"
                            data-stats="꼰대력:+12,워라밸파괴:+15,갑질지수:+7,합리성:-8">가장 가깝다</button>
                        <button class="selection-btn second" data-question="6" data-option="D"
                            data-stats="꼰대력:-12,워라밸파괴:-15,갑질지수:-7,합리성:+8">가장 멀다</button>
                    </div>
                </div>
            </div>

            <div class="error" id="error-message-6">두 개 다 선택해주세요! 상사와 '가장 가까운' 행동과 '가장 먼' 행동 하나씩!</div>

            <div class="button-container">
                <button class="nav-btn prev-btn" id="prev-btn-6">이전</button>
                <button class="nav-btn next-btn" id="next-btn-6">다음</button>
            </div>
        </div>

        <!-- 질문 7 -->
        <div class="question-page" id="question-page-7">
            <div class="question-number">질문 7/7</div>
            <div class="question"><span class="emoji">🍻</span>팀 회식 자리에서 그 상사는 어떤 식으로 행동하나요?</div>
            <div class="options">
                <div class="option" id="option-7-A">
                    <div class="option-text">A. 다 같이 먹고 즐기며 웃고 떠든다. 평소 갈등이 생길 때에는 그렇게 밉다가도 회식을 통해 내 감정이 해소되는 것을 보며 "이런 게
                        회사생활이지"라는 생각도 든다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="7" data-option="A"
                            data-stats="합리성:+8,내로남불:+5,갑질지수:-4">가장 가깝다</button>
                        <button class="selection-btn second" data-question="7" data-option="A"
                            data-stats="합리성:-8,내로남불:-5,갑질지수:+4">가장 멀다</button>
                    </div>
                </div>
                <div class="option" id="option-7-B">
                    <div class="option-text">B. 내가 잘하고 있는 것들을 하나씩 짚어주며 격려해준다. 물론 쓴 소리도 조금씩 섞지만, 전체적인 느낌이 나쁘지 않다. 내가 평소에
                        아쉬웠던 점, 서운했던 점을 이야기하면 잘 들어준다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="7" data-option="B"
                            data-stats="합리성:+10,무능력:-6,갑질지수:-6">가장 가깝다</button>
                        <button class="selection-btn second" data-question="7" data-option="B"
                            data-stats="합리성:-10,무능력:+6,갑질지수:+6">가장 멀다</button>
                    </div>
                </div>
                <div class="option" id="option-7-C">
                    <div class="option-text">C. 평소 내 업무 방식이나 행동을 지적하기 바쁘다. 술에 취해서 혀는 꼬이고 눈도 풀렸으면서 "나 때는"이라는 말이나 이와 비슷한
                        말들을 한 시간 넘게 한다. 술은 원샷이라고 하면서 본인은 꺾어 마시는 것도 괜히 짜증난다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="7" data-option="C"
                            data-stats="꼰대력:+12,내로남불:+15,갑질지수:+11,합리성:-8">가장 가깝다</button>
                        <button class="selection-btn second" data-question="7" data-option="C"
                            data-stats="꼰대력:-12,내로남불:-15,갑질지수:-11,합리성:+8">가장 멀다</button>
                    </div>
                </div>
                <div class="option" id="option-7-D">
                    <div class="option-text">D. 잘 어울리지 않는다. '술을 못해서' 혹은 '집에 가봐야 해서'와 같은 말로 회식 자리를 피하기 일쑤다. 이해는 되지만 이왕
                        회식자리에 온 김에 대화를 했으면 좋겠는데, 회식자리에서는 적당히 밥만 먹다가 내일되면 또 딱딱한 회사모드로 돌아선다.</div>
                    <div class="selection-group">
                        <button class="selection-btn first" data-question="7" data-option="D"
                            data-stats="무능력:+8,내로남불:+13,합리성:-8">가장 가깝다</button>
                        <button class="selection-btn second" data-question="7" data-option="D"
                            data-stats="무능력:-8,내로남불:-13,합리성:+8">가장 멀다</button>
                    </div>
                </div>
            </div>

            <div class="error" id="error-message-7">두 개 다 선택해주세요! 상사와 '가장 가까운' 행동과 '가장 먼' 행동 하나씩!</div>

            <div class="button-container">
                <button class="nav-btn prev-btn" id="prev-btn-7">이전</button>
                <button class="nav-btn submit-btn" id="submit-btn">결과 보기</button>
            </div>
        </div>

        <!-- JavaScript 코드 수정 부분 -->
        <script>
            // 능력치 정의
            const statTypes = {
                '꼰대력': { color: '#8e44ad', description: '과거 방식을 고집하고 변화를 거부하는 정도' },
                '내로남불': { color: '#e74c3c', description: '본인에게는 관대하고 타인에게는 엄격한 정도' },
                '갑질지수': { color: '#c0392b', description: '권위적 태도로 압박하고 공격하는 정도' },
                '책임회피': { color: '#f39c12', description: '실패와 문제를 타인에게 전가하는 정도' },
                '워라밸파괴': { color: '#d35400', description: '개인 시간을 존중하지 않고 침해하는 정도' },
                '무능력': { color: '#7f8c8d', description: '실무능력과 판단력이 부족한 정도' },
                '합리성': { color: '#2ecc71', description: '공정하고 합리적인 사고를 하는 정도' }
            };

            // 결과 저장 객체
            const statsResults = {};
            Object.keys(statTypes).forEach(stat => {
                statsResults[stat] = 0;
            });

            // 질문 페이지 관리
            const totalPages = 7;
            let currentPage = 0; // 0은 인트로 페이지, 1-7은 질문 페이지

            // 각 질문별 선택 상태 저장
            const selections = {};

            // 페이지 인디케이터 생성
            function createPageIndicators() {
                const container = document.getElementById('page-indicators');
                if (!container) return; // 컨테이너가 없으면 함수 종료

                // 기존 인디케이터 제거
                container.innerHTML = '';

                // 인트로 페이지 인디케이터
                const introIndicator = document.createElement('div');
                introIndicator.className = 'page-indicator active';
                introIndicator.dataset.page = 0;
                container.appendChild(introIndicator);

                // 질문 페이지 인디케이터
                for (let i = 1; i <= totalPages; i++) {
                    const indicator = document.createElement('div');
                    indicator.className = 'page-indicator';
                    indicator.dataset.page = i;
                    container.appendChild(indicator);

                    // 클릭 이벤트 추가
                    indicator.addEventListener('click', function () {
                        navigateToPage(parseInt(this.dataset.page));
                    });
                }
            }

            // 페이지 이동 함수
            function navigateToPage(pageNum) {
                // 현재 페이지가 유효한지 확인 (다음 버튼 클릭 시)
                if (pageNum > currentPage && currentPage > 0) {
                    const isValid = validatePage(currentPage);
                    if (!isValid) return;
                }

                // 이동할 페이지가 범위 내인지 확인
                if (pageNum < 0 || pageNum > totalPages) return;

                // 현재 페이지 숨기기
                if (currentPage === 0) {
                    document.getElementById('intro-page').style.display = 'none';
                } else {
                    document.getElementById(`question-page-${currentPage}`).classList.remove('active');
                }

                // 새 페이지 표시
                currentPage = pageNum;

                if (currentPage === 0) {
                    document.getElementById('intro-page').style.display = 'block';
                    document.getElementById('progress-container').style.display = 'none';
                    document.getElementById('page-indicators').style.display = 'none';
                } else {
                    document.getElementById(`question-page-${currentPage}`).classList.add('active');
                    document.getElementById('progress-container').style.display = 'block';
                    document.getElementById('page-indicators').style.display = 'flex';
                    updateProgress();
                }

                // 페이지 인디케이터 업데이트
                updatePageIndicators();
            }

            // 페이지 유효성 검사
            function validatePage(pageNum) {
                if (!selections[pageNum] || !selections[pageNum].first || !selections[pageNum].second) {
                    document.getElementById(`error-message-${pageNum}`).style.display = 'block';
                    return false;
                }

                // 같은 옵션을 '첫 번째'와 '두 번째'로 동시에 선택할 수 없음
                if (selections[pageNum].first === selections[pageNum].second) {
                    document.getElementById(`error-message-${pageNum}`).style.display = 'block';
                    return false;
                }

                document.getElementById(`error-message-${pageNum}`).style.display = 'none';

                // 결과 저장
                savePageResult(pageNum, selections[pageNum].first, selections[pageNum].second);

                return true;
            }
            // 선택 처리 로직 수정
            function handleSelectionBtnClick(event) {
                try {
                    const button = event.target;

                    // 예시 버튼인 경우 무시
                    if (button.classList.contains('example-btn')) {
                        return;
                    }

                    const questionNum = button.dataset.question;
                    const option = button.dataset.option;

                    // 필요한 데이터가 없으면 함수 종료
                    if (!questionNum || !option) {
                        console.warn('선택 버튼에 필요한 데이터 속성이 없습니다');
                        return;
                    }

                    const isFirst = button.classList.contains('first');

                    // 이미 선택된 버튼이면 선택 취소
                    if (button.classList.contains('selected')) {
                        button.classList.remove('selected');

                        if (isFirst) {
                            if (selections[questionNum]) {
                                selections[questionNum].first = null;
                            }
                        } else {
                            if (selections[questionNum]) {
                                selections[questionNum].second = null;
                            }
                        }

                        // 선택 취소시 옵션들 투명도 복원
                        resetOptionOpacity(questionNum);
                        return;
                    }

                    // 이미 다른 유형(first/second)으로 같은 옵션이 선택되어 있는지 확인
                    if ((isFirst && selections[questionNum] && selections[questionNum].second === option) ||
                        (!isFirst && selections[questionNum] && selections[questionNum].first === option)) {
                        // 이미 다른 유형으로 선택된 옵션인 경우, 기존 선택 취소

                        // 기존 버튼 찾기
                        const existingButton = isFirst ?
                            document.querySelector(`.selection-btn.second[data-question="${questionNum}"][data-option="${option}"].selected`) :
                            document.querySelector(`.selection-btn.first[data-question="${questionNum}"][data-option="${option}"].selected`);

                        // 기존 버튼 선택 취소
                        if (existingButton) {
                            existingButton.classList.remove('selected');
                        }

                        // 저장된 선택 상태 업데이트
                        if (isFirst) {
                            selections[questionNum].second = null;
                        } else {
                            selections[questionNum].first = null;
                        }
                    }

                    // 같은 카테고리(first/second)의 이전 선택 취소
                    document.querySelectorAll(`.selection-btn.${isFirst ? 'first' : 'second'}[data-question="${questionNum}"].selected`).forEach(btn => {
                        btn.classList.remove('selected');
                    });

                    // 현재 버튼 선택
                    button.classList.add('selected');

                    // 선택 저장
                    if (!selections[questionNum]) {
                        selections[questionNum] = {};
                    }

                    if (isFirst) {
                        selections[questionNum].first = option;
                    } else {
                        selections[questionNum].second = option;
                    }

                    // 선택된 옵션 외 다른 옵션들의 투명도 조절
                    updateOptionOpacity(questionNum);

                    // 오류 메시지 숨기기 - 요소가 존재하는지 확인
                    const errorElement = document.getElementById(`error-message-${questionNum}`);
                    if (errorElement) {
                        errorElement.style.display = 'none';
                    }
                } catch (error) {
                    console.error('선택 버튼 처리 중 오류 발생:', error);
                    // 오류가 발생해도 사용자 경험에 영향을 주지 않도록 조용히 처리
                }
            }

            function savePageResult(pageNum, first, second) {
                // 첫 번째 선택지의 능력치 점수 추가 (가장 가까운)
                const firstBtn = document.querySelector(`.selection-btn.first[data-question="${pageNum}"][data-option="${first}"]`);
                if (firstBtn) {
                    const statsData = firstBtn.dataset.stats;
                    if (statsData) {
                        const statsList = statsData.split(',');
                        statsList.forEach(statItem => {
                            const [stat, value] = statItem.split(':');
                            const numValue = parseFloat(value);
                            if (!isNaN(numValue) && statsResults.hasOwnProperty(stat)) {
                                statsResults[stat] += numValue;
                            }
                        });
                    }
                }

                // 두 번째 선택지의 능력치 점수 추가 (가장 먼 - 반대로 계산)
                const secondBtn = document.querySelector(`.selection-btn.second[data-question="${pageNum}"][data-option="${second}"]`);
                if (secondBtn) {
                    const statsData = secondBtn.dataset.stats;
                    if (statsData) {
                        const statsList = statsData.split(',');
                        statsList.forEach(statItem => {
                            const [stat, value] = statItem.split(':');
                            const numValue = parseFloat(value);
                            if (!isNaN(numValue) && statsResults.hasOwnProperty(stat)) {
                                statsResults[stat] += numValue;
                            }
                        });
                    }
                }
            }

            // 페이지 인디케이터 업데이트
            function updatePageIndicators() {
                const indicators = document.querySelectorAll('.page-indicator');
                indicators.forEach(indicator => {
                    if (parseInt(indicator.dataset.page) === currentPage) {
                        indicator.classList.add('active');
                    } else {
                        indicator.classList.remove('active');
                    }
                });
            }

            // 진행률 업데이트
            function updateProgress() {
                const completedQuestions = Object.keys(selections).filter(key =>
                    selections[key] && selections[key].first && selections[key].second
                ).length;
                const progressPercentage = (completedQuestions / totalPages) * 100;
                document.getElementById('progress-bar').style.width = progressPercentage + '%';
            }

            // 수정된 제출 함수
            function submitResults() {
                // 마지막 페이지 유효성 검사
                if (!validatePage(totalPages)) return;

                // 모든 질문에 답변했는지 확인
                let allQuestionsAnswered = true;
                let firstUnansweredQuestion = null;

                for (let i = 1; i <= totalPages; i++) {
                    if (!selections[i] || !selections[i].first || !selections[i].second) {
                        allQuestionsAnswered = false;

                        // 첫 번째 미답변 질문 번호 저장
                        if (firstUnansweredQuestion === null) {
                            firstUnansweredQuestion = i;
                        }
                    }
                }

                if (!allQuestionsAnswered) {
                    alert(`모든 질문에 답변해주세요!`);

                    // 첫 번째 미답변 질문으로 이동
                    if (firstUnansweredQuestion !== null) {
                        navigateToPage(firstUnansweredQuestion);
                    }

                    return;
                }

                // 점수 정규화 및 유효 범위 설정
                const normalizedStats = {};

                Object.keys(statsResults).forEach(stat => {
                    let value = statsResults[stat];

                    // 최소값 0, 최대값 100으로 제한
                    value = Math.max(0, Math.min(value, 100));

                    // 정수로 반올림
                    normalizedStats[stat] = Math.round(value);
                });

                // 로그 추가: 최종 스탯 결과 상세 출력
                console.log("최종 스탯 결과 (상세):", normalizedStats);
                console.table(normalizedStats); // 테이블 형태로 보기 좋게 출력

                // 각 스탯 값 검증
                Object.entries(normalizedStats).forEach(([stat, value]) => {
                    console.log(`${stat}: ${value} (${typeof value})`);
                    if (value === 0) {
                        console.warn(`주의: ${stat} 값이 0입니다!`);
                    }
                });

                // 고유한 시드 생성 (현재 시간 + 스탯 합계)
                const seed = Date.now() + Object.values(normalizedStats).reduce((sum, val) => sum + val, 0);
                console.log("생성된 시드값:", seed);

                // 스탯 이름의 순서를 고정 (고정된 순서로 값만 전달)
                const statOrder = [
                    '꼰대력', '내로남불', '갑질지수', '책임회피',
                    '워라밸파괴', '무능력', '합리성'
                ];

                // 순서대로 값만 추출하여 쉼표로 구분된 문자열로 만듦
                const statsValues = statOrder.map(stat => normalizedStats[stat] || 0).join(',');
                console.log("URL로 전달될 stats 파라미터:", statsValues);

                // 최종 URL 미리보기
                const resultUrl = `result.html?seed=${seed}&stats=${statsValues}`;
                console.log("최종 결과 URL:", resultUrl);

                // URL 파라미터로 시드와 스탯 값 배열만 전달
                window.location.href = resultUrl;
            }

            // 선택 버튼 클릭 이벤트 처리 함수
            function handleSelectionBtnClick(event) {
                try {
                    const button = event.target;

                    // 예시 버튼인 경우 무시
                    if (button.classList.contains('example-btn')) {
                        return;
                    }

                    const questionNum = button.dataset.question;
                    const option = button.dataset.option;

                    // 필요한 데이터가 없으면 함수 종료
                    if (!questionNum || !option) {
                        console.warn('선택 버튼에 필요한 데이터 속성이 없습니다');
                        return;
                    }

                    const isFirst = button.classList.contains('first');

                    // 이미 선택된 버튼이면 선택 취소
                    if (button.classList.contains('selected')) {
                        button.classList.remove('selected');

                        if (isFirst) {
                            if (selections[questionNum]) {
                                selections[questionNum].first = null;
                            }
                        } else {
                            if (selections[questionNum]) {
                                selections[questionNum].second = null;
                            }
                        }

                        // 선택 취소시 옵션들 투명도 복원
                        resetOptionOpacity(questionNum);
                        return;
                    }

                    // 이미 다른 유형(first/second)으로 같은 옵션이 선택되어 있는지 확인
                    if ((isFirst && selections[questionNum] && selections[questionNum].second === option) ||
                        (!isFirst && selections[questionNum] && selections[questionNum].first === option)) {
                        // 이미 다른 유형으로 선택된 옵션인 경우, 기존 선택 취소

                        // 기존 버튼 찾기
                        const existingButton = isFirst ?
                            document.querySelector(`.selection-btn.second[data-question="${questionNum}"][data-option="${option}"].selected`) :
                            document.querySelector(`.selection-btn.first[data-question="${questionNum}"][data-option="${option}"].selected`);

                        // 기존 버튼 선택 취소
                        if (existingButton) {
                            existingButton.classList.remove('selected');
                        }

                        // 저장된 선택 상태 업데이트
                        if (isFirst) {
                            selections[questionNum].second = null;
                        } else {
                            selections[questionNum].first = null;
                        }
                    }

                    // 같은 카테고리(first/second)의 이전 선택 취소
                    document.querySelectorAll(`.selection-btn.${isFirst ? 'first' : 'second'}[data-question="${questionNum}"].selected`).forEach(btn => {
                        btn.classList.remove('selected');
                    });

                    // 현재 버튼 선택
                    button.classList.add('selected');

                    // 선택 저장
                    if (!selections[questionNum]) {
                        selections[questionNum] = {};
                    }

                    if (isFirst) {
                        selections[questionNum].first = option;
                    } else {
                        selections[questionNum].second = option;
                    }

                    // 선택된 옵션 외 다른 옵션들의 투명도 조절
                    updateOptionOpacity(questionNum);

                    // 오류 메시지 숨기기 - 요소가 존재하는지 확인
                    const errorElement = document.getElementById(`error-message-${questionNum}`);
                    if (errorElement) {
                        errorElement.style.display = 'none';
                    }
                } catch (error) {
                    console.error('선택 버튼 처리 중 오류 발생:', error);
                    // 오류가 발생해도 사용자 경험에 영향을 주지 않도록 조용히 처리
                }
            }

            function updateOptionOpacity(questionNum) {
                // 현재 선택 상태 확인
                const current = selections[questionNum] || {};
                const hasFirst = current.first !== undefined && current.first !== null;
                const hasSecond = current.second !== undefined && current.second !== null;

                // 모든 옵션에 대해 처리
                document.querySelectorAll(`#question-page-${questionNum} .option`).forEach(option => {
                    const optionId = option.id;
                    const optionLetter = optionId.split('-')[2]; // 예: option-1-A에서 A 추출

                    // 클래스명 수정
                    if (hasFirst && current.first === optionLetter) {
                        option.classList.add('selected-first');
                        option.classList.remove('selected-second');
                    } else if (hasSecond && current.second === optionLetter) {
                        option.classList.add('selected-second');
                        option.classList.remove('selected-first');
                    } else {
                        option.classList.remove('selected-first');
                        option.classList.remove('selected-second');
                    }

                    // 둘 다 선택된 경우 다른 옵션 흐리게
                    if (hasFirst && hasSecond) {
                        if (optionLetter !== current.first && optionLetter !== current.second) {
                            option.classList.add('dimmed');
                        } else {
                            option.classList.remove('dimmed');
                        }
                    } else {
                        option.classList.remove('dimmed');
                    }
                });
            }

            // 옵션 투명도 초기화 함수
            function resetOptionOpacity(questionNum) {
                document.querySelectorAll(`#question-page-${questionNum} .option`).forEach(option => {
                    option.classList.remove('dimmed');
                    option.classList.remove('selected-first');
                    option.classList.remove('selected-second');
                });
            }

            // 선택 상태 복원
            function restoreSelections() {
                Object.keys(selections).forEach(questionNum => {
                    const selection = selections[questionNum];

                    if (selection.first) {
                        const firstBtn = document.querySelector(`.selection-btn.first[data-question="${questionNum}"][data-option="${selection.first}"]`);
                        if (firstBtn) firstBtn.classList.add('selected');
                    }

                    if (selection.second) {
                        const secondBtn = document.querySelector(`.selection-btn.second[data-question="${questionNum}"][data-option="${selection.second}"]`);
                        if (secondBtn) secondBtn.classList.add('selected');
                    }

                    // 투명도 업데이트
                    updateOptionOpacity(questionNum);
                });
            }

            // 모든 스탯에 기본 점수 30점 부여
            function initializeStatsWithBaseScore() {
                Object.keys(statTypes).forEach(stat => {
                    statsResults[stat] = 0; // 모든 스탯의 기본값을 30으로 설정
                });
                console.log("스탯 초기화 완료:", statsResults);
            }

            // 이벤트 리스너 설정
            function setupEventListeners() {
                // 시작 버튼
                document.getElementById('start-btn').addEventListener('click', function () {
                    navigateToPage(1);
                });

                // 이전/다음 버튼 및 결과 확인 버튼
                for (let i = 1; i <= totalPages; i++) {
                    // 다음 버튼
                    if (i < totalPages) {
                        document.getElementById(`next-btn-${i}`).addEventListener('click', function () {
                            navigateToPage(i + 1);
                        });
                    }

                    // 이전 버튼
                    if (i > 1) {
                        document.getElementById(`prev-btn-${i}`).addEventListener('click', function () {
                            navigateToPage(i - 1);
                        });
                    }
                }

                // 결과 확인 버튼
                document.getElementById('submit-btn').addEventListener('click', submitResults);

                // 모든 선택 버튼에 이벤트 리스너 추가
                document.querySelectorAll('.selection-btn').forEach(button => {
                    button.addEventListener('click', handleSelectionBtnClick);
                });
            }

            // 페이지 로드 시 실행 함수에 초기화 코드 추가
            window.addEventListener('load', function () {
                createPageIndicators();
                setupEventListeners();

                // 모든 스탯에 기본 점수 부여
                initializeStatsWithBaseScore();

                // 인트로 페이지부터 시작
                navigateToPage(0);
            });
        </script>
</body>

</html>
